/*! For license information please see main.1ddc706c.js.LICENSE.txt */
(()=>{var e={445:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,s=a(e),o=s[0],l=s[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,o,l)),u=0,h=l>0?o-4:o;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===l&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===l&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,s=[],o=16383,a=0,c=r-i;a<c;a+=o)s.push(l(e,a,a+o>c?c:a+o));1===i?(t=e[r-1],s.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return s.join("")};for(var n=[],r=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=s[o],r[s.charCodeAt(o)]=o;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,r){for(var i,s,o=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(n[(s=i)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},382:(e,t,n)=>{"use strict";const r=n(445),i=n(900),s="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50;const o=2147483647;function a(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,n)}function c(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|m(e,t);let r=a(n);const i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return f(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return f(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return l.from(r,t,n);const i=function(e){if(l.isBuffer(e)){const t=0|p(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||Q(e.length)?a(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return u(e),a(e<0?0:0|p(e))}function d(e){const t=e.length<0?0:0|p(e.length),n=a(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,l.prototype),r}function p(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(i)return r?-1:W(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return N(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Q(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){let s,o=1,a=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,a/=2,l/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let r=-1;for(s=n;s<a;s++)if(c(e,s)===c(t,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===l)return r*o}else-1!==r&&(s-=s-r),r=-1}else for(n+l>a&&(n=a-l),s=n;s>=0;s--){let n=!0;for(let r=0;r<l;r++)if(c(e,s+r)!==c(t,r)){n=!1;break}if(n)return s}return-1}function _(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const s=t.length;let o;for(r>s/2&&(r=s/2),o=0;o<r;++o){const r=parseInt(t.substr(2*o,2),16);if(Q(r))return o;e[n+o]=r}return o}function w(e,t,n,r){return G(W(t,e.length-n),e,n,r)}function E(e,t,n,r){return G(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return G(K(t),e,n,r)}function x(e,t,n,r){return G(function(e,t){let n,r,i;const s=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r);return s}(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=n){let n,r,a,l;switch(o){case 1:t<128&&(s=t);break;case 2:n=e[i+1],128===(192&n)&&(l=(31&t)<<6|63&n,l>127&&(s=l));break;case 3:n=e[i+1],r=e[i+2],128===(192&n)&&128===(192&r)&&(l=(15&t)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:n=e[i+1],r=e[i+2],a=e[i+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&a,l>65535&&l<1114112&&(s=l))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=o}return function(e){const t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=k));return n}(r)}t.kMaxLength=o,l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?a(e):void 0!==t?"string"===typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},l.allocUnsafe=function(e){return h(e)},l.allocUnsafeSlow=function(e){return h(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(Y(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=l.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(Y(t,Uint8Array))i+t.length>r.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},s&&(l.prototype[s]=l.prototype.inspect),l.prototype.compare=function(e,t,n,r,i){if(Y(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0);const a=Math.min(s,o),c=this.slice(r,i),u=e.slice(t,n);for(let l=0;l<a;++l)if(c[l]!==u[l]){s=c[l],o=u[l];break}return s<o?-1:o<s?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":case"latin1":case"binary":return E(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function I(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function N(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function R(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let s=t;s<n;++s)i+=J[e[s]];return i}function A(e,t,n){const r=e.slice(t,n);let i="";for(let s=0;s<r.length-1;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function P(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,i,s){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r,i){z(t,r,i,e,n,7);let s=Number(t&BigInt(4294967295));e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function L(e,t,n,r,i){z(t,r,i,e,n,7);let s=Number(t&BigInt(4294967295));e[n+7]=s,s>>=8,e[n+6]=s,s>>=8,e[n+5]=s,s>>=8,e[n+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function j(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(e,t,n,r,s){return t=+t,n>>>=0,s||j(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,s){return t=+t,n>>>=0,s||j(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);let r=this[e],i=1,s=0;for(;++s<t&&(i*=256);)r+=this[e+s]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=X((function(e){q(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),l.prototype.readBigUInt64BE=X((function(e){q(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);let r=this[e],i=1,s=0;for(;++s<t&&(i*=256);)r+=this[e+s]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);let r=t,i=1,s=this[e+--r];for(;r>0&&(i*=256);)s+=this[e+--r]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},l.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=X((function(e){q(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=X((function(e){q(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){O(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){O(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=X((function(e){return D(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=X((function(e){return L(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}let i=0,s=1,o=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}let i=n-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=X((function(e){return D(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=X((function(e){return L(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},l.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(i=t;i<n;++i)this[i]=e;else{const s=l.isBuffer(e)?e:l.from(e,r),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=s[i%o]}return this};const U={};function V(e,t,n){U[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function B(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function z(e,t,n,r,i,s){if(e>n||e<t){const r="bigint"===typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(s+1)}${r}`:`>= -(2${r} ** ${8*(s+1)-1}${r}) and < 2 ** ${8*(s+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new U.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||H(t,e.length-(n+1))}(r,i,s)}function q(e,t){if("number"!==typeof e)throw new U.ERR_INVALID_ARG_TYPE(t,"number",e)}function H(e,t,n){if(Math.floor(e)!==e)throw q(e,n),new U.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}V("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),V("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),V("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=B(String(n)):"bigint"===typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=B(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const $=/[^+/0-9A-Za-z-_]/g;function W(e,t){let n;t=t||1/0;const r=e.length;let i=null;const s=[];for(let o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function K(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace($,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function G(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!==e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function X(e){return"undefined"===typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},522:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(n){}!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAWLn1bc_sregpLCEw2SDYgm3_UNE8Y-SA",REACT_APP_FIREBASE_APP_ID:"1:683690908711:web:832832fefb01be07eb8202",REACT_APP_FIREBASE_AUTH_DOMAIN:"milan-400c7.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-RWWM318TXZ",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"683690908711",REACT_APP_FIREBASE_PROJECT_ID:"milan-400c7",REACT_APP_FIREBASE_STORAGE_BUCKET:"milan-400c7.appspot.com"}.DEBUG);return e},t.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(237)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},237:(e,t,n)=>{e.exports=function(e){function t(e){let n,i,s,o=null;function a(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];if(!a.enabled)return;const s=a,o=Number(new Date),l=o-(n||o);s.diff=l,s.prev=n,s.curr=o,n=o,r[0]=t.coerce(r[0]),"string"!==typeof r[0]&&r.unshift("%O");let c=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,((e,n)=>{if("%%"===e)return"%";c++;const i=t.formatters[n];if("function"===typeof i){const t=r[c];e=i.call(s,t),r.splice(c,1),c--}return e})),t.formatArgs.call(s,r);(s.log||t.log).apply(s,r)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(i!==t.namespaces&&(i=t.namespaces,s=t.enabled(e)),s),set:e=>{o=e}}),"function"===typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+("undefined"===typeof n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"===typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(340),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},823:e=>{"use strict";function t(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}e.exports=function(e,n,r){if(!e||"string"===typeof e)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"===typeof n&&(r=n,n=""),n&&(r.code=n);try{return t(e,r)}catch(i){r.message=e.message,r.stack=e.stack;const n=function(){};n.prototype=Object.create(Object.getPrototypeOf(e));return t(new n,r)}}},284:e=>{"use strict";var t,n="object"===typeof Reflect?Reflect:null,r=n&&"function"===typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!==e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,s),r(n)}function s(){"function"===typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,s,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&m(e,"error",t,n)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,s,o,c;if(a(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"===typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=l(e))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):p(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"===typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){r.once&&e.removeEventListener(t,i),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(void 0===l)return!1;if("function"===typeof l)r(l,this,t);else{var c=l.length,u=p(l,c);for(n=0;n<c;++n)r(u[n],this,t)}return!0},s.prototype.addListener=function(e,t){return c(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return c(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,s,o;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},919:e=>{e.exports=function(){if("undefined"===typeof globalThis)return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},219:(e,t,n)=>{"use strict";var r=n(763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=u(n);h&&(o=o.concat(h(n)));for(var a=l(t),m=l(n),g=0;g<o.length;++g){var y=o[g];if(!s[y]&&(!r||!r[y])&&(!m||!m[y])&&(!a||!a[y])){var v=d(n,y);try{c(t,y,v)}catch(b){}}}}return t}},983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function E(e){return w(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return E(e)||w(e)===u},t.isConcurrentMode=E,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===s},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===a},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===a||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===v||e.$$typeof===b||e.$$typeof===_||e.$$typeof===y)},t.typeOf=w},763:(e,t,n)=>{"use strict";e.exports=n(983)},900:(e,t)=>{t.read=function(e,t,n,r,i){var s,o,a=8*i-r-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=256*s+e[t+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=256*o+e[t+h],h+=d,u-=8);if(0===s)s=1-c;else{if(s===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),s-=c}return(f?-1:1)*o*Math.pow(2,s-r)},t.write=function(e,t,n,r,i,s){var o,a,l,c=8*s-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(t*l-1)*Math.pow(2,i),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[n+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;e[n+f]=255&o,f+=p,o/=256,c-=8);e[n+f-p]|=128*m}},329:e=>{"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},340:e=>{var t=1e3,n=60*t,r=60*n,i=24*r,s=7*i,o=365.25*i;function a(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,l){l=l||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var l=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*o;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*i;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*n;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(e);if("number"===c&&isFinite(e))return l.long?function(e){var s=Math.abs(e);if(s>=i)return a(e,s,i,"day");if(s>=r)return a(e,s,r,"hour");if(s>=n)return a(e,s,n,"minute");if(s>=t)return a(e,s,t,"second");return e+" ms"}(e):function(e){var s=Math.abs(e);if(s>=i)return Math.round(e/i)+"d";if(s>=r)return Math.round(e/r)+"h";if(s>=n)return Math.round(e/n)+"m";if(s>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},285:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"===typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var a,l=[],c=!1,u=-1;function h(){c&&a&&(c=!1,a.length?l=a.concat(l):u=-1,l.length&&d())}function d(){if(!c){var e=o(h);c=!0;for(var t=l.length;t;){for(a=l,l=[];++u<t;)a&&a[u].run();u=-1,t=l.length}a=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||c||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},275:(e,t,n)=>{let r;e.exports="function"===typeof queueMicrotask?queueMicrotask.bind("undefined"!==typeof window?window:n.g):e=>(r||(r=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},838:(e,t,n)=>{"use strict";var r=65536,i=4294967295;var s=n(966).Buffer,o=n.g.crypto||n.g.msCrypto;o&&o.getRandomValues?e.exports=function(e,t){if(e>i)throw new RangeError("requested too many random bytes");var n=s.allocUnsafe(e);if(e>0)if(e>r)for(var a=0;a<e;a+=r)o.getRandomValues(n.slice(a,a+r));else o.getRandomValues(n);if("function"===typeof t)return process.nextTick((function(){t(null,n)}));return n}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},730:(e,t,n)=>{"use strict";var r=n(43),i=n(234);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),k=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var j,M=Object.assign;function F(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case C:return"Profiler";case x:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,xe=null;function Ce(e){if(e=bi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),Ee(e.stateNode,e.type,t))}}function Te(e){Se?xe?xe.push(e):xe=[e]:Se=e}function ke(){if(Se){var e=Se,t=xe;if(xe=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Re=!1;function Ae(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==Se||null!==xe)&&(Ne(),ke())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var je=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){je=!0,Me=e}};function Be(e,t,n,r,i,s,o,a,l){je=!1,Me=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(s(188))}function $e(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Et,St,xt,Ct,Tt=!1,kt=[],It=null,Nt=null,Rt=null,At=new Map,Pt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function jt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Ct(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Tt=!1,null!==It&&Ft(It)&&(It=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==Rt&&Ft(Rt)&&(Rt=null),At.forEach(Ut),Pt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<kt.length){Bt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Bt(It,e),null!==Nt&&Bt(Nt,e),null!==Rt&&Bt(Rt,e),At.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Mt(n),null===n.blockedOn&&Ot.shift()}var qt=_.ReactCurrentBatchConfig,Ht=!0;function $t(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,qt.transition=s}}function Wt(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,qt.transition=s}}function Kt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Gt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=jt(It,e,t,n,r,i),!0;case"dragenter":return Nt=jt(Nt,e,t,n,r,i),!0;case"mouseover":return Rt=jt(Rt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return At.set(s,jt(At.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,jt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&wt(s),null===(s=Yt(e,t,n,r))&&Hr(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Gt=null;function Yt(e,t,n,r){if(Gt=null,null!==(e=vi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=M({},cn,{view:0,detail:0}),dn=sn(hn),fn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},hn,{relatedTarget:0})),yn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),_n=sn(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return xn}var Tn=M({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=sn(Tn),In=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(An),On=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var jn=u&&"TextEvent"in window&&!Ln,Mn=u&&(!Dn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function $n(e,t,n,r){Te(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Gn(e){Fr(e,0)}function Yn(e){if(K(_i(e)))return e}function Qn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];$n(t,Kn,e,we(e)),Ae(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},xr={};function Cr(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return Sr[e]=n[t];return e}u&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Tr=Cr("animationend"),kr=Cr("animationiteration"),Ir=Cr("animationstart"),Nr=Cr("transitionend"),Rr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Rr.set(e,t),l(t,[e])}for(var Or=0;Or<Ar.length;Or++){var Dr=Ar[Or];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Tr,"onAnimationEnd"),Pr(kr,"onAnimationIteration"),Pr(Ir,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Be.apply(this,arguments),je){if(!je)throw Error(s(198));var u=Me;je=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(jr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Qt(t)){case 1:var i=$t;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Ae((function(){var r=s,i=we(n),o=[];e:{var a=Rr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Tr:case kr:case Ir:l=yn;break;case Nr:l=Rn;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&u.push($r(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:_i(l),f=null==c?a:_i(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=d;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)d=Kr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Kr(u),d=Kr(d)}u=null}else u=null;null!==l&&Gr(o,a,l,u,!1),null!==c&&null!==h&&Gr(o,h,c,u,!0)}if("select"===(l=(a=r?_i(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Qn;else if(Hn(a))if(Jn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?$n(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?_i(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":_r(o,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Wr(r,b)).length&&(b=new _n(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Fr(o,t)}))}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift($r(e,s,i)),null!=(s=Pe(e,t))&&r.push($r(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,s))&&o.unshift($r(n,l,a)):i||null!=(l=Pe(n,s))&&o.push($r(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Qr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[fi]||null}var Ei=[],Si=-1;function xi(e){return{current:e}}function Ci(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function Ti(e,t){Si++,Ei[Si]=e.current,e.current=t}var ki={},Ii=xi(ki),Ni=xi(!1),Ri=ki;function Ai(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ci(Ni),Ci(Ii)}function Di(e,t,n){if(Ii.current!==ki)throw Error(s(168));Ti(Ii,t),Ti(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return M({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ri=Ii.current,Ti(Ii,e),Ti(Ni,Ni.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ci(Ni),Ci(Ii),Ti(Ii,e)):Ci(Ni),Ti(Ni,n)}var Fi=null,Ui=!1,Vi=!1;function Bi(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,zi),i}finally{bt=t,Vi=!1}}return null}var qi=[],Hi=0,$i=null,Wi=0,Ki=[],Gi=0,Yi=null,Qi=1,Ji="";function Xi(e,t){qi[Hi++]=Wi,qi[Hi++]=$i,$i=e,Wi=t}function Zi(e,t,n){Ki[Gi++]=Qi,Ki[Gi++]=Ji,Ki[Gi++]=Yi,Yi=e;var r=Qi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Qi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===$i;)$i=qi[--Hi],qi[Hi]=null,Wi=qi[--Hi],qi[Hi]=null;for(;e===Yi;)Yi=Ki[--Gi],Ki[Gi]=null,Ji=Ki[--Gi],Ki[Gi]=null,Qi=Ki[--Gi],Ki[Gi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Qi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=_.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&vs(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case E:return(t=Fc(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Xi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===h?u=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&Xi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&vs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((s=Lc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Dc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Mc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var _s=bs(!0),ws=bs(!1),Es=xi(null),Ss=null,xs=null,Cs=null;function Ts(){Cs=xs=Ss=null}function ks(e){var t=Es.current;Ci(Es),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){Ss=e,Cs=xs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(Cs!==e)if(e={context:e,memoizedValue:t,next:null},null===xs){if(null===Ss)throw Error(s(308));xs=e,Ss.dependencies={lanes:0,firstContext:e}}else xs=xs.next=e;return t}var As=null;function Ps(e){null===As?As=[e]:As.push(e)}function Os(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ps(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function js(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,Ps(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=M({},h,d);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);jl|=o,e.lanes=o,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},$s=xi(Hs),Ws=xi(Hs),Ks=xi(Hs);function Gs(e){if(e===Hs)throw Error(s(174));return e}function Ys(e,t){switch(Ti(Ks,t),Ti(Ws,e),Ti($s,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci($s),Ti($s,t)}function Qs(){Ci($s),Ci(Ws),Ci(Ks)}function Js(e){Gs(Ks.current);var t=Gs($s.current),n=le(t,e.type);t!==n&&(Ti(Ws,e),Ti($s,n))}function Xs(e){Ws.current===e&&(Ci($s),Ci(Ws))}var Zs=xi(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=_.ReactCurrentDispatcher,io=_.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Xo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function _o(e,t){return"function"===typeof t?t(e):t}function wo(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((so&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,oo.lanes|=h,jl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,jl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function xo(e,t){var n=oo,r=bo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,jo(ko.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Ao(9,To.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&so)||Co(n,t,i)}return i}function Co(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,Io(t)&&No(e)}function ko(e,t,n){return n((function(){Io(t)&&No(e)}))}function Io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function No(e){var t=Ds(e,1);null!==t&&nc(t,e,1,-1)}function Ro(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:e},t.queue=e,e=e.dispatch=Go.bind(null,oo,e),[t.memoizedState,e]}function Ao(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Po(){return bo().memoizedState}function Oo(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=Ao(1|t,n,void 0,void 0===r?null:r)}function Do(e,t,n,r){var i=bo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Ao(t,n,s,r))}oo.flags|=e,i.memoizedState=Ao(1|t,n,s,r)}function Lo(e,t){return Oo(8390656,8,e,t)}function jo(e,t){return Do(2048,8,e,t)}function Mo(e,t){return Do(4,2,e,t)}function Fo(e,t){return Do(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4,4,Uo.bind(null,t,e),n)}function Bo(){}function zo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,jl|=n,e.baseState=!0),t)}function $o(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{bt=n,io.transition=r}}function Wo(){return bo().memoizedState}function Ko(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e))Qo(t,n);else if(null!==(n=Os(e,t,n,r))){nc(n,e,r,ec()),Jo(n,t,r)}}function Go(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Qo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ps(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Os(e,t,i,r))&&(nc(n,e,r,i=ec()),Jo(n,t,r))}}function Yo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Qo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xo={readContext:Rs,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Rs,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:Ro,useDebugValue:Bo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=Ro(!1),t=e[0];return e=$o.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&so)||Co(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(ko.bind(null,r,o,e),[e]),r.flags|=2048,Ao(9,To.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Nl.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Qi&~(1<<32-ot(Qi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Rs,useCallback:zo,useContext:Rs,useEffect:jo,useImperativeHandle:Vo,useInsertionEffect:Mo,useLayoutEffect:Fo,useMemo:qo,useReducer:wo,useRef:Po,useState:function(){return wo(_o)},useDebugValue:Bo,useDeferredValue:function(e){return Ho(bo(),ao.memoizedState,e)},useTransition:function(){return[wo(_o)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:xo,useId:Wo,unstable_isNewReconciler:!1},ta={readContext:Rs,useCallback:zo,useContext:Rs,useEffect:jo,useImperativeHandle:Vo,useInsertionEffect:Mo,useLayoutEffect:Fo,useMemo:qo,useReducer:Eo,useRef:Po,useState:function(){return Eo(_o)},useDebugValue:Bo,useDeferredValue:function(e){var t=bo();return null===ao?t.memoizedState=e:Ho(t,ao.memoizedState,e)},useTransition:function(){return[Eo(_o)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:xo,useId:Wo,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(nc(t,e,r,n),Vs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=ki,s=t.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(i=Pi(t)?Ri:Ii.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):ki),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},js(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Rs(s):(s=Pi(t)?Ri:Ii.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),zs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,$l=r),ha(0,t)},n}function pa(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=_.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?ws(t,null,n,r):_s(t,e.child,n,r)}function wa(e,t,n,r,i){n=n.render;var s=t.ref;return Ns(t,i),r=go(e,t,n,r,s,i),n=yo(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ta(e,t,n,r,i)}function xa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Ol,Pl),Pl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Ol,Pl),Pl|=r;return _a(e,t,i,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var s=Pi(n)?Ri:Ii.current;return s=Ai(t,s),Ns(t,i),n=go(e,t,n,r,s,i),r=yo(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function ka(e,t,n,r,i){if(Pi(n)){var s=!0;ji(t)}else s=!1;if(Ns(t,i),null===t.stateNode)qa(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Rs(c):c=Ai(t,c=Pi(n)?Ri:Ii.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Ls=!1;var d=t.memoizedState;o.state=d,zs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ni.current||Ls?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ls||sa(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ms(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Rs(l):l=Ai(t,l=Pi(n)?Ri:Ii.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,r,l),Ls=!1,d=t.memoizedState,o.state=d,zs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||Ls?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Ls||sa(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ia(e,t,n,r,s,i)}function Ia(e,t,n,r,i,s){Ca(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Ha(e,t,s);r=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=_s(t,e.child,null,s),t.child=_s(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ys(e,t.containerInfo)}function Ra(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Aa,Pa,Oa,Da,La={dehydrated:null,treeContext:null,retryLane:0};function ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ma(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=jc(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ja(n),t.memoizedState=La,e):Fa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&_s(t,e.child,null,a),t.child.memoizedState=ja(a),t.memoizedState=La,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ds(e,i),nc(r,e,i,-1))}return mc(),Ua(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=kc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Gi++]=Qi,Ki[Gi++]=Ji,Ki[Gi++]=Yi,Qi=e.id,Ji=e.overflow,Yi=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?ja(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&ps(r),_s(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function Ba(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function za(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $a(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Wa(t),null;case 3:return r=t.stateNode,Qs(),Ci(Ni),Ci(Ii),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Pa(e,t),Wa(t),null;case 5:Xs(t);var i=Gs(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wa(t),null}if(e=Gs($s.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Q(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Aa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Q(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Gs(Ks.current),Gs($s.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Wa(t),null;case 13:if(Ci(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Dl&&(Dl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return Qs(),Pa(e,t),null===e&&zr(t.stateNode.containerInfo),Wa(t),null;case 10:return ks(t.type._context),Wa(t),null;case 19:if(Ci(Zs),null===(o=t.memoizedState))return Wa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)$a(o,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,$a(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>zl&&(t.flags|=128,r=!0,$a(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$a(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Wa(t),null}else 2*Je()-o.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,$a(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=Zs.current,Ti(Zs,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ga(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),Ci(Ni),Ci(Ii),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(Ci(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(Zs),null;case 4:return Qs(),null;case 10:return ks(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Aa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gs($s.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Da=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Qa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){xc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Qa||Za(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Qa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Qa&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){xc(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Qa=(r=Qa)||null!==n.memoizedState,dl(e,t,n),Qa=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){xc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){xc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){xc(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){xc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),be(l,a);var u=be(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){xc(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){xc(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){xc(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Je())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Qa=(u=Qa)||h,ml(t,e),Qa=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Xa=e,h=e.child;null!==h;){for(d=Xa=h;null!==Xa;){switch(p=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){xc(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){wl(d);continue}}null!==p?(p.return=f,Xa=p):wl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){xc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){xc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){xc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xa=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Qa;a=Ya;var c=Qa;if(Ya=o,(Qa=l)&&!c)for(Xa=i;null!==Xa;)l=(o=Xa).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,Xa=l):El(i);for(;null!==s;)Xa=s,bl(s,t,n),s=s.sibling;Xa=i,Ya=a,Qa=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xa=s):_l(e)}}function _l(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qa||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}Qa||512&t.flags&&il(t)}catch(f){xc(t,t.return,f)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function wl(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function El(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){xc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){xc(t,i,l)}}var s=t.return;try{il(t)}catch(l){xc(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){xc(t,o,l)}}}catch(l){xc(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Sl,xl=Math.ceil,Cl=_.ReactCurrentDispatcher,Tl=_.ReactCurrentOwner,kl=_.ReactCurrentBatchConfig,Il=0,Nl=null,Rl=null,Al=0,Pl=0,Ol=xi(0),Dl=0,Ll=null,jl=0,Ml=0,Fl=0,Ul=null,Vl=null,Bl=0,zl=1/0,ql=null,Hl=!1,$l=null,Wl=null,Kl=!1,Gl=null,Yl=0,Ql=0,Jl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Il)?Je():-1!==Xl?Xl:Xl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Al?Al&-Al:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,r){if(50<Ql)throw Ql=0,Jl=null,Error(s(185));yt(e,n,r),0!==(2&Il)&&e===Nl||(e===Nl&&(0===(2&Il)&&(Ml|=n),4===Dl&&ac(e,Al)),rc(e,r),1===n&&0===Il&&0===(1&t.mode)&&(zl=Je()+500,Ui&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Nl?Al:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(lc.bind(null,e)):Bi(lc.bind(null,e)),oi((function(){0===(6&Il)&&zi()})),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xl=-1,Zl=0,0!==(6&Il))throw Error(s(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Il;Il|=2;var o=pc();for(Nl===e&&Al===t||(ql=null,zl=Je()+500,dc(e,t));;)try{vc();break}catch(l){fc(e,l)}Ts(),Cl.current=o,Il=i,null!==Rl?t=0:(Nl=null,Al=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ll,dc(e,0),ac(e,r),rc(e,Je()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=sc(e,o))),1===t))throw n=Ll,dc(e,0),ac(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Vl,ql);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Bl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vl,ql),t);break}wc(e,Vl,ql);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xl(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vl,ql),r);break}wc(e,Vl,ql);break;default:throw Error(s(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&oc(t)),e}function oc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function ac(e,t){for(t&=~Fl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Il))throw Error(s(327));Ec();var t=dt(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,dc(e,0),ac(e,t),rc(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vl,ql),rc(e,Je()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(zl=Je()+500,Ui&&zi())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&Il)&&Ec();var t=Il;Il|=1;var n=kl.transition,r=bt;try{if(kl.transition=null,bt=1,e)return e()}finally{bt=r,kl.transition=n,0===(6&(Il=t))&&zi()}}function hc(){Pl=Ol.current,Ci(Ol)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:Qs(),Ci(Ni),Ci(Ii),no();break;case 5:Xs(r);break;case 4:Qs();break;case 13:case 19:Ci(Zs);break;case 10:ks(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Nl=e,Rl=e=Oc(e.current,null),Al=Pl=t,Dl=0,Ll=null,Fl=Ml=jl=0,Vl=Ul=null,null!==As){for(t=0;t<As.length;t++)if(null!==(r=(n=As[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}As=null}return e}function fc(e,t){for(;;){var n=Rl;try{if(Ts(),ro.current=Xo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,Tl.current=null,null===n||null===n.return){Dl=1,Ll=t,Rl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),ps(ca(c,l));break e}}o=c=ca(c,l),4!==Dl&&(Dl=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Bs(o,fa(0,c,t));break e;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Bs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(_){t=_,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function pc(){var e=Cl.current;return Cl.current=Xo,null===e?Xo:e}function mc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Nl||0===(268435455&jl)&&0===(268435455&Ml)||ac(Nl,Al)}function gc(e,t){var n=Il;Il|=2;var r=pc();for(Nl===e&&Al===t||(ql=null,dc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Ts(),Il=n,Cl.current=r,null!==Rl)throw Error(s(261));return Nl=null,Al=0,Dl}function yc(){for(;null!==Rl;)bc(Rl)}function vc(){for(;null!==Rl&&!Ye();)bc(Rl)}function bc(e){var t=Sl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?_c(e):Rl=t,Tl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Pl)))return void(Rl=n)}else{if(null!==(n=Ga(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Dl=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Dl&&(Dl=5)}function wc(e,t,n){var r=bt,i=kl.transition;try{kl.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==Gl);if(0!==(6&Il))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Rl=Nl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Nc(tt,(function(){return Ec(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=kl.transition,kl.transition=null;var a=bt;bt=1;var l=Il;Il|=4,Tl.current=null,function(e,t){if(ei=Ht,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(s(163))}}catch(w){xc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Qe(),Il=l,bt=a,kl.transition=o}else e.current=n;if(Kl&&(Kl=!1,Gl=e,Yl=i),o=e.pendingLanes,0===o&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=$l,$l=null,e;0!==(1&Yl)&&0!==e.tag&&Ec(),o=e.pendingLanes,0!==(1&o)?e===Jl?Ql++:(Ql=0,Jl=e):Ql=0,zi()}(e,t,n,r)}finally{kl.transition=i,bt=r}return null}function Ec(){if(null!==Gl){var e=_t(Yl),t=kl.transition,n=bt;try{if(kl.transition=null,bt=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Yl=0,0!==(6&Il))throw Error(s(331));var i=Il;for(Il|=4,Xa=e.current;null!==Xa;){var o=Xa,a=o.child;if(0!==(16&Xa.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xa=u;null!==Xa;){var h=Xa;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Xa=d;else for(;null!==Xa;){var f=(h=Xa).sibling,p=h.return;if(sl(h),h===u){Xa=null;break}if(null!==f){f.return=p,Xa=f;break}Xa=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(o=Xa).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Xa=v;break e}Xa=o.return}}var b=e.current;for(Xa=b;null!==Xa;){var _=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==_)_.return=a,Xa=_;else e:for(a=b;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(E){xc(l,l.return,E)}if(l===a){Xa=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xa=w;break e}Xa=l.return}}if(Il=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{bt=n,kl.transition=t}}return!1}function Sc(e,t,n){e=Us(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function xc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Us(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Al&n)===n&&(4===Dl||3===Dl&&(130023424&Al)===Al&&500>Je()-Bl?dc(e,0):Fl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ds(e,t))&&(yt(e,t,n),rc(e,n))}function kc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return Ke(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Rc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Pc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Lc(n.children,i,o,t);case x:a=8,i|=8;break;case C:return(e=Ac(12,n,t,2|i)).elementType=C,e.lanes=o,e;case N:return(e=Ac(13,n,t,i)).elementType=N,e.lanes=o,e;case R:return(e=Ac(19,n,t,i)).elementType=R,e.lanes=o,e;case O:return jc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case k:a=9;break e;case I:a=11;break e;case A:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ac(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,o,a,l){return e=new Uc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ac(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},js(s),e}function Bc(e){if(!e)return ki;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,s,o,a,l){return(e=Vc(n,r,!0,e,0,s,0,a,l)).context=Bc(null),n=e.current,(s=Fs(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function qc(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,o))&&(nc(e,i,o,s),Vs(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $c(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){$c(e,t),(e=e.alternate)&&$c(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:Js(t);break;case 1:Pi(t.type)&&ji(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(Es,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ma(e,t,n):(Ti(Zs,1&Zs.current),null!==(e=Ha(e,t,n))?e.sibling:null);Ti(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return za(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,xa(e,t,n)}return Ha(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Ai(t,Ii.current);Ns(t,n),i=go(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,ji(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,js(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Ia(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=ka(null,t,r,e,n);break e;case 11:t=wa(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ms(e,t),zs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ha(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ca(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ma(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_s(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(Es,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Fs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Is(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ns(t,n),r=r(i=Rs(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Ea(e,t,r,i=na(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),qa(e,t),t.tag=1,Pi(r)?(e=!0,ji(t)):e=!1,Ns(t,n),oa(t,r,i),la(t,r,i,n),Ia(null,t,r,!0,e,n);case 19:return za(e,t,n);case 22:return xa(e,t,n)}throw Error(s(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hc(o);a.call(e)}}qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(o);s.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),uc((function(){qc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(o)}Yc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Yc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){qc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Je()),0===(6&Il)&&(zl=Je()+500,zi()))}break;case 13:uc((function(){var t=Ds(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},Et=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Ds(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},xt=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));K(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Ne=uc;var eu={usingClientEntryPoint:!1,Events:[bi,_i,wi,Te,ke,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(s(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var _=b.prototype=new v;_.constructor=b,m(_,y.prototype),_.isPureReactComponent=!0;var w=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!x.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+I(l,0):s,w(o)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+I(a=e[c],c);l+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=s+I(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!x.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},545:e=>{"use strict";var t={};function n(e,n,r){r||(r=Error);var i=function(e){var t,r;function i(t,r,i){return e.call(this,function(e,t,r){return"string"===typeof n?n:n(e,t,r)}(t,r,i))||this}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i}(r);i.prototype.name=r.name,i.prototype.code=e,t[e]=i}function r(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,s,o,a;if("string"===typeof t&&(s="not ",t.substr(!o||o<0?0:+o,s.length)===s)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a="The ".concat(e," ").concat(i," ").concat(r(t,"type"));else{var l=function(e,t,n){return"number"!==typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(l," ").concat(i," ").concat(r(t,"type"))}return a+=". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.F=t},779:(e,t,n)=>{"use strict";var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var i=n(534),s=n(1);n(329)(c,i);for(var o=r(s.prototype),a=0;a<o.length;a++){var l=o[a];c.prototype[l]||(c.prototype[l]=s.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||process.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},559:(e,t,n)=>{"use strict";e.exports=i;var r=n(13);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(329)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},534:(e,t,n)=>{"use strict";var r;e.exports=x,x.ReadableState=S;n(284).EventEmitter;var i=function(e,t){return e.listeners(t).length},s=n(902),o=n(382).Buffer,a=("undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Uint8Array||function(){};var l,c=n(457);l=c&&c.debuglog?c.debuglog("stream"):function(){};var u,h,d,f=n(44),p=n(725),m=n(550).getHighWaterMark,g=n(545).F,y=g.ERR_INVALID_ARG_TYPE,v=g.ERR_STREAM_PUSH_AFTER_EOF,b=g.ERR_METHOD_NOT_IMPLEMENTED,_=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(329)(x,s);var w=p.errorOrDestroy,E=["error","close","destroy","pause","resume"];function S(e,t,i){r=r||n(779),e=e||{},"boolean"!==typeof i&&(i=t instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",i),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=n(694).I),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function x(e){if(r=r||n(779),!(this instanceof x))return new x(e);var t=this instanceof r;this._readableState=new S(e,this,t),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function C(e,t,n,r,i){l("readableAddChunk",t);var s,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(l("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?N(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,R(e)))}(e,c);else if(i||(s=function(e,t){var n;r=t,o.isBuffer(r)||r instanceof a||"string"===typeof t||void 0===t||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(c,t)),s)w(e,s);else if(c.objectMode||t&&t.length>0)if("string"===typeof t||c.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),r)c.endEmitted?w(e,new _):T(e,c,t,!0);else if(c.ended)w(e,new v);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?T(e,c,t,!1):A(e,c)):T(e,c,t,!1)}else r||(c.reading=!1,A(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function T(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&N(e)),A(e,t)}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),x.prototype.destroy=p.destroy,x.prototype._undestroy=p.undestroy,x.prototype._destroy=function(e,t){t(e)},x.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"===typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=o.from(e,t),t=""),n=!0),C(this,e,t,!1,n)},x.prototype.unshift=function(e){return C(this,e,null,!0,!1)},x.prototype.isPaused=function(){return!1===this._readableState.flowing},x.prototype.setEncoding=function(e){u||(u=n(694).I);var t=new u(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var k=1073741824;function I(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=k?e=k:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function N(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(R,e))}function R(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,j(e)}function A(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(P,e,t))}function P(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(l("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function O(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function D(e){l("readable nexttick read 0"),e.read(0)}function L(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),j(e),t.flowing&&!t.reading&&e.read(0)}function j(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function F(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(U,t,e))}function U(e,t){if(l("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function V(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}x.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?F(this):N(this),null;if(0===(e=I(e,t))&&t.ended)return 0===t.length&&F(this),null;var r,i=t.needReadable;return l("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",i=!0),t.ended||t.reading?l("reading or ended",i=!1):i&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=I(n,t))),null===(r=e>0?M(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&F(this)),null!==r&&this.emit("data",r),r},x.prototype._read=function(e){w(this,new b("_read()"))},x.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,l("pipe count=%d opts=%j",r.pipesCount,t);var s=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?a:m;function o(t,i){l("onunpipe"),t===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,l("cleanup"),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("drain",c),e.removeListener("error",d),e.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",m),n.removeListener("data",h),u=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}function a(){l("onend"),e.end()}r.endEmitted?process.nextTick(s):n.once("end",s),e.on("unpipe",o);var c=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,j(e))}}(n);e.on("drain",c);var u=!1;function h(t){l("ondata");var i=e.write(t);l("dest.write",i),!1===i&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==V(r.pipes,e))&&!u&&(l("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function d(t){l("onerror",t),m(),e.removeListener("error",d),0===i(e,"error")&&w(e,t)}function f(){e.removeListener("finish",p),m()}function p(){l("onfinish"),e.removeListener("close",f),m()}function m(){l("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,n){if("function"===typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",d),e.once("close",f),e.once("finish",p),e.emit("pipe",n),r.flowing||(l("pipe resume"),n.resume()),e},x.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=V(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},x.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,l("on readable",r.length,r.reading),r.length?N(this):r.reading||process.nextTick(D,this))),n},x.prototype.addListener=x.prototype.on,x.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(O,this),n},x.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(O,this),t},x.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(L,e,t))}(this,e)),e.paused=!1,this},x.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},x.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(l("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(l("wrapped data"),n.decoder&&(i=n.decoder.write(i)),!n.objectMode||null!==i&&void 0!==i)&&((n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause())))})),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<E.length;s++)e.on(E[s],this.emit.bind(this,E[s]));return this._read=function(t){l("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"===typeof Symbol&&(x.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=n(312)),h(this)}),Object.defineProperty(x.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(x.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(x.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),x._fromList=M,Object.defineProperty(x.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(x.from=function(e,t){return void 0===d&&(d=n(462)),d(x,e,t)})},13:(e,t,n)=>{"use strict";e.exports=u;var r=n(545).F,i=r.ERR_METHOD_NOT_IMPLEMENTED,s=r.ERR_MULTIPLE_CALLBACK,o=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,l=n(779);function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new s);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(t,n){d(e,t,n)}))}function d(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}n(329)(u,l),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,n){n(new i("_transform()"))},u.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}},1:(e,t,n)=>{"use strict";function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;e.exports=x,x.WritableState=S;var s={deprecate:n(390)},o=n(902),a=n(382).Buffer,l=("undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Uint8Array||function(){};var c,u=n(725),h=n(550).getHighWaterMark,d=n(545).F,f=d.ERR_INVALID_ARG_TYPE,p=d.ERR_METHOD_NOT_IMPLEMENTED,m=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_STREAM_CANNOT_PIPE,y=d.ERR_STREAM_DESTROYED,v=d.ERR_STREAM_NULL_VALUES,b=d.ERR_STREAM_WRITE_AFTER_END,_=d.ERR_UNKNOWN_ENCODING,w=u.errorOrDestroy;function E(){}function S(e,t,s){i=i||n(779),e=e||{},"boolean"!==typeof s&&(s=t instanceof i),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if("function"!==typeof i)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(process.nextTick(i,r),process.nextTick(R,e,t),e._writableState.errorEmitted=!0,w(e,r)):(i(r),e._writableState.errorEmitted=!0,w(e,r),R(e,t))}(e,n,r,t,i);else{var s=I(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||k(e,n),r?process.nextTick(T,e,n,s,i):T(e,n,s,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function x(e){var t=this instanceof(i=i||n(779));if(!t&&!c.call(x,this))return new x(e);this._writableState=new S(e,this,t),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),o.call(this)}function C(e,t,n,r,i,s,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function T(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),R(e,t)}function k(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,s=new Array(i),o=t.corkedRequestsFree;o.entry=n;for(var a=0,l=!0;n;)s[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;s.allBuffers=l,C(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,h=n.callback;if(C(e,t,!1,t.objectMode?1:c.length,c,u,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function N(e,t){e._final((function(n){t.pendingcb--,n&&w(e,n),t.prefinished=!0,e.emit("prefinish"),R(e,t)}))}function R(e,t){var n=I(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(N,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}n(329)(x,o),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===x&&(e&&e._writableState instanceof S)}})):c=function(e){return e instanceof this},x.prototype.pipe=function(){w(this,new g)},x.prototype.write=function(e,t,n){var r,i=this._writableState,s=!1,o=!i.objectMode&&(r=e,a.isBuffer(r)||r instanceof l);return o&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"===typeof t&&(n=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!==typeof n&&(n=E),i.ending?function(e,t){var n=new b;w(e,n),process.nextTick(t,n)}(this,n):(o||function(e,t,n,r){var i;return null===n?i=new v:"string"===typeof n||t.objectMode||(i=new f("chunk",["string","Buffer"],n)),!i||(w(e,i),process.nextTick(r,i),!1)}(this,i,e,n))&&(i.pendingcb++,s=function(e,t,n,r,i,s){if(!n){var o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=a.from(t,n));return t}(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var l=t.objectMode?1:r.length;t.length+=l;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else C(e,t,!1,l,r,i,s);return c}(this,i,o,e,t,n)),s},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||k(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,n){n(new p("_write()"))},x.prototype._writev=null,x.prototype.end=function(e,t,n){var r=this._writableState;return"function"===typeof e?(n=e,e=null,t=null):"function"===typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,R(e,t),n&&(t.finished?process.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=u.destroy,x.prototype._undestroy=u.undestroy,x.prototype._destroy=function(e,t){t(e)}},312:(e,t,n)=>{"use strict";var r;function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(227),o=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[o];if(null!==t){var n=e[d].read();null!==n&&(e[u]=null,e[o]=null,e[a]=null,t(f(n,!1)))}}function m(e){process.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(r={get stream(){return this[d]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise((function(t,n){process.nextTick((function(){e[l]?n(e[l]):t(f(void 0,!0))}))}));var n,r=this[u];if(r)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(f(void 0,!0)):t[h](n,r)}),r)}}(r,this));else{var i=this[d].read();if(null!==i)return Promise.resolve(f(i,!1));n=new Promise(this[h])}return this[u]=n,n}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[d].destroy(null,(function(e){e?n(e):t(f(void 0,!0))}))}))})),r),g);e.exports=function(e){var t,n=Object.create(y,(i(t={},d,{value:e,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,h,{value:function(e,t){var r=n[d].read();r?(n[u]=null,n[o]=null,n[a]=null,e(f(r,!1))):(n[o]=e,n[a]=t)},writable:!0}),t));return n[u]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[u]=null,n[o]=null,n[a]=null,t(e)),void(n[l]=e)}var r=n[o];null!==r&&(n[u]=null,n[o]=null,n[a]=null,r(f(void 0,!0))),n[c]=!0})),e.on("readable",m.bind(null,n)),n}},44:(e,t,n)=>{"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var l=n(382).Buffer,c=n(959).inspect,u=c&&c.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,r;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return l.alloc(0);for(var t,n,r,i=l.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=s.data,n=i,r=o,l.prototype.copy.call(t,n,r),o+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?r+=i:r+=i.slice(0,e),0===(e-=s)){s===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=l.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0===(e-=s)){s===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(s));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return c(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},725:e=>{"use strict";function t(e,t){r(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}e.exports={destroy:function(e,i){var s=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(r,this,e)):process.nextTick(r,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!i&&e?s._writableState?s._writableState.errorEmitted?process.nextTick(n,s):(s._writableState.errorEmitted=!0,process.nextTick(t,s,e)):process.nextTick(t,s,e):i?(process.nextTick(n,s),i(e)):process.nextTick(n,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}},227:(e,t,n)=>{"use strict";var r=n(545).F.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,s){if("function"===typeof n)return e(t,null,n);n||(n={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(s||i);var o=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,l=function(){t.writable||u()},c=t._writableState&&t._writableState.finished,u=function(){a=!1,c=!0,o||s.call(t)},h=t._readableState&&t._readableState.endEmitted,d=function(){o=!1,h=!0,a||s.call(t)},f=function(e){s.call(t,e)},p=function(){var e;return o&&!h?(t._readableState&&t._readableState.ended||(e=new r),s.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new r),s.call(t,e)):void 0},m=function(){t.req.on("finish",u)};return!function(e){return e.setHeader&&"function"===typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",l),t.on("close",l)):(t.on("complete",u),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",d),t.on("finish",u),!1!==n.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",u),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("end",d),t.removeListener("error",f),t.removeListener("close",p)}}},462:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},537:(e,t,n)=>{"use strict";var r;var i=n(545).F,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function l(e){e()}function c(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var u,h=function(e){return e.length?"function"!==typeof e[e.length-1]?a:e.pop():a}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new s("streams");var d=t.map((function(e,i){var s=i<t.length-1;return function(e,t,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var a=!1;e.on("close",(function(){a=!0})),void 0===r&&(r=n(227)),r(e,{readable:t,writable:i},(function(e){if(e)return s(e);a=!0,s()}));var l=!1;return function(t){if(!a&&!l)return l=!0,function(e){return e.setHeader&&"function"===typeof e.abort}(e)?e.abort():"function"===typeof e.destroy?e.destroy():void s(t||new o("pipe"))}}(e,s,i>0,(function(e){u||(u=e),e&&d.forEach(l),s||(d.forEach(l),h(u))}))}));return t.reduce(c)}},550:(e,t,n)=>{"use strict";var r=n(545).F.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var s=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new r(i?n:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}},902:(e,t,n)=>{e.exports=n(284).EventEmitter},350:(e,t,n)=>{(t=e.exports=n(534)).Stream=t,t.Readable=t,t.Writable=n(1),t.Duplex=n(779),t.Transform=n(13),t.PassThrough=n(559),t.finished=n(227),t.pipeline=n(537)},966:(e,t,n)=>{var r=n(382),i=r.Buffer;function s(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(s(r,t),t.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"===typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},996:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,_(e),!m)if(null!==r(c))m=!0,O(E);else{var t=r(u);null!==t&&D(w,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var s=f;try{for(_(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),_(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&D(w,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,x=!1,C=null,T=-1,k=5,I=-1;function N(){return!(t.unstable_now()-I<k)}function R(){if(null!==C){var e=t.unstable_now();I=e;var n=!0;try{n=C(!0,e)}finally{n?S():(x=!1,C=null)}}else x=!1}if("function"===typeof b)S=function(){b(R)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=R,S=function(){P.postMessage(null)}}else S=function(){y(R,0)};function O(e){C=e,x||(x=!0,S())}function D(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,D(w,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,O(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},234:(e,t,n)=>{"use strict";e.exports=n(996)},593:(e,t,n)=>{const r=n(522)("simple-peer"),i=n(919),s=n(838),o=n(350),a=n(275),l=n(823),{Buffer:c}=n(382),u=65536;function h(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}class d extends o.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||s(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||d.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},d.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"===typeof e.wrtc?e.wrtc:i(),!this._wrtc)throw"undefined"===typeof window?l(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):l(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){return void this.destroy(l(t,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"===typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},"object"===typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch((e=>{this.destroy(l(e,"ERR_PC_PEER_IDENTITY"))})),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach((e=>{this.addStream(e)})),this._pc.ontrack=e=>{this._onTrack(e)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"===typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then((()=>{this.destroyed||(this._pendingCandidates.forEach((e=>{this._addIceCandidate(e)})),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())})).catch((e=>{this.destroy(l(e,"ERR_SET_REMOTE_DESCRIPTION"))})),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(l(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch((e=>{var n;!t.address||t.address.endsWith(".local")?(n="Ignoring unsupported ICE candidate.",console.warn(n)):this.destroy(l(e,"ERR_ADD_ICE_CANDIDATE"))}))}send(e){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(n){this.destroy(l(n,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach((t=>{this.addTrack(t,e)}))}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw l(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(e)||new Map;let r=n.get(t);if(r)throw r.removed?l(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):l(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");r=this._pc.addTrack(e,t),n.set(t,r),this._senderMap.set(e,n),this._needsNegotiation()}replaceTrack(e,t,n){if(this.destroying)return;if(this.destroyed)throw l(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const r=this._senderMap.get(e),i=r?r.get(n):null;if(!i)throw l(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,r),null!=i.replaceTrack?i.replaceTrack(t):this.destroy(l(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw l(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(e),r=n?n.get(t):null;if(!r)throw l(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(i){"NS_ERROR_UNEXPECTED"===i.name?this._sendersAwaitingStable.push(r):this.destroy(l(i,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach((t=>{this.removeTrack(t,e)}))}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,a((()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1})))}negotiate(){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout((()=>{this._createOffer()}),0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,(()=>{}))}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),a((()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()})))}_setupData(e){if(!e.channel)return this.destroy(l(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"===typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=u),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{const t=e.error instanceof Error?e.error:new Error(`Datachannel error: ${e.message} ${e.filename}:${e.lineno}:${e.colno}`);this.destroy(l(t,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval((()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1}),5e3)}_read(){}_write(e,t,n){if(this.destroyed)return n(l(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(r){return this.destroy(l(r,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>u?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout((()=>this.destroy()),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout((()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))}),this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then((e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=h(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(this.destroyed)return;const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})};this._pc.setLocalDescription(e).then((()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))})).catch((e=>{this.destroy(l(e,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((e=>{this.destroy(l(e,"ERR_CREATE_OFFER"))}))}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach((e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))}))}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then((e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=h(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(this.destroyed)return;const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()};this._pc.setLocalDescription(e).then((()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))})).catch((e=>{this.destroy(l(e,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((e=>{this.destroy(l(e,"ERR_CREATE_ANSWER"))}))}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(l(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),"connected"!==e&&"completed"!==e||(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(l(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(l(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach((t=>{Object.assign(e,t)})),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then((n=>{const r=[];n.forEach((e=>{r.push(t(e))})),e(null,r)}),(t=>e(t))):this._pc.getStats.length>0?this._pc.getStats((n=>{if(this.destroyed)return;const r=[];n.result().forEach((e=>{const n={};e.names().forEach((t=>{n[t]=e.stat(t)})),n.id=e.id,n.type=e.type,n.timestamp=e.timestamp,r.push(t(n))})),e(null,r)}),(t=>e(t))):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats(((t,n)=>{if(this.destroyed)return;t&&(n=[]);const r={},i={},s={};let o=!1;n.forEach((e=>{"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(r[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(i[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(s[e.id]=e)}));const a=e=>{o=!0;let t=i[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=Number(t.port)):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=Number(t.portNumber)):"string"===typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=Number(t[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let n=r[e.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=Number(n.port)):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=Number(n.portNumber)):"string"===typeof e.googRemoteAddress&&(n=e.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=Number(n[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach((e=>{"transport"===e.type&&e.selectedCandidatePairId&&a(s[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&a(e)})),o||Object.keys(s).length&&!Object.keys(i).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(l(t,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const e=this._cb;this._cb=null,e(null)}"number"!==typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval((()=>this._onInterval()),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)}))};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>u||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0})),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=c.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach((t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some((e=>e.id===t.id))||(this._remoteStreams.push(t),a((()=>{this._debug("on stream"),this.emit("stream",t)})))}))}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],r.apply(null,e)}}d.WEBRTC_SUPPORT=!!i(),d.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},d.channelConfig={},e.exports=d},781:(e,t,n)=>{e.exports=i;var r=n(284).EventEmitter;function i(){r.call(this)}n(329)(i,r),i.Readable=n(534),i.Writable=n(1),i.Duplex=n(779),i.Transform=n(13),i.PassThrough=n(559),i.finished=n(227),i.pipeline=n(537),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function s(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",s),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",l));var o=!1;function a(){o||(o=!0,e.end())}function l(){o||(o=!0,"function"===typeof e.destroy&&e.destroy())}function c(e){if(u(),0===r.listenerCount(this,"error"))throw e}function u(){n.removeListener("data",i),e.removeListener("drain",s),n.removeListener("end",a),n.removeListener("close",l),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("error",c),e.on("error",c),n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e}},694:(e,t,n)=>{"use strict";var r=n(966).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!==typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=h,t=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.I=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},s.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(i=o(t[r]),i>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(i=o(t[r]),i>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},390:(e,t,n)=>{function r(e){try{if(!n.g.localStorage)return!1}catch(r){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},959:()=>{},457:()=>{}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>fk,hasStandardBrowserEnv:()=>mk,hasStandardBrowserWebWorkerEnv:()=>gk,navigator:()=>pk,origin:()=>yk});var t=n(43),r=n.t(t,2),i=n(391);const s=!1,o=!1,a="${JSCORE_VERSION}",l=function(e,t){if(!e)throw c(t)},c=function(e){return new Error("Firebase Database ("+a+") INTERNAL ASSERT FAILED: "+e)},u=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(u(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new d;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class d extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f=function(e){const t=u(e);return h.encodeByteArray(t,!0)},p=function(e){return f(e).replace(/\./g,"")},m=function(e){try{return h.decodeString(e,!0)}catch(Fx){console.error("base64Decode failed: ",Fx)}return null};function g(e){return y(void 0,e)}function y(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=y(e[n],t[n]));return e}const v=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,b=()=>{try{return v()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAWLn1bc_sregpLCEw2SDYgm3_UNE8Y-SA",REACT_APP_FIREBASE_APP_ID:"1:683690908711:web:832832fefb01be07eb8202",REACT_APP_FIREBASE_AUTH_DOMAIN:"milan-400c7.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-RWWM318TXZ",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"683690908711",REACT_APP_FIREBASE_PROJECT_ID:"milan-400c7",REACT_APP_FIREBASE_STORAGE_BUCKET:"milan-400c7.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Fx){return}const t=e&&m(e[1]);return t&&JSON.parse(t)})()}catch(Fx){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Fx}`)}},_=e=>{var t,n;return null===(n=null===(t=b())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},w=e=>{const t=_(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},E=()=>{var e;return null===(e=b())||void 0===e?void 0:e.config},S=e=>{var t;return null===(t=b())||void 0===t?void 0:t[`_${e}`]};class x{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function C(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[p(JSON.stringify({alg:"none",type:"JWT"})),p(JSON.stringify(s)),""].join(".")}function T(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function k(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(T())}function I(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function N(){return!0===s||!0===o}function R(){return!function(){var e;const t=null===(e=b())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Fx){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A(){try{return"object"===typeof indexedDB}catch(Fx){return!1}}class P extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,P.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,O.prototype.create)}}class O{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(D,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new P(n,s,t)}}const D=/\{\$([^}]+)}/g;function L(e){return JSON.parse(e)}function j(e){return JSON.stringify(e)}const M=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=L(m(s[0])||""),n=L(m(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(Fx){}return{header:t,claims:n,data:r,signature:i}};function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function V(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function B(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function z(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(q(n)&&q(s)){if(!z(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function q(e){return null!==e&&"object"===typeof e}function H(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function $(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function W(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class K{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class G{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Y),void 0===r.error&&(r.error=Y),void 0===r.complete&&(r.complete=Y);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Fx){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Fx){"undefined"!==typeof console&&console.error&&console.error(Fx)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Y(){}function Q(e,t){return`${e} failed: ${t} argument `}const J=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function X(e){return e&&e._delegate?e._delegate:e}class Z{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ee="[DEFAULT]";class te{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new x;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Fx){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Fx){if(r)return null;throw Fx}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ee})}catch(Fx){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Fx){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ne(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee;return this.component?this.component.multipleInstances?e:ee:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function ne(e){return e===ee?void 0:e}class re{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new te(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ie=[];var se;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(se||(se={}));const oe={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},ae=se.INFO,le={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},ce=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=le[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class ue{constructor(e){this.name=e,this._logLevel=ae,this._logHandler=ce,this._userLogHandler=null,ie.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?oe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...t),this._logHandler(this,se.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...t),this._logHandler(this,se.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,se.INFO,...t),this._logHandler(this,se.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,se.WARN,...t),this._logHandler(this,se.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,se.ERROR,...t),this._logHandler(this,se.ERROR,...t)}}let he,de;const fe=new WeakMap,pe=new WeakMap,me=new WeakMap,ge=new WeakMap,ye=new WeakMap;let ve={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return pe.get(e);if("objectStoreNames"===t)return e.objectStoreNames||me.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return we(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function be(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(de||(de=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ee(this),n),we(fe.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return we(e.apply(Ee(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Ee(this),t,...r);return me.set(s,t.sort?t.sort():[t]),we(s)}}function _e(e){return"function"===typeof e?be(e):(e instanceof IDBTransaction&&function(e){if(pe.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));pe.set(e,t)}(e),t=e,(he||(he=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,ve):e);var t}function we(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(we(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&fe.set(t,e)})).catch((()=>{})),ye.set(t,e),t}(e);if(ge.has(e))return ge.get(e);const t=_e(e);return t!==e&&(ge.set(e,t),ye.set(t,e)),t}const Ee=e=>ye.get(e);const Se=["get","getKey","getAll","getAllKeys","count"],xe=["put","add","delete","clear"],Ce=new Map;function Te(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ce.get(t))return Ce.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=xe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Se.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Ce.set(t,s),s}ve=(e=>({...e,get:(t,n,r)=>Te(t,n)||e.get(t,n,r),has:(t,n)=>!!Te(t,n)||e.has(t,n)}))(ve);class ke{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Ie="@firebase/app",Ne="0.10.15",Re=new ue("@firebase/app"),Ae="@firebase/app-compat",Pe="@firebase/analytics-compat",Oe="@firebase/analytics",De="@firebase/app-check-compat",Le="@firebase/app-check",je="@firebase/auth",Me="@firebase/auth-compat",Fe="@firebase/database",Ue="@firebase/data-connect",Ve="@firebase/database-compat",Be="@firebase/functions",ze="@firebase/functions-compat",qe="@firebase/installations",He="@firebase/installations-compat",$e="@firebase/messaging",We="@firebase/messaging-compat",Ke="@firebase/performance",Ge="@firebase/performance-compat",Ye="@firebase/remote-config",Qe="@firebase/remote-config-compat",Je="@firebase/storage",Xe="@firebase/storage-compat",Ze="@firebase/firestore",et="@firebase/vertexai",tt="@firebase/firestore-compat",nt="firebase",rt="[DEFAULT]",it={[Ie]:"fire-core",[Ae]:"fire-core-compat",[Oe]:"fire-analytics",[Pe]:"fire-analytics-compat",[Le]:"fire-app-check",[De]:"fire-app-check-compat",[je]:"fire-auth",[Me]:"fire-auth-compat",[Fe]:"fire-rtdb",[Ue]:"fire-data-connect",[Ve]:"fire-rtdb-compat",[Be]:"fire-fn",[ze]:"fire-fn-compat",[qe]:"fire-iid",[He]:"fire-iid-compat",[$e]:"fire-fcm",[We]:"fire-fcm-compat",[Ke]:"fire-perf",[Ge]:"fire-perf-compat",[Ye]:"fire-rc",[Qe]:"fire-rc-compat",[Je]:"fire-gcs",[Xe]:"fire-gcs-compat",[Ze]:"fire-fst",[tt]:"fire-fst-compat",[et]:"fire-vertex","fire-js":"fire-js",[nt]:"fire-js-all"},st=new Map,ot=new Map,at=new Map;function lt(e,t){try{e.container.addComponent(t)}catch(Fx){Re.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,Fx)}}function ct(e){const t=e.name;if(at.has(t))return Re.debug(`There were multiple attempts to register component ${t}.`),!1;at.set(t,e);for(const n of st.values())lt(n,e);for(const n of ot.values())lt(n,e);return!0}function ut(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ht(e){return void 0!==e.settings}const dt=new O("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ft{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Z("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dt.create("app-deleted",{appName:this._name})}}const pt="11.0.1";function mt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:rt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw dt.create("bad-app-name",{appName:String(i)});if(n||(n=E()),!n)throw dt.create("no-options");const s=st.get(i);if(s){if(z(n,s.options)&&z(r,s.config))return s;throw dt.create("duplicate-app",{appName:i})}const o=new re(i);for(const l of at.values())o.addComponent(l);const a=new ft(n,r,o);return st.set(i,a),a}function gt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt;const t=st.get(e);if(!t&&e===rt&&E())return mt();if(!t)throw dt.create("no-app",{appName:e});return t}function yt(e,t,n){var r;let i=null!==(r=it[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Re.warn(e.join(" "))}ct(new Z(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const vt="firebase-heartbeat-store";let bt=null;function _t(){return bt||(bt=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=we(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(we(o.result),e.oldVersion,e.newVersion,we(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(vt)}catch(Fx){console.warn(Fx)}}}).catch((e=>{throw dt.create("idb-open",{originalErrorMessage:e.message})}))),bt}async function wt(e,t){try{const n=(await _t()).transaction(vt,"readwrite"),r=n.objectStore(vt);await r.put(t,Et(e)),await n.done}catch(Fx){if(Fx instanceof P)Re.warn(Fx.message);else{const t=dt.create("idb-set",{originalErrorMessage:null===Fx||void 0===Fx?void 0:Fx.message});Re.warn(t.message)}}}function Et(e){return`${e.name}!${e.options.appId}`}class St{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ct(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xt();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(Fx){Re.warn(Fx)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=xt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Tt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Tt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=p(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(Fx){return Re.warn(Fx),""}}}function xt(){return(new Date).toISOString().substring(0,10)}class Ct{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!A()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Wm){t(Wm)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await _t()).transaction(vt),n=await t.objectStore(vt).get(Et(e));return await t.done,n}catch(Fx){if(Fx instanceof P)Re.warn(Fx.message);else{const t=dt.create("idb-get",{originalErrorMessage:null===Fx||void 0===Fx?void 0:Fx.message});Re.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Tt(e){return p(JSON.stringify({version:2,heartbeats:e})).length}var kt;kt="",ct(new Z("platform-logger",(e=>new ke(e)),"PRIVATE")),ct(new Z("heartbeat",(e=>new St(e)),"PRIVATE")),yt(Ie,Ne,kt),yt(Ie,Ne,"esm2017"),yt("fire-js","");yt("firebase","11.0.1","app");function It(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Nt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Rt=Nt,At=new O("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pt=new ue("@firebase/auth");function Ot(e){if(Pt.logLevel<=se.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Pt.error(`Auth (${pt}): ${e}`,...n)}}function Dt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ft(e,...n)}function Lt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ft(e,...n)}function jt(e,t,n){const r=Object.assign(Object.assign({},Rt()),{[t]:n});return new O("auth","Firebase",r).create(t,{appName:e.name})}function Mt(e){return jt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ft(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return At.create(e,...n)}function Ut(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ft(t,...r)}}function Vt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ot(t),new Error(t)}function Bt(e,t){e||Vt(t)}function zt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function qt(){return"http:"===Ht()||"https:"===Ht()}function Ht(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function $t(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(qt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Wt{constructor(e,t){this.shortDelay=e,this.longDelay=t,Bt(t>e,"Short delay should be less than long delay!"),this.isMobile=k()||I()}get(){return $t()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Kt(e,t){Bt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Gt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Vt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Vt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Vt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Qt=new Wt(3e4,6e4);function Jt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Xt(e,t,n,r){return Zt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=H(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Gt.fetch()(tn(e,e.config.apiHost,n,o),l)}))}async function Zt(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Yt),t);try{const t=new rn(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw sn(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw sn(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw sn(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw sn(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw jt(e,a,o);Dt(e,a)}}catch(Fx){if(Fx instanceof P)throw Fx;Dt(e,"network-request-failed",{message:String(Fx)})}}async function en(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Xt(e,t,n,r,i);return"mfaPendingCredential"in s&&Dt(e,"multi-factor-auth-required",{_serverResponse:s}),s}function tn(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Kt(e.config,i):`${e.config.apiScheme}://${i}`}function nn(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rn{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Lt(this.auth,"network-request-failed"))),Qt.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function sn(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Lt(e,t,r);return i.customData._tokenResponse=n,i}function on(e){return void 0!==e&&void 0!==e.enterprise}class an{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return nn(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ln(e,t){return Xt(e,"GET","/v2/recaptchaConfig",Jt(e,t))}async function cn(e,t){return Xt(e,"POST","/v1/accounts:lookup",t)}function un(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Fx){}}function hn(e){return 1e3*Number(e)}function dn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ot("JWT malformed, contained fewer than 3 sections"),null;try{const e=m(n);return e?JSON.parse(e):(Ot("Failed to decode base64 JWT payload"),null)}catch(Fx){return Ot("Caught error parsing JWT payload as JSON",null===Fx||void 0===Fx?void 0:Fx.toString()),null}}function fn(e){const t=dn(e);return Ut(t,"internal-error"),Ut("undefined"!==typeof t.exp,"internal-error"),Ut("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function pn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Fx){throw Fx instanceof P&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(Fx)&&e.auth.currentUser===e&&await e.auth.signOut(),Fx}}class mn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Fx){return void("auth/network-request-failed"===(null===Fx||void 0===Fx?void 0:Fx.code)&&this.schedule(!0))}this.schedule()}}class gn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=un(this.lastLoginAt),this.creationTime=un(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function yn(e){var t;const n=e.auth,r=await e.getIdToken(),i=await pn(e,cn(n,{idToken:r}));Ut(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?vn(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new gn(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function vn(e){return e.map((e=>{var{providerId:t}=e,n=It(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class bn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ut(e.idToken,"internal-error"),Ut("undefined"!==typeof e.idToken,"internal-error"),Ut("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):fn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ut(0!==e.length,"internal-error");const t=fn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ut(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Zt(e,{},(async()=>{const n=H({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=tn(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Gt.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new bn;return n&&(Ut("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Ut("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Ut("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bn,this.toJSON())}_performRefresh(){return Vt("not implemented")}}function _n(e,t){Ut("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class wn{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=It(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new gn(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await pn(this,this.stsTokenManager.getToken(this.auth,e));return Ut(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=X(e),r=await n.getIdToken(t),i=dn(r);Ut(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:un(hn(i.auth_time)),issuedAtTime:un(hn(i.iat)),expirationTime:un(hn(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=X(e);await yn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ut(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await yn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ht(this.auth.app))return Promise.reject(Mt(this.auth));const e=await this.getIdToken();return await pn(this,async function(e,t){return Xt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:_,providerData:w,stsTokenManager:E}=t;Ut(v&&E,e,"internal-error");const S=bn.fromJSON(this.name,E);Ut("string"===typeof v,e,"internal-error"),_n(u,e.name),_n(h,e.name),Ut("boolean"===typeof b,e,"internal-error"),Ut("boolean"===typeof _,e,"internal-error"),_n(d,e.name),_n(f,e.name),_n(p,e.name),_n(m,e.name),_n(g,e.name),_n(y,e.name);const x=new wn({uid:v,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(x.providerData=w.map((e=>Object.assign({},e)))),m&&(x._redirectEventId=m),x}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new bn;r.updateFromServerResponse(t);const i=new wn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await yn(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ut(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?vn(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new bn;o.updateFromIdToken(n);const a=new wn({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new gn(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const En=new Map;function Sn(e){Bt(e instanceof Function,"Expected a class definition");let t=En.get(e);return t?(Bt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,En.set(e,t),t)}class xn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xn.type="NONE";const Cn=xn;function Tn(e,t,n){return`firebase:${e}:${t}:${n}`}class kn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Tn(this.userKey,r.apiKey,i),this.fullPersistenceKey=Tn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new kn(Sn(Cn),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Sn(Cn);const s=Tn(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=wn._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new kn(i,e,n)):new kn(i,e,n)}}function In(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Pn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Nn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Dn(t))return"Blackberry";if(Ln(t))return"Webos";if(Rn(t))return"Safari";if((t.includes("chrome/")||An(t))&&!t.includes("edge/"))return"Chrome";if(On(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/firefox\//i.test(e)}function Rn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function An(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/crios\//i.test(e)}function Pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/iemobile/i.test(e)}function On(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/android/i.test(e)}function Dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/blackberry/i.test(e)}function Ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/webos/i.test(e)}function jn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Mn(){return function(){const e=T();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return jn(e)||On(e)||Ln(e)||Dn(e)||/windows phone/i.test(e)||Pn(e)}function Un(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=In(T());break;case"Worker":t=`${In(T())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${pt}/${r}`}class Vn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(Fx){r(Fx)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Fx){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Fx||void 0===Fx?void 0:Fx.message})}}}class Bn{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class zn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hn(this),this.idTokenSubscription=new Hn(this),this.beforeStateQueue=new Vn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=At,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sn(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await kn.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Fx){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await cn(this,{idToken:e}),n=await wn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ht(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(Fx){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(Fx)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Fx){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yn(e)}catch(Fx){if("auth/network-request-failed"!==(null===Fx||void 0===Fx?void 0:Fx.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ht(this.app))return Promise.reject(Mt(this));const t=e?X(e):null;return t&&Ut(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ut(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return ht(this.app)?Promise.reject(Mt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ht(this.app)?Promise.reject(Mt(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Sn(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Xt(e,"GET","/v2/passwordPolicy",Jt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Bn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new O("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Xt(e,"POST","/v2/accounts:revokeToken",Jt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sn(e)||this._popupRedirectResolver;Ut(t,this,"argument-error"),this.redirectPersistenceManager=await kn.create(this,[Sn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ut(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Un(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Pt.logLevel<=se.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Pt.warn(`Auth (${pt}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function qn(e){return X(e)}class Hn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new G(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let $n={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Wn(e){return $n.loadJS(e)}function Kn(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Gn{constructor(){this.enterprise=new Yn}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Yn{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Qn="NO_RECAPTCHA";class Jn{constructor(e){this.type="recaptcha-enterprise",this.auth=qn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;on(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Qn)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Gn).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ln(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new an(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&on(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=$n.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Wn(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Xn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Jn(e);let o;if(i)o=Qn;else try{o=await s.verify(n)}catch(Wm){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Zn(e,t,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Xn(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Xn(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await Xn(e,t,n);return r(e,i).catch((async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await Xn(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await Xn(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function er(e){const t=qn(e),n=await ln(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new an(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Jn(t).verify()}}function tr(e,t,n){const r=qn(e);Ut(r._canInitEmulator,r,"emulator-config-failed"),Ut(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=nr(t),{host:o,port:a}=function(e){const t=nr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:rr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:rr(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function nr(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function rr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ir{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vt("not implemented")}_getIdTokenResponse(e){return Vt("not implemented")}_linkToIdToken(e,t){return Vt("not implemented")}_getReauthenticationResolver(e){return Vt("not implemented")}}async function sr(e,t){return Xt(e,"POST","/v1/accounts:signUp",t)}async function or(e,t){return en(e,"POST","/v1/accounts:signInWithPassword",Jt(e,t))}async function ar(e,t){return Xt(e,"POST","/v1/accounts:sendOobCode",Jt(e,t))}async function lr(e,t){return ar(e,t)}class cr extends ir{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new cr(e,t,"password")}static _fromEmailAndCode(e,t){return new cr(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Zn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",or,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return en(e,"POST","/v1/accounts:signInWithEmailLink",Jt(e,t))}(e,{email:this._email,oobCode:this._password});default:Dt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Zn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sr,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return en(e,"POST","/v1/accounts:signInWithEmailLink",Jt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Dt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ur(e,t){return en(e,"POST","/v1/accounts:signInWithIdp",Jt(e,t))}class hr extends ir{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new hr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=It(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new hr(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return ur(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ur(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ur(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=H(t)}return e}}async function dr(e,t){return Xt(e,"POST","/v1/accounts:sendVerificationCode",Jt(e,t))}const fr={USER_NOT_FOUND:"user-not-found"};class pr extends ir{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new pr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new pr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return en(e,"POST","/v1/accounts:signInWithPhoneNumber",Jt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await en(e,"POST","/v1/accounts:signInWithPhoneNumber",Jt(e,t));if(n.temporaryProof)throw sn(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return en(e,"POST","/v1/accounts:signInWithPhoneNumber",Jt(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),fr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new pr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class mr{constructor(e){var t,n,r,i,s,o;const a=$(W(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Ut(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=$(W(e)).link,n=t?$(W(t)).deep_link_id:null,r=$(W(e)).deep_link_id;return(r?$(W(r)).link:null)||r||n||t||e}(e);try{return new mr(t)}catch(n){return null}}}class gr{constructor(){this.providerId=gr.PROVIDER_ID}static credential(e,t){return cr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=mr.parseLink(t);return Ut(n,"argument-error"),cr._fromEmailAndCode(e,n.code,n.tenantId)}}gr.PROVIDER_ID="password",gr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",gr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class yr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vr extends yr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class br extends vr{constructor(){super("facebook.com")}static credential(e){return hr._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return br.credential(t.oauthAccessToken)}catch(n){return null}}}br.FACEBOOK_SIGN_IN_METHOD="facebook.com",br.PROVIDER_ID="facebook.com";class _r extends vr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return hr._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return _r.credential(n,r)}catch(i){return null}}}_r.GOOGLE_SIGN_IN_METHOD="google.com",_r.PROVIDER_ID="google.com";class wr extends vr{constructor(){super("github.com")}static credential(e){return hr._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return wr.credential(t.oauthAccessToken)}catch(n){return null}}}wr.GITHUB_SIGN_IN_METHOD="github.com",wr.PROVIDER_ID="github.com";class Er extends vr{constructor(){super("twitter.com")}static credential(e,t){return hr._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Er.credential(n,r)}catch(i){return null}}}async function Sr(e,t){return en(e,"POST","/v1/accounts:signUp",Jt(e,t))}Er.TWITTER_SIGN_IN_METHOD="twitter.com",Er.PROVIDER_ID="twitter.com";class xr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await wn._fromIdTokenResponse(e,n,r),s=Cr(n);return new xr({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Cr(n);return new xr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Cr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Tr extends P{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Tr.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Tr(e,t,n,r)}}function kr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Tr._fromErrorAndOperation(e,n,t,r);throw n}))}async function Ir(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await pn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return xr._forOperation(e,"link",r)}async function Nr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(ht(r.app))return Promise.reject(Mt(r));const i="reauthenticate";try{const s=await pn(e,kr(r,i,t,e),n);Ut(s.idToken,r,"internal-error");const o=dn(s.idToken);Ut(o,r,"internal-error");const{sub:a}=o;return Ut(e.uid===a,r,"user-mismatch"),xr._forOperation(e,i,s)}catch(Fx){throw"auth/user-not-found"===(null===Fx||void 0===Fx?void 0:Fx.code)&&Dt(r,"user-mismatch"),Fx}}async function Rr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ht(e.app))return Promise.reject(Mt(e));const r="signIn",i=await kr(e,r,t),s=await xr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Ar(e,t){return Rr(qn(e),t)}function Pr(e,t,n){var r;Ut((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Ut("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ut(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Ut(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Or(e){const t=qn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Dr(e,t){const n=X(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Pr(n.auth,r,t);const{email:i}=await async function(e,t){return ar(e,t)}(n.auth,r);i!==e.email&&await e.reload()}function Lr(e,t){return Xt(e,"POST","/v2/accounts/mfaEnrollment:start",Jt(e,t))}new WeakMap;const jr="__sak";class Mr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jr,"1"),this.storage.removeItem(jr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Fr extends Mr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Fn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Mn()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fr.type="LOCAL";const Ur=Fr;class Vr extends Mr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Vr.type="SESSION";const Br=Vr;class zr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new zr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}zr.receivers=[];class Hr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=qr("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function $r(){return window}function Wr(){return"undefined"!==typeof $r().WorkerGlobalScope&&"function"===typeof $r().importScripts}const Kr="firebaseLocalStorageDb",Gr="firebaseLocalStorage",Yr="fbase_key";class Qr{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Jr(e,t){return e.transaction([Gr],t?"readwrite":"readonly").objectStore(Gr)}function Xr(){const e=indexedDB.open(Kr,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Gr,{keyPath:Yr})}catch(Fx){n(Fx)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Gr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Kr);return new Qr(e).toPromise()}(),t(await Xr()))}))}))}async function Zr(e,t,n){const r=Jr(e,!0).put({[Yr]:t,value:n});return new Qr(r).toPromise()}function ei(e,t){const n=Jr(e,!0).delete(t);return new Qr(n).toPromise()}class ti{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Xr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Fx){if(t++>3)throw Fx;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Wr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zr._getInstance(Wr()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Hr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xr();return await Zr(e,jr,"1"),await ei(e,jr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Zr(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Jr(e,!1).get(t),r=await new Qr(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>ei(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Jr(e,!1).getAll();return new Qr(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ti.type="LOCAL";const ni=ti;function ri(e,t){return Xt(e,"POST","/v2/accounts/mfaSignIn:start",Jt(e,t))}Kn("rcb"),new Wt(3e4,6e4);const ii="recaptcha";async function si(e,t,n){var r;if(!e._getRecaptchaConfig())try{await er(e)}catch(Wm){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Ut("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Zn(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Qn){Ut((null===n||void 0===n?void 0:n.type)===ii,e,"argument-error");return Lr(e,await oi(e,t,n))}return Lr(e,t)}),"PHONE_PROVIDER"),o=await s.catch((e=>Promise.reject(e)));return o.phoneSessionInfo.sessionInfo}{Ut("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Ut(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Zn(e,o,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Qn){Ut((null===n||void 0===n?void 0:n.type)===ii,e,"argument-error");return ri(e,await oi(e,t,n))}return ri(e,t)}),"PHONE_PROVIDER"),l=await a.catch((e=>Promise.reject(e)));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Zn(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===Qn){Ut((null===n||void 0===n?void 0:n.type)===ii,e,"argument-error");return dr(e,await oi(e,t,n))}return dr(e,t)}),"PHONE_PROVIDER"),s=await r.catch((e=>Promise.reject(e)));return s.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function oi(e,t,n){Ut(n.type===ii,e,"argument-error");const r=await n.verify();Ut("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class ai{constructor(e){this.providerId=ai.PROVIDER_ID,this.auth=qn(e)}verifyPhoneNumber(e,t){return si(this.auth,e,X(t))}static credential(e,t){return pr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ai.credentialFromTaggedObject(t)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?pr._fromTokenResponse(n,r):null}}function li(e,t){return t?Sn(t):(Ut(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ai.PROVIDER_ID="phone",ai.PHONE_SIGN_IN_METHOD="phone";class ci extends ir{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ur(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ur(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ur(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ui(e){return Rr(e.auth,new ci(e),e.bypassAuthState)}function hi(e){const{auth:t,user:n}=e;return Ut(n,t,"internal-error"),Nr(n,new ci(e),e.bypassAuthState)}async function di(e){const{auth:t,user:n}=e;return Ut(n,t,"internal-error"),Ir(n,new ci(e),e.bypassAuthState)}class fi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Fx){this.reject(Fx)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(Fx){this.reject(Fx)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ui;case"linkViaPopup":case"linkViaRedirect":return di;case"reauthViaPopup":case"reauthViaRedirect":return hi;default:Dt(this.auth,"internal-error")}}resolve(e){Bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pi=new Wt(2e3,1e4);class mi extends fi{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,mi.currentPopupAction&&mi.currentPopupAction.cancel(),mi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ut(e,this.auth,"internal-error"),e}async onExecution(){Bt(1===this.filter.length,"Popup operations only handle one event");const e=qr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Lt(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Lt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Lt(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,pi.get())};e()}}mi.currentPopupAction=null;const gi=new Map;class yi extends fi{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=gi.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=_i(t),r=bi(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Fx){e=()=>Promise.reject(Fx)}gi.set(this.auth._key(),e)}return this.bypassAuthState||gi.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function vi(e,t){gi.set(e._key(),t)}function bi(e){return Sn(e._redirectPersistence)}function _i(e){return Tn("pendingRedirect",e.config.apiKey,e.name)}async function wi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ht(e.app))return Promise.reject(Mt(e));const r=qn(e),i=li(r,t),s=new yi(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Ei{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xi(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!xi(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Lt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Si(e))}saveEventToCache(e){this.cachedEventUids.add(Si(e)),this.lastProcessedEventTime=Date.now()}}function Si(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function xi(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Ci=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ti=/^https?/;async function ki(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Xt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Ii(r))return}catch(n){}Dt(e,"unauthorized-domain")}function Ii(e){const t=zt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ti.test(n))return!1;if(Ci.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ni=new Wt(3e4,6e4);function Ri(){const e=$r().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ai(e){return new Promise(((t,n)=>{var r,i,s;function o(){Ri(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ri(),n(Lt(e,"network-request-failed"))},timeout:Ni.get()})}if(null===(i=null===(r=$r().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=$r().gapi)||void 0===s?void 0:s.load)){const t=Kn("iframefcb");return $r()[t]=()=>{gapi.load?o():n(Lt(e,"network-request-failed"))},Wn(`${$n.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw Pi=null,e}))}let Pi=null;const Oi=new Wt(5e3,15e3),Di={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Li=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ji(e){const t=e.config;Ut(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Kt(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:pt},i=Li.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${H(r).slice(1)}`}async function Mi(e){const t=await function(e){return Pi=Pi||Ai(e),Pi}(e),n=$r().gapi;return Ut(n,e,"internal-error"),t.open({where:document.body,url:ji(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Di,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Lt(e,"network-request-failed"),s=$r().setTimeout((()=>{r(i)}),Oi.get());function o(){$r().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const Fi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ui{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Fx){}}}function Vi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Fi),{width:r.toString(),height:i.toString(),top:s,left:o}),c=T().toLowerCase();n&&(a=An(c)?"_blank":n),Nn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return jn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Ui(null);const h=window.open(t||"",a,u);Ut(h,e,"popup-blocked");try{h.focus()}catch(Fx){}return new Ui(h)}const Bi="__/auth/handler",zi="emulator/auth/handler",qi=encodeURIComponent("fac");async function Hi(e,t,n,r,i,s){Ut(e.config.authDomain,e,"auth-domain-config-required"),Ut(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:pt,eventId:i};if(t instanceof yr){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",V(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof vr){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${qi}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Bi}`;return Kt(t,zi)}(e)}?${H(a).slice(1)}${c}`}const $i="webStorageSupport";const Wi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Br,this._completeRedirectFn=wi,this._overrideRedirectResult=vi}async _openPopup(e,t,n,r){var i;Bt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Vi(e,await Hi(e,t,n,zt(),r),qr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){$r().location.href=e}(await Hi(e,t,n,zt(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Bt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Mi(e),n=new Ei(e);return t.register("authEvent",(t=>{Ut(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($i,{type:$i},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[$i];void 0!==i&&t(!!i),Dt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ki(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Fn()||Rn()||jn()}};var Ki="@firebase/auth",Gi="1.8.0";class Yi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Qi=S("authIdTokenMaxAge")||300;let Ji=null;var Xi,Zi;Xi={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Lt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},$n=Xi,Zi="Browser",ct(new Z("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ut(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Zi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Un(Zi)},c=new zn(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Sn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),ct(new Z("auth-internal",(e=>(e=>new Yi(e))(qn(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),yt(Ki,Gi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Zi)),yt(Ki,Gi,"esm2017");var es,ts,ns="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},rs={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ts=rs.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},es=rs.Integer=r}).apply("undefined"!==typeof ns?ns:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var is,ss,os,as,ls,cs,us,hs,ds="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},fs={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ds&&ds];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<_.length;t++)n=_[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout((()=>{throw e}),0)}function x(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var C=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new T),(e=>e.reset()));class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let k,I=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=C.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},R=()=>{const e=i.Promise.resolve(void 0);k=()=>{e.then(A)}};var A=()=>{for(var e;e=x();){try{e.h.call(e.g)}catch(n){S(n)}var t=C;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function P(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:j[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,O);var j={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}B.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=q(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),$={};function W(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new B(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&Q(n))}function Q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(z(n,e),0==n.h&&(n.src=null,t[H]=null)):V(e)}}}function J(e){return e in $?$[e]:$[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Q(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof B?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new B(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;w(t=new O(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&z(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,P),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}h(le,P);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Q(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){O.call(this,"d")}function be(){O.call(this,"c")}h(ve,O),h(be,O);var _e={},we=null;function Ee(){return we=we||new ne}function Se(e){O.call(this,_e.La,e)}function xe(e){const t=Ee();re(t,new Se(t))}function Ce(e,t){O.call(this,_e.STAT_EVENT,e),this.stat=t}function Te(e){const t=Ee();re(t,new Ce(t,e))}function ke(e,t){O.call(this,_e.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ne(){this.g=!0}function Re(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}_e.La="serverreachability",h(Se,O),_e.STAT_EVENT="statevent",h(Ce,O),_e.Ma="timingevent",h(ke,O),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var Ae,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new je}function je(){this.i=null,this.g="",this.h=!1}h(De,pe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Ae=new De;var Me={},Fe={};function Ue(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),qe(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Ct(n.i,"t",r),e.C=0,n=e.j.J,e.h=new je,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),xe(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Be(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(c(e.ba,e),t)}function $e(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){$e(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Qt(n)}rn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&($e(a),qe(a)),r.g=o}else nn(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}xe()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==$t(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=$t(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=d||7==t||xe(),$e(this);var n=this.g.Z();this.X=n;t:if(Be(this)){var r=Wt(this.g);e="";var s=r.length,o=4==$t(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),We(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Te(12),Ke(this),We(this);break e}Re(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=ze(this,a),e==Fe){4==d&&(this.s=4,Te(14),n=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Te(15),Re(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Re(this.i,this.l,e,null),Ge(this,e)}if(Be(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Te(11))}}else Re(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),We(this)}else Re(this.i,this.l,a,null),Ge(this,a);4==d&&Ke(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=$t(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=E(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ke(this),We(this)}}}catch(ps){}},Le.prototype.cancel=function(){this.J=!0,Ke(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(xe(),Te(17)),Ke(this),this.s=2,We(this)):He(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Qe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Qe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),Ct(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,_t)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,_t=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function St(e,t){Et(e),t=Tt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function xt(e,t){return Et(e),t=Tt(e,t),e.g.has(t)}function Ct(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(Tt(e,t),d(n)),e.h+=n.length)}function Tt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function It(){this.g=new fe}function Nt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(Fx){throw t.push(r+"type="+encodeURIComponent("_badmap")),Fx}}function Rt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function jt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){Et(this),this.i=null,e=Tt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Et(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Et(this);let t=[];if("string"===typeof e)xt(this,e)&&(t=t.concat(this.g.get(Tt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,xt(this,e=Tt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Rt,pe),Rt.prototype.g=function(){return new At(this.l,this.j)},Rt.prototype.i=(mt={},function(){return mt}),h(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Dt(this),3==this.readyState&&Pt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Mt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Bt(e),qt(e)}function Bt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=$t(e)||2!=e.Z()))if(e.u&&4==$t(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==$t(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ft.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<$t(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Bt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Ht(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Fx){}}}function Ht(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function $t(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ys){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Qe(e&&e.concurrentRequestLimit),this.Da=new It,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Jt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}hn(e)}function Qt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Jt(e){Qt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;k||R(),I||(k(),I=!0),N.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&jt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Nt(a,e,"req"+n+"_")}catch(ps){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;k||R(),I||(k(),I=!0),N.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&jt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ee(),new ke(r,n)),Xt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=u(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(kt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout((()=>{n.abort(),kt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)})).catch((()=>{clearTimeout(r),kt(0,0,!1,t)}))}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),hn(e),Jt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new Rt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?me(this.o):me(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Vt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Vt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<$t(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&jt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Je(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Qt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Qt(this),rn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Yt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Xt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,gn.aa.N.call(this)},h(yn,ve),h(vn,be),h(bn,pn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new yn(e))},bn.prototype.sa=function(e){re(this.g,new vn)},bn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,hs=fs.createWebChannelTransport=function(){return new mn},us=fs.getStatEventTarget=function(){return Ee()},cs=fs.Event=_e,ls=fs.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,as=fs.ErrorCode=Pe,Oe.COMPLETE="complete",os=fs.EventType=Oe,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,ss=fs.WebChannel=ge,fs.FetchXmlHttpFactory=Rt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,is=fs.XhrIo=Mt}).apply("undefined"!==typeof ds?ds:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ps="@firebase/firestore";class ms{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ms.UNAUTHENTICATED=new ms(null),ms.GOOGLE_CREDENTIALS=new ms("google-credentials-uid"),ms.FIRST_PARTY=new ms("first-party-uid"),ms.MOCK_USER=new ms("mock-user");let gs="11.0.0";const ys=new ue("@firebase/firestore");function vs(){return ys.logLevel}function bs(e){if(ys.logLevel<=se.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Es);ys.debug(`Firestore (${gs}): ${e}`,...i)}}function _s(e){if(ys.logLevel<=se.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Es);ys.error(`Firestore (${gs}): ${e}`,...i)}}function ws(e){if(ys.logLevel<=se.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Es);ys.warn(`Firestore (${gs}): ${e}`,...i)}}function Es(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Ux){return e}}function Ss(){const e=`FIRESTORE (${gs}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw _s(e),new Error(e)}function xs(e,t){e||Ss()}function Cs(e,t){return e}const Ts={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ks extends P{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Is{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ns{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Rs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ms.UNAUTHENTICATED)))}shutdown(){}}class As{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ps{constructor(e){this.t=e,this.currentUser=ms.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xs(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Is;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Is,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{bs("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(bs("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Is)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(bs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(xs("string"==typeof t.accessToken),new Ns(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xs(null===e||"string"==typeof e),new ms(e)}}class Os{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ms.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ds{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Os(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ms.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ls{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class js{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){xs(void 0===this.o);const n=e=>{null!=e.error&&bs("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,bs("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{bs("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):bs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(xs("string"==typeof e.token),this.R=e.token,new Ls(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ms(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Fs{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Ms(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Us(e,t){return e<t?-1:e>t?1:0}function Vs(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class Bs{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ks(Ts.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ks(Ts.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ks(Ts.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ks(Ts.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bs.fromMillis(Date.now())}static fromDate(e){return Bs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Bs(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Us(this.nanoseconds,e.nanoseconds):Us(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class zs{constructor(e){this.timestamp=e}static fromTimestamp(e){return new zs(e)}static min(){return new zs(new Bs(0,0))}static max(){return new zs(new Bs(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class qs{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ss(),void 0===n?n=e.length-t:n>e.length-t&&Ss(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===qs.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qs?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Hs extends qs{construct(e,t,n){return new Hs(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ks(Ts.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new Hs(e)}static emptyPath(){return new Hs([])}}const $s=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ws extends qs{construct(e,t,n){return new Ws(e,t,n)}static isValidIdentifier(e){return $s.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ws.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ws(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ks(Ts.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ks(Ts.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ks(Ts.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new ks(Ts.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ws(t)}static emptyPath(){return new Ws([])}}class Ks{constructor(e){this.path=e}static fromPath(e){return new Ks(Hs.fromString(e))}static fromName(e){return new Ks(Hs.fromString(e).popFirst(5))}static empty(){return new Ks(Hs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Hs.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Hs.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ks(new Hs(e.slice()))}}class Gs{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Gs.UNKNOWN_ID=-1;function Ys(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=zs.fromTimestamp(1e9===r?new Bs(n+1,0):new Bs(n,r));return new Js(i,Ks.empty(),t)}function Qs(e){return new Js(e.readTime,e.key,-1)}class Js{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Js(zs.min(),Ks.empty(),-1)}static max(){return new Js(zs.max(),Ks.empty(),-1)}}function Xs(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ks.comparator(e.documentKey,t.documentKey),0!==n?n:Us(e.largestBatchId,t.largestBatchId))}const Zs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function to(e){if(e.code!==Ts.FAILED_PRECONDITION||e.message!==Zs)throw e;bs("LocalStore","Unexpectedly lost primary lease")}class no{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ss(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new no(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof no?t:no.resolve(t)}catch(e){return no.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):no.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):no.reject(t)}static resolve(e){return new no(((t,n)=>{t(e)}))}static reject(e){return new no(((t,n)=>{n(e)}))}static waitFor(e){return new no(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=no.resolve(!1);for(const n of e)t=t.next((e=>e?no.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new no(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new no(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function ro(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function io(e){return"IndexedDbTransactionError"===e.name}class so{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function oo(e){return null==e}function ao(e){return 0===e&&1/e==-1/0}function lo(e){return"number"==typeof e&&Number.isInteger(e)&&!ao(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function co(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ho(t)),t=uo(e.get(n),t);return ho(t)}function uo(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function ho(e){return e+"\x01\x01"}so.oe=-1;const fo=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],po=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mo=po,go=[...mo,"indexConfiguration","indexState","indexEntries"];function yo(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function vo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function bo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class _o{constructor(e,t){this.comparator=e,this.root=t||Eo.EMPTY}insert(e,t){return new _o(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Eo.BLACK,null,null))}remove(e){return new _o(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Eo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wo(this.root,e,this.comparator,!1)}getReverseIterator(){return new wo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wo(this.root,e,this.comparator,!0)}}class wo{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Eo{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Eo.RED,this.left=null!=r?r:Eo.EMPTY,this.right=null!=i?i:Eo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Eo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Eo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Eo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Eo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Eo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ss();if(this.right.isRed())throw Ss();const e=this.left.check();if(e!==this.right.check())throw Ss();return e+(this.isRed()?0:1)}}Eo.EMPTY=null,Eo.RED=!0,Eo.BLACK=!1,Eo.EMPTY=new class{constructor(){this.size=0}get key(){throw Ss()}get value(){throw Ss()}get color(){throw Ss()}get left(){throw Ss()}get right(){throw Ss()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Eo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class So{constructor(e){this.comparator=e,this.data=new _o(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xo(this.data.getIterator())}getIteratorFrom(e){return new xo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof So))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new So(this.comparator);return t.data=e,t}}class xo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Co{constructor(e){this.fields=e,e.sort(Ws.comparator)}static empty(){return new Co([])}unionWith(e){let t=new So(Ws.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Co(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vs(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class To extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ko{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new To("Invalid base64 string: "+e):e}}(e);return new ko(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ko(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Us(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ko.EMPTY_BYTE_STRING=new ko("");const Io=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function No(e){if(xs(!!e),"string"==typeof e){let t=0;const n=Io.exec(e);if(xs(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ro(e.seconds),nanos:Ro(e.nanos)}}function Ro(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ao(e){return"string"==typeof e?ko.fromBase64String(e):ko.fromUint8Array(e)}function Po(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Oo(e){const t=e.mapValue.fields.__previous_value__;return Po(t)?Oo(t):t}function Do(e){const t=No(e.mapValue.fields.__local_write_time__.timestampValue);return new Bs(t.seconds,t.nanos)}class Lo{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class jo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new jo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof jo&&e.projectId===this.projectId&&e.database===this.database}}const Mo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Fo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Po(e)?4:ta(e)?9007199254740991:Zo(e)?10:11:Ss()}function Uo(e,t){if(e===t)return!0;const n=Fo(e);if(n!==Fo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Do(e).isEqual(Do(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=No(e.timestampValue),r=No(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ao(e.bytesValue).isEqual(Ao(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ro(e.geoPointValue.latitude)===Ro(t.geoPointValue.latitude)&&Ro(e.geoPointValue.longitude)===Ro(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ro(e.integerValue)===Ro(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ro(e.doubleValue),r=Ro(t.doubleValue);return n===r?ao(n)===ao(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Vs(e.arrayValue.values||[],t.arrayValue.values||[],Uo);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(yo(n)!==yo(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Uo(n[i],r[i])))return!1;return!0}(e,t);default:return Ss()}}function Vo(e,t){return void 0!==(e.values||[]).find((e=>Uo(e,t)))}function Bo(e,t){if(e===t)return 0;const n=Fo(e),r=Fo(t);if(n!==r)return Us(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Us(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ro(e.integerValue||e.doubleValue),r=Ro(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return zo(e.timestampValue,t.timestampValue);case 4:return zo(Do(e),Do(t));case 5:return Us(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ao(e),r=Ao(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Us(n[i],r[i]);if(0!==e)return e}return Us(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Us(Ro(e.latitude),Ro(t.latitude));return 0!==n?n:Us(Ro(e.longitude),Ro(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return qo(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o.value)||void 0===n?void 0:n.arrayValue,c=null===(r=a.value)||void 0===r?void 0:r.arrayValue,u=Us((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:qo(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Mo.mapValue&&t===Mo.mapValue)return 0;if(e===Mo.mapValue)return 1;if(t===Mo.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Us(r[o],s[o]);if(0!==e)return e;const t=Bo(n[r[o]],i[s[o]]);if(0!==t)return t}return Us(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ss()}}function zo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Us(e,t);const n=No(e),r=No(t),i=Us(n.seconds,r.seconds);return 0!==i?i:Us(n.nanos,r.nanos)}function qo(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Bo(n[i],r[i]);if(e)return e}return Us(n.length,r.length)}function Ho(e){return $o(e)}function $o(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=No(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ao(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ks.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=$o(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${$o(e.fields[i])}`;return n+"}"}(e.mapValue):Ss()}function Wo(e){switch(Fo(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Oo(e);return t?16+Wo(t):16;case 5:return 2*e.stringValue.length;case 6:return Ao(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Wo(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return vo(e.fields,((e,n)=>{t+=e.length+Wo(n)})),t}(e.mapValue);default:throw Ss()}}function Ko(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Go(e){return!!e&&"integerValue"in e}function Yo(e){return!!e&&"arrayValue"in e}function Qo(e){return!!e&&"nullValue"in e}function Jo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Xo(e){return!!e&&"mapValue"in e}function Zo(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ea(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return vo(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ea(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ea(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ta(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class na{constructor(e){this.value=e}static empty(){return new na({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Xo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ea(t)}setAll(e){let t=Ws.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ea(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Xo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Uo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Xo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){vo(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new na(ea(this.value))}}function ra(e){const t=[];return vo(e.fields,((e,n)=>{const r=new Ws([e]);if(Xo(n)){const e=ra(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Co(t)}class ia{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ia(e,0,zs.min(),zs.min(),zs.min(),na.empty(),0)}static newFoundDocument(e,t,n,r){return new ia(e,1,t,zs.min(),n,r,0)}static newNoDocument(e,t){return new ia(e,2,t,zs.min(),zs.min(),na.empty(),0)}static newUnknownDocument(e,t){return new ia(e,3,t,zs.min(),zs.min(),na.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(zs.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=na.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=na.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zs.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ia&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ia(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sa{constructor(e,t){this.position=e,this.inclusive=t}}function oa(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Ks.comparator(Ks.fromName(o.referenceValue),n.key):Bo(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function aa(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Uo(e.position[n],t.position[n]))return!1;return!0}class la{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ca(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ua{}class ha extends ua{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ba(e,t,n):"array-contains"===t?new Sa(e,n):"in"===t?new xa(e,n):"not-in"===t?new Ca(e,n):"array-contains-any"===t?new Ta(e,n):new ha(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new _a(e,n):new wa(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Bo(t,this.value)):null!==t&&Fo(this.value)===Fo(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ss()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class da extends ua{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new da(e,t)}matches(e){return fa(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fa(e){return"and"===e.op}function pa(e){return ma(e)&&fa(e)}function ma(e){for(const t of e.filters)if(t instanceof da)return!1;return!0}function ga(e){if(e instanceof ha)return e.field.canonicalString()+e.op.toString()+Ho(e.value);if(pa(e))return e.filters.map((e=>ga(e))).join(",");{const t=e.filters.map((e=>ga(e))).join(",");return`${e.op}(${t})`}}function ya(e,t){return e instanceof ha?function(e,t){return t instanceof ha&&e.op===t.op&&e.field.isEqual(t.field)&&Uo(e.value,t.value)}(e,t):e instanceof da?function(e,t){return t instanceof da&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&ya(n,t.filters[r])),!0)}(e,t):void Ss()}function va(e){return e instanceof ha?function(e){return`${e.field.canonicalString()} ${e.op} ${Ho(e.value)}`}(e):e instanceof da?function(e){return e.op.toString()+" {"+e.getFilters().map(va).join(" ,")+"}"}(e):"Filter"}class ba extends ha{constructor(e,t,n){super(e,t,n),this.key=Ks.fromName(n.referenceValue)}matches(e){const t=Ks.comparator(e.key,this.key);return this.matchesComparison(t)}}class _a extends ha{constructor(e,t){super(e,"in",t),this.keys=Ea("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class wa extends ha{constructor(e,t){super(e,"not-in",t),this.keys=Ea("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ea(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ks.fromName(e.referenceValue)))}class Sa extends ha{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yo(t)&&Vo(t.arrayValue,this.value)}}class xa extends ha{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Vo(this.value.arrayValue,t)}}class Ca extends ha{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Vo(this.value.arrayValue,t)}}class Ta extends ha{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yo(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Vo(this.value.arrayValue,e)))}}class ka{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Ia(e){return new ka(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Na(e){const t=Cs(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ga(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),oo(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ho(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ho(e))).join(",")),t.ue=e}return t.ue}function Ra(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ca(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ya(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!aa(e.startAt,t.startAt)&&aa(e.endAt,t.endAt)}function Aa(e){return Ks.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Pa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Oa(e,t,n,r,i,s,o,a){return new Pa(e,t,n,r,i,s,o,a)}function Da(e){return new Pa(e)}function La(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ja(e){return null!==e.collectionGroup}function Ma(e){const t=Cs(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new So(Ws.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new la(r,n))})),e.has(Ws.keyField().canonicalString())||t.ce.push(new la(Ws.keyField(),n))}return t.ce}function Fa(e){const t=Cs(e);return t.le||(t.le=Ua(t,Ma(e))),t.le}function Ua(e,t){if("F"===e.limitType)return Ia(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new la(e.field,t)}));const n=e.endAt?new sa(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new sa(e.startAt.position,e.startAt.inclusive):null;return Ia(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Va(e,t){const n=e.filters.concat([t]);return new Pa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ba(e,t,n){return new Pa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function za(e,t){return Ra(Fa(e),Fa(t))&&e.limitType===t.limitType}function qa(e){return`${Na(Fa(e))}|lt:${e.limitType}`}function Ha(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>va(e))).join(", ")}]`),oo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ho(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ho(e))).join(",")),`Target(${t})`}(Fa(e))}; limitType=${e.limitType})`}function $a(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ks.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ma(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=oa(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ma(e),t))&&!(e.endAt&&!function(e,t,n){const r=oa(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ma(e),t))}(e,t)}function Wa(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ka(e){return(t,n)=>{let r=!1;for(const i of Ma(e)){const e=Ga(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ga(e,t,n){const r=e.field.isKeyField()?Ks.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Bo(r,i):Ss()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ss()}}class Ya{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){vo(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return bo(this.inner)}size(){return this.innerSize}}const Qa=new _o(Ks.comparator);function Ja(){return Qa}const Xa=new _o(Ks.comparator);function Za(){let e=Xa;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function el(e){let t=Xa;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function tl(){return rl()}function nl(){return rl()}function rl(){return new Ya((e=>e.toString()),((e,t)=>e.isEqual(t)))}const il=new _o(Ks.comparator),sl=new So(Ks.comparator);function ol(){let e=sl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const al=new So(Us);function ll(){return al}function cl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ao(t)?"-0":t}}function ul(e){return{integerValue:""+e}}function hl(e,t){return lo(t)?ul(t):cl(e,t)}class dl{constructor(){this._=void 0}}function fl(e,t,n){return e instanceof gl?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Po(t)&&(t=Oo(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof yl?vl(e,t):e instanceof bl?_l(e,t):function(e,t){const n=ml(e,t),r=El(n)+El(e.Pe);return Go(n)&&Go(e.Pe)?ul(r):cl(e.serializer,r)}(e,t)}function pl(e,t,n){return e instanceof yl?vl(e,t):e instanceof bl?_l(e,t):n}function ml(e,t){return e instanceof wl?function(e){return Go(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class gl extends dl{}class yl extends dl{constructor(e){super(),this.elements=e}}function vl(e,t){const n=Sl(t);for(const r of e.elements)n.some((e=>Uo(e,r)))||n.push(r);return{arrayValue:{values:n}}}class bl extends dl{constructor(e){super(),this.elements=e}}function _l(e,t){let n=Sl(t);for(const r of e.elements)n=n.filter((e=>!Uo(e,r)));return{arrayValue:{values:n}}}class wl extends dl{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function El(e){return Ro(e.integerValue||e.doubleValue)}function Sl(e){return Yo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class xl{constructor(e,t){this.field=e,this.transform=t}}class Cl{constructor(e,t){this.version=e,this.transformResults=t}}class Tl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tl}static exists(e){return new Tl(void 0,e)}static updateTime(e){return new Tl(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Il{}function Nl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ul(e.key,Tl.none()):new Dl(e.key,e.data,Tl.none());{const n=e.data,r=na.empty();let i=new So(Ws.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Ll(e.key,r,new Co(i.toArray()),Tl.none())}}function Rl(e,t,n){e instanceof Dl?function(e,t,n){const r=e.value.clone(),i=Ml(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ll?function(e,t,n){if(!kl(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ml(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(jl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Al(e,t,n,r){return e instanceof Dl?function(e,t,n,r){if(!kl(e.precondition,t))return n;const i=e.value.clone(),s=Fl(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ll?function(e,t,n,r){if(!kl(e.precondition,t))return n;const i=Fl(e.fieldTransforms,r,t),s=t.data;return s.setAll(jl(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return kl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Pl(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ml(r.transform,e||null);null!=i&&(null===n&&(n=na.empty()),n.set(r.field,i))}return n||null}function Ol(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Vs(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof yl&&t instanceof yl||e instanceof bl&&t instanceof bl?Vs(e.elements,t.elements,Uo):e instanceof wl&&t instanceof wl?Uo(e.Pe,t.Pe):e instanceof gl&&t instanceof gl}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Dl extends Il{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ll extends Il{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function jl(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Ml(e,t,n){const r=new Map;xs(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,pl(o,a,n[i]))}return r}function Fl(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,fl(e,s,t))}return r}class Ul extends Il{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vl extends Il{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Bl{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Rl(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Al(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Al(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=nl();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Nl(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(zs.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ol())}isEqual(e){return this.batchId===e.batchId&&Vs(this.mutations,e.mutations,((e,t)=>Ol(e,t)))&&Vs(this.baseMutations,e.baseMutations,((e,t)=>Ol(e,t)))}}class zl{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){xs(e.mutations.length===n.length);let r=il;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new zl(e,t,n,r)}}class ql{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Hl{constructor(e,t){this.count=e,this.unchangedNames=t}}var $l,Wl;function Kl(e){switch(e){default:return Ss();case Ts.CANCELLED:case Ts.UNKNOWN:case Ts.DEADLINE_EXCEEDED:case Ts.RESOURCE_EXHAUSTED:case Ts.INTERNAL:case Ts.UNAVAILABLE:case Ts.UNAUTHENTICATED:return!1;case Ts.INVALID_ARGUMENT:case Ts.NOT_FOUND:case Ts.ALREADY_EXISTS:case Ts.PERMISSION_DENIED:case Ts.FAILED_PRECONDITION:case Ts.ABORTED:case Ts.OUT_OF_RANGE:case Ts.UNIMPLEMENTED:case Ts.DATA_LOSS:return!0}}function Gl(e){if(void 0===e)return _s("GRPC error has no .code"),Ts.UNKNOWN;switch(e){case $l.OK:return Ts.OK;case $l.CANCELLED:return Ts.CANCELLED;case $l.UNKNOWN:return Ts.UNKNOWN;case $l.DEADLINE_EXCEEDED:return Ts.DEADLINE_EXCEEDED;case $l.RESOURCE_EXHAUSTED:return Ts.RESOURCE_EXHAUSTED;case $l.INTERNAL:return Ts.INTERNAL;case $l.UNAVAILABLE:return Ts.UNAVAILABLE;case $l.UNAUTHENTICATED:return Ts.UNAUTHENTICATED;case $l.INVALID_ARGUMENT:return Ts.INVALID_ARGUMENT;case $l.NOT_FOUND:return Ts.NOT_FOUND;case $l.ALREADY_EXISTS:return Ts.ALREADY_EXISTS;case $l.PERMISSION_DENIED:return Ts.PERMISSION_DENIED;case $l.FAILED_PRECONDITION:return Ts.FAILED_PRECONDITION;case $l.ABORTED:return Ts.ABORTED;case $l.OUT_OF_RANGE:return Ts.OUT_OF_RANGE;case $l.UNIMPLEMENTED:return Ts.UNIMPLEMENTED;case $l.DATA_LOSS:return Ts.DATA_LOSS;default:return Ss()}}(Wl=$l||($l={}))[Wl.OK=0]="OK",Wl[Wl.CANCELLED=1]="CANCELLED",Wl[Wl.UNKNOWN=2]="UNKNOWN",Wl[Wl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wl[Wl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wl[Wl.NOT_FOUND=5]="NOT_FOUND",Wl[Wl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wl[Wl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wl[Wl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wl[Wl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wl[Wl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wl[Wl.ABORTED=10]="ABORTED",Wl[Wl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wl[Wl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wl[Wl.INTERNAL=13]="INTERNAL",Wl[Wl.UNAVAILABLE=14]="UNAVAILABLE",Wl[Wl.DATA_LOSS=15]="DATA_LOSS";let Yl=null;function Ql(){return new TextEncoder}const Jl=new es([4294967295,4294967295],0);function Xl(e){const t=Ql().encode(e),n=new ts;return n.update(t),new Uint8Array(n.digest())}function Zl(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new es([n,r],0),new es([i,s],0)]}class ec{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new tc(`Invalid padding: ${t}`);if(n<0)throw new tc(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new tc(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new tc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=es.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(es.fromNumber(n)));return 1===r.compare(Jl)&&(r=new es([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Xl(e),[n,r]=Zl(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ec(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=Xl(e),[n,r]=Zl(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class nc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,rc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new nc(zs.min(),r,new _o(Us),Ja(),ol())}}class rc{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new rc(n,t,ol(),ol(),ol())}}class ic{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class sc{constructor(e,t){this.targetId=e,this.me=t}}class oc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ko.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ac{constructor(){this.fe=0,this.ge=uc(),this.pe=ko.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ol(),t=ol(),n=ol();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ss()}})),new rc(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=uc()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xs(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class lc{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ja(),this.qe=cc(),this.Qe=new _o(Us)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Ss()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Aa(i))if(0===n){const e=new Ks(i.path);this.Ue(t,e,ia.newNoDocument(e,zs.min()))}else xs(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Yl||Yl.et(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Ao(n).toUint8Array()}catch(e){if(e instanceof To)return ws("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new ec(s,r,i)}catch(e){return ws(e instanceof tc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Aa(i.target)){const t=new Ks(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,ia.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}}));let n=ol();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new nc(e,t,this.Qe,this.ke,n);return this.ke=Ja(),this.qe=cc(),this.Qe=new _o(Us),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ac,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new So(Us),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||bs("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ac),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function cc(){return new _o(Ks.comparator)}function uc(){return new _o(Ks.comparator)}const hc={asc:"ASCENDING",desc:"DESCENDING"},dc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fc={and:"AND",or:"OR"};class pc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mc(e,t){return e.useProto3Json||oo(t)?t:{value:t}}function gc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function yc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function vc(e,t){return gc(e,t.toTimestamp())}function bc(e){return xs(!!e),zs.fromTimestamp(function(e){const t=No(e);return new Bs(t.seconds,t.nanos)}(e))}function _c(e,t){return wc(e,t).canonicalString()}function wc(e,t){const n=function(e){return new Hs(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ec(e){const t=Hs.fromString(e);return xs(zc(t)),t}function Sc(e,t){return _c(e.databaseId,t.path)}function xc(e,t){const n=Ec(t);if(n.get(1)!==e.databaseId.projectId)throw new ks(Ts.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ks(Ts.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ks(Ic(n))}function Cc(e,t){return _c(e.databaseId,t)}function Tc(e){const t=Ec(e);return 4===t.length?Hs.emptyPath():Ic(t)}function kc(e){return new Hs(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ic(e){return xs(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Nc(e,t,n){return{name:Sc(e,t),fields:n.value.mapValue.fields}}function Rc(e,t){let n;if(t instanceof Dl)n={update:Nc(e,t.key,t.value)};else if(t instanceof Ul)n={delete:Sc(e,t.key)};else if(t instanceof Ll)n={update:Nc(e,t.key,t.data),updateMask:Bc(t.fieldMask)};else{if(!(t instanceof Vl))return Ss();n={verify:Sc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof gl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof yl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof bl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wl)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Ss()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:vc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ss()}(e,t.precondition)),n}function Ac(e,t){return{documents:[Cc(e,t.path)]}}function Pc(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Cc(e,i);const s=function(e){if(0!==e.length)return Vc(da.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Fc(e.field),direction:Lc(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=mc(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Oc(e){let t=Tc(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){xs(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Dc(e);return t instanceof da&&pa(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new la(Uc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,oo(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new sa(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new sa(n,t)}(n.endAt)),Oa(t,i,o,s,a,"F",l,c)}function Dc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Uc(e.unaryFilter.field);return ha.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Uc(e.unaryFilter.field);return ha.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Uc(e.unaryFilter.field);return ha.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Uc(e.unaryFilter.field);return ha.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ss()}}(e):void 0!==e.fieldFilter?function(e){return ha.create(Uc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ss()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return da.create(e.compositeFilter.filters.map((e=>Dc(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ss()}}(e.compositeFilter.op))}(e):Ss()}function Lc(e){return hc[e]}function jc(e){return dc[e]}function Mc(e){return fc[e]}function Fc(e){return{fieldPath:e.canonicalString()}}function Uc(e){return Ws.fromServerFormat(e.fieldPath)}function Vc(e){return e instanceof ha?function(e){if("=="===e.op){if(Jo(e.value))return{unaryFilter:{field:Fc(e.field),op:"IS_NAN"}};if(Qo(e.value))return{unaryFilter:{field:Fc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Jo(e.value))return{unaryFilter:{field:Fc(e.field),op:"IS_NOT_NAN"}};if(Qo(e.value))return{unaryFilter:{field:Fc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fc(e.field),op:jc(e.op),value:e.value}}}(e):e instanceof da?function(e){const t=e.getFilters().map((e=>Vc(e)));return 1===t.length?t[0]:{compositeFilter:{op:Mc(e.op),filters:t}}}(e):Ss()}function Bc(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function zc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class qc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:zs.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:zs.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ko.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new qc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Hc{constructor(e){this.ct=e}}function $c(e){const t=Oc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ba(t,t.limit,"L"):t}class Wc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ro(e.integerValue));else if("doubleValue"in e){const n=Ro(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),ao(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=No(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ao(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?ta(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Zo(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ss()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const s="value",o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Ro(o)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Ks.fromName(e).path.forEach((e=>{this.dt(t,60),this.Dt(e,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}Wc.vt=new Wc;class Kc{constructor(){this.un=new Gc}addToCollectionParentIndex(e,t){return this.un.add(t),no.resolve()}getCollectionParents(e,t){return no.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return no.resolve()}deleteFieldIndex(e,t){return no.resolve()}deleteAllFieldIndexes(e){return no.resolve()}createTargetIndexes(e,t){return no.resolve()}getDocumentsMatchingTarget(e,t){return no.resolve(null)}getIndexType(e,t){return no.resolve(0)}getFieldIndexes(e,t){return no.resolve([])}getNextCollectionGroupToUpdate(e){return no.resolve(null)}getMinOffset(e,t){return no.resolve(Js.min())}getMinOffsetFromCollectionGroup(e,t){return no.resolve(Js.min())}updateCollectionGroup(e,t,n){return no.resolve()}updateIndexEntries(e,t){return no.resolve()}}class Gc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new So(Hs.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new So(Hs.comparator)).toArray()}}new Uint8Array(0);const Yc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Qc(e,Qc.DEFAULT_COLLECTION_PERCENTILE,Qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Qc.DEFAULT_COLLECTION_PERCENTILE=10,Qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qc.DEFAULT=new Qc(41943040,Qc.DEFAULT_COLLECTION_PERCENTILE,Qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qc.DISABLED=new Qc(-1,0,0);class Jc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Jc(0)}static kn(){return new Jc(-1)}}function Xc(e,t){let[n,r]=e,[i,s]=t;const o=Us(n,i);return 0===o?Us(r,s):o}class Zc{constructor(e){this.Un=e,this.buffer=new So(Xc),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Xc(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){bs("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){io(e)?bs("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await to(e)}await this.Hn(3e5)}))}}class tu{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return no.resolve(so.oe);const n=new Zc(t);return this.Jn.forEachTarget(e,(e=>n.zn(e.sequenceNumber))).next((()=>this.Jn.Zn(e,(e=>n.zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(bs("LruGarbageCollector","Garbage collection skipped; disabled"),no.resolve(Yc)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(bs("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yc):this.Xn(e,t)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(bs("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),vs()<=se.DEBUG&&bs("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-c}ms`),no.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function nu(e,t){return new tu(e,t)}class ru{constructor(){this.changes=new Ya((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ia.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?no.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class iu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class su{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Al(n.mutation,e,Co.empty(),Bs.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,ol()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ol();const r=tl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Za();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=tl();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,ol())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Ja();const s=rl(),o=rl();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ll)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Al(o.mutation,t,o.mutation.getFieldMask(),Bs.now())):s.set(t.key,Co.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new iu(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=rl();let r=new _o(((e,t)=>e-t)),i=ol();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Co.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||ol()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=nl();l.forEach((e=>{if(!i.has(e)){const r=Nl(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return no.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ks.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ja(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):no.resolve(tl());let o=-1,a=i;return s.next((t=>no.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?no.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,ol()))).next((e=>({batchId:o,changes:el(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ks(t)).next((e=>{let t=Za();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Za();return this.indexManager.getCollectionParents(e,i).next((o=>no.forEach(o,(o=>{const a=function(e,t){return new Pa(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ia.newInvalidDocument(r)))}));let n=Za();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Al(s.mutation,r,Co.empty(),Bs.now()),$a(t,r)&&(n=n.insert(e,r))})),n}))}}class ou{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return no.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:bc(e.createTime)}}(t)),no.resolve()}getNamedQuery(e,t){return no.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:$c(e.bundledQuery),readTime:bc(e.readTime)}}(t)),no.resolve()}}class au{constructor(){this.overlays=new _o(Ks.comparator),this.Ir=new Map}getOverlay(e,t){return no.resolve(this.overlays.get(t))}getOverlays(e,t){const n=tl();return no.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),no.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Ir.delete(n)),no.resolve()}getOverlaysForCollection(e,t,n){const r=tl(),i=t.length+1,s=new Ks(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return no.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new _o(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=tl(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=tl(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return no.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ql(t,n));let i=this.Ir.get(t);void 0===i&&(i=ol(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class lu{constructor(){this.sessionToken=ko.EMPTY_BYTE_STRING}getSessionToken(e){return no.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,no.resolve()}}class cu{constructor(){this.Tr=new So(uu.Er),this.dr=new So(uu.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new uu(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Vr(new uu(e,t))}mr(e,t){e.forEach((e=>this.removeReference(e,t)))}gr(e){const t=new Ks(new Hs([])),n=new uu(t,e),r=new uu(t,e+1),i=[];return this.dr.forEachInRange([n,r],(e=>{this.Vr(e),i.push(e.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ks(new Hs([])),n=new uu(t,e),r=new uu(t,e+1);let i=ol();return this.dr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new uu(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class uu{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ks.comparator(e.key,t.key)||Us(e.wr,t.wr)}static Ar(e,t){return Us(e.wr,t.wr)||Ks.comparator(e.key,t.key)}}class hu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new So(uu.Er)}checkEmpty(e){return no.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Bl(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.br=this.br.add(new uu(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return no.resolve(s)}lookupMutationBatch(e,t){return no.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return no.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return no.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return no.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new uu(t,0),r=new uu(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],(e=>{const t=this.Dr(e.wr);i.push(t)})),no.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new So(Us);return t.forEach((e=>{const t=new uu(e,0),r=new uu(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],(e=>{n=n.add(e.wr)}))})),no.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ks.isDocumentKey(i)||(i=i.child(""));const s=new uu(new Ks(i),0);let o=new So(Us);return this.br.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.wr)),!0)}),s),no.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach((e=>{const n=this.Dr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){xs(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return no.forEach(t.mutations,(r=>{const i=new uu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new uu(t,0),r=this.br.firstAfterOrEqual(n);return no.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,no.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class du{constructor(e){this.Mr=e,this.docs=new _o(Ks.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return no.resolve(n?n.document.mutableCopy():ia.newInvalidDocument(t))}getEntries(e,t){let n=Ja();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ia.newInvalidDocument(e))})),no.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ja();const s=t.path,o=new Ks(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Xs(Qs(o),n)<=0||(r.has(o.key)||$a(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return no.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ss()}Or(e,t){return no.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new fu(this)}getSize(e){return no.resolve(this.size)}}class fu extends ru{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)})),no.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class pu{constructor(e){this.persistence=e,this.Nr=new Ya((e=>Na(e)),Ra),this.lastRemoteSnapshotVersion=zs.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cu,this.targetCount=0,this.kr=Jc.Bn()}forEachTarget(e,t){return this.Nr.forEach(((e,n)=>t(n))),no.resolve()}getLastRemoteSnapshotVersion(e){return no.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return no.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),no.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),no.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Jc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,no.resolve()}updateTargetData(e,t){return this.Kn(t),no.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,no.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),no.waitFor(i).next((()=>r))}getTargetCount(e){return no.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return no.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),no.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),no.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),no.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return no.resolve(n)}containsKey(e,t){return no.resolve(this.Br.containsKey(t))}}class mu{constructor(e,t){this.qr={},this.overlays={},this.Qr=new so(0),this.Kr=!1,this.Kr=!0,this.$r=new lu,this.referenceDelegate=e(this),this.Ur=new pu(this),this.indexManager=new Kc,this.remoteDocumentCache=function(e){return new du(e)}((e=>this.referenceDelegate.Wr(e))),this.serializer=new Hc(t),this.Gr=new ou(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new au,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new hu(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){bs("MemoryPersistence","Starting transaction:",e);const r=new gu(this.Qr.next());return this.referenceDelegate.zr(),n(r).next((e=>this.referenceDelegate.jr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Hr(e,t){return no.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class gu extends eo{constructor(e){super(),this.currentSequenceNumber=e}}class yu{constructor(e){this.persistence=e,this.Jr=new cu,this.Yr=null}static Zr(e){return new yu(e)}get Xr(){if(this.Yr)return this.Yr;throw Ss()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),no.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),no.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),no.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((e=>this.Xr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Xr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return no.forEach(this.Xr,(n=>{const r=Ks.fromPath(n);return this.ei(e,r).next((e=>{e||t.removeEntry(r,zs.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return no.or([()=>no.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class vu{constructor(e,t){this.persistence=e,this.ti=new Ya((e=>co(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=nu(this,t)}static Zr(e,t){return new vu(e,t)}zr(){}jr(e){return no.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Yn(e){const t=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}er(e){let t=0;return this.Zn(e,(e=>{t++})).next((()=>t))}Zn(e,t){return no.forEach(this.ti,((n,r)=>this.nr(e,n,r).next((e=>e?no.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.Or(e,(r=>this.nr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,zs.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.ti.set(t,e.currentSequenceNumber),no.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.ti.set(n,e.currentSequenceNumber),no.resolve()}removeReference(e,t,n){return this.ti.set(n,e.currentSequenceNumber),no.resolve()}updateLimboDocument(e,t){return this.ti.set(t,e.currentSequenceNumber),no.resolve()}Wr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wo(e.data.value)),t}nr(e,t,n){return no.or([()=>this.persistence.Hr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.ti.get(t);return no.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class bu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=ol(),r=ol();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new bu(e,t.fromCache,n,r)}}class _u{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class wu{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=R()?8:ro(T())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Zi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new _u;return this.Xi(e,t,n).next((r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)}))})).next((()=>i.result))}es(e,t,n,r){return n.documentReadCount<this.ji?(vs()<=se.DEBUG&&bs("QueryEngine","SDK will not create cache indexes for query:",Ha(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),no.resolve()):(vs()<=se.DEBUG&&bs("QueryEngine","Query:",Ha(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(vs()<=se.DEBUG&&bs("QueryEngine","The SDK decides to create cache indexes for query:",Ha(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fa(t))):no.resolve())}Yi(e,t){if(La(t))return no.resolve(null);let n=Fa(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Ba(t,null,"F"),n=Fa(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=ol(...r);return this.Ji.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,Ba(t,null,"F")):this.rs(e,s,t,n)}))))})))))}Zi(e,t,n,r){return La(t)||r.isEqual(zs.min())?no.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?no.resolve(null):(vs()<=se.DEBUG&&bs("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ha(t)),this.rs(e,s,t,Ys(r,-1)).next((e=>e)))}))}ts(e,t){let n=new So(Ka(e));return t.forEach(((t,r)=>{$a(e,r)&&(n=n.add(r))})),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return vs()<=se.DEBUG&&bs("QueryEngine","Using full collection scan to execute query:",Ha(t)),this.Ji.getDocumentsMatchingQuery(e,t,Js.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Eu{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new _o(Us),this._s=new Ya((e=>Na(e)),Ra),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new su(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function Su(e,t,n,r){return new Eu(e,t,n,r)}async function xu(e,t){const n=Cs(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=ol();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({hs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Cu(e){const t=Cs(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ur.getLastRemoteSnapshotVersion(e)))}function Tu(e,t,n){let r=ol(),i=ol();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Ja();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(zs.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):bs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Ps:r,Is:i}}))}function ku(e,t){const n=Cs(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Iu(e,t){const n=Cs(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ur.getTargetData(e,t).next((i=>i?(r=i,no.resolve(r)):n.Ur.allocateTargetId(e).next((i=>(r=new qc(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e}))}async function Nu(e,t,n){const r=Cs(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!io(e))throw e;bs("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function Ru(e,t,n){const r=Cs(e);let i=zs.min(),s=ol();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Cs(e),i=r._s.get(n);return void 0!==i?no.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,Fa(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:zs.min(),n?s:ol()))).next((e=>(Au(r,Wa(t),e),{documents:e,Ts:s})))))}function Au(e,t,n){let r=e.us.get(t)||zs.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.us.set(t,r)}class Pu{constructor(){this.activeTargetIds=ll()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ou{constructor(){this.so=new Pu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Pu,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Du{_o(e){}shutdown(){}}class Lu{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){bs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){bs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ju=null;function Mu(){return null===ju?ju=268435456+Math.round(2147483648*Math.random()):ju++,"0x"+ju.toString(16)}const Fu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Uu{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Vu="WebChannelConnection";class Bu extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const s=Mu(),o=this.xo(e,t.toUriEncodedString());bs("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,r,i),this.No(e,o,a,n).then((t=>(bs("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw ws("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+gs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}xo(e,t){const n=Fu[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=Mu();return new Promise(((s,o)=>{const a=new is;a.setWithCredentials(!0),a.listenOnce(os.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case as.NO_ERROR:const t=a.getResponseJson();bs(Vu,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case as.TIMEOUT:bs(Vu,`RPC '${e}' ${i} timed out`),o(new ks(Ts.DEADLINE_EXCEEDED,"Request time out"));break;case as.HTTP_ERROR:const n=a.getStatus();if(bs(Vu,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ts).indexOf(t)>=0?t:Ts.UNKNOWN}(t.status);o(new ks(e,t.message))}else o(new ks(Ts.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ks(Ts.UNAVAILABLE,"Connection failed."));break;default:Ss()}}finally{bs(Vu,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);bs(Vu,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Bo(e,t,n){const r=Mu(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=hs(),o=us(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");bs(Vu,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new Uu({Io:t=>{d?bs(Vu,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(bs(Vu,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),bs(Vu,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,ss.EventType.OPEN,(()=>{d||(bs(Vu,`RPC '${e}' stream ${r} transport opened.`),f.yo())})),p(u,ss.EventType.CLOSE,(()=>{d||(d=!0,bs(Vu,`RPC '${e}' stream ${r} transport closed`),f.So())})),p(u,ss.EventType.ERROR,(t=>{d||(d=!0,ws(Vu,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new ks(Ts.UNAVAILABLE,"The operation could not be completed")))})),p(u,ss.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];xs(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){bs(Vu,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=$l[e];if(void 0!==t)return Gl(t)}(t),i=o.message;void 0===n&&(n=Ts.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.So(new ks(n,i)),u.close()}else bs(Vu,`RPC '${e}' stream ${r} received:`,i),f.bo(i)}})),p(o,cs.STAT_EVENT,(t=>{t.stat===ls.PROXY?bs(Vu,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===ls.NOPROXY&&bs(Vu,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.wo()}),0),f}}function zu(){return"undefined"!=typeof document?document:null}function qu(e){return new pc(e,!0)}class Hu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&bs("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class $u{constructor(e,t,n,r,i,s,o,a){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Hu(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Ts.RESOURCE_EXHAUSTED?(_s(t.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Ts.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)}),(t=>{e((()=>{const e=new ks(Ts.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((e=>{n((()=>this.I_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.e_?this.E_(e):this.onNext(e)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return bs("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(bs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Wu extends $u{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ss()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(xs(void 0===t||"string"==typeof t),ko.fromBase64String(t||"")):(xs(void 0===t||t instanceof Buffer||t instanceof Uint8Array),ko.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ts.UNKNOWN:Gl(e.code);return new ks(t,e.message||"")}(o);n=new oc(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=xc(e,r.document.name),s=bc(r.document.updateTime),o=r.document.createTime?bc(r.document.createTime):zs.min(),a=new na({mapValue:{fields:r.document.fields}}),l=ia.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ic(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=xc(e,r.document),s=r.readTime?bc(r.readTime):zs.min(),o=ia.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ic([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=xc(e,r.document),s=r.removedTargetIds||[];n=new ic([],s,i,null)}else{if(!("filter"in t))return Ss();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Hl(r,i),o=e.targetId;n=new sc(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return zs.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?zs.min():t.readTime?bc(t.readTime):zs.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=kc(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Aa(r)?{documents:Ac(e,r)}:{query:Pc(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=yc(e,t.resumeToken);const r=mc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(zs.min())>0){n.readTime=gc(e,t.snapshotVersion.toTimestamp());const r=mc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ss()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=kc(this.serializer),t.removeTarget=e,this.a_(t)}}class Ku extends $u{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return xs(!!e.streamToken),this.lastStreamToken=e.streamToken,xs(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){xs(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(xs(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?bc(e.updateTime):bc(t);return n.isEqual(zs.min())&&(n=bc(t)),new Cl(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=bc(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=kc(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Rc(this.serializer,e)))};this.a_(t)}}class Gu extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ks(Ts.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Mo(e,wc(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ts.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ks(Ts.UNKNOWN,e.toString())}))}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Lo(e,wc(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ts.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ks(Ts.UNKNOWN,e.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Yu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_s(t),this.D_=!1):bs("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Qu{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((e=>{n.enqueueAndForget((async()=>{sh(this)&&(bs("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Cs(e);t.L_.add(4),await Xu(t),t.q_.set("Unknown"),t.L_.delete(4),await Ju(t)}(this))}))})),this.q_=new Yu(n,r)}}async function Ju(e){if(sh(e))for(const t of e.B_)await t(!0)}async function Xu(e){for(const t of e.B_)await t(!1)}function Zu(e,t){const n=Cs(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),ih(n)?rh(n):xh(n).r_()&&th(n,t))}function eh(e,t){const n=Cs(e),r=xh(n);n.N_.delete(t),r.r_()&&nh(n,t),0===n.N_.size&&(r.r_()?r.o_():sh(n)&&n.q_.set("Unknown"))}function th(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(zs.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}xh(e).A_(t)}function nh(e,t){e.Q_.xe(t),xh(e).R_(t)}function rh(e){e.Q_=new lc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),xh(e).start(),e.q_.v_()}function ih(e){return sh(e)&&!xh(e).n_()&&e.N_.size>0}function sh(e){return 0===Cs(e).L_.size}function oh(e){e.Q_=void 0}async function ah(e){e.q_.set("Online")}async function lh(e){e.N_.forEach(((t,n)=>{th(e,t)}))}async function ch(e,t){oh(e),ih(e)?(e.q_.M_(t),rh(e)):e.q_.set("Unknown")}async function uh(e,t,n){if(e.q_.set("Online"),t instanceof oc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){bs("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await hh(e,n)}else if(t instanceof ic?e.Q_.Ke(t):t instanceof sc?e.Q_.He(t):e.Q_.We(t),!n.isEqual(zs.min()))try{const t=await Cu(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(ko.EMPTY_BYTE_STRING,r.snapshotVersion)),nh(e,t);const i=new qc(r.target,t,n,r.sequenceNumber);th(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){bs("RemoteStore","Failed to raise snapshot:",t),await hh(e,t)}}async function hh(e,t,n){if(!io(t))throw t;e.L_.add(1),await Xu(e),e.q_.set("Offline"),n||(n=()=>Cu(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{bs("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Ju(e)}))}function dh(e,t){return t().catch((n=>hh(e,n,t)))}async function fh(e){const t=Cs(e),n=Ch(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;ph(t);)try{const e=await ku(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,mh(t,e)}catch(e){await hh(t,e)}gh(t)&&yh(t)}function ph(e){return sh(e)&&e.O_.length<10}function mh(e,t){e.O_.push(t);const n=Ch(e);n.r_()&&n.V_&&n.m_(t.mutations)}function gh(e){return sh(e)&&!Ch(e).n_()&&e.O_.length>0}function yh(e){Ch(e).start()}async function vh(e){Ch(e).p_()}async function bh(e){const t=Ch(e);for(const n of e.O_)t.m_(n.mutations)}async function _h(e,t,n){const r=e.O_.shift(),i=zl.from(r,t,n);await dh(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await fh(e)}async function wh(e,t){t&&Ch(e).V_&&await async function(e,t){if(function(e){return Kl(e)&&e!==Ts.ABORTED}(t.code)){const n=e.O_.shift();Ch(e).s_(),await dh(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await fh(e)}}(e,t),gh(e)&&yh(e)}async function Eh(e,t){const n=Cs(e);n.asyncQueue.verifyOperationInProgress(),bs("RemoteStore","RemoteStore received new credentials");const r=sh(n);n.L_.add(3),await Xu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Ju(n)}async function Sh(e,t){const n=Cs(e);t?(n.L_.delete(2),await Ju(n)):t||(n.L_.add(2),await Xu(n),n.q_.set("Unknown"))}function xh(e){return e.K_||(e.K_=function(e,t,n){const r=Cs(e);return r.w_(),new Wu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:ah.bind(null,e),Ro:lh.bind(null,e),mo:ch.bind(null,e),d_:uh.bind(null,e)}),e.B_.push((async t=>{t?(e.K_.s_(),ih(e)?rh(e):e.q_.set("Unknown")):(await e.K_.stop(),oh(e))}))),e.K_}function Ch(e){return e.U_||(e.U_=function(e,t,n){const r=Cs(e);return r.w_(),new Ku(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:vh.bind(null,e),mo:wh.bind(null,e),f_:bh.bind(null,e),g_:_h.bind(null,e)}),e.B_.push((async t=>{t?(e.U_.s_(),await fh(e)):(await e.U_.stop(),e.O_.length>0&&(bs("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))}))),e.U_}class Th{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Th(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ks(Ts.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kh(e,t){if(_s("AsyncQueue",`${t}: ${e}`),io(e))return new ks(Ts.UNAVAILABLE,`${t}: ${e}`);throw e}class Ih{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ks.comparator(t.key,n.key):(e,t)=>Ks.comparator(e.key,t.key),this.keyedMap=Za(),this.sortedSet=new _o(this.comparator)}static emptySet(e){return new Ih(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ih))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ih;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Nh{constructor(){this.W_=new _o(Ks.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ss():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Rh{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Rh(e,t,Ih.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&za(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ah{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class Ph{constructor(){this.queries=Oh(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Cs(e),r=n.queries;n.queries=Oh(),r.forEach(((e,n)=>{for(const r of n.j_)r.onError(t)}))}(this,new ks(Ts.ABORTED,"Firestore shutting down"))}}function Oh(){return new Ya((e=>qa(e)),za)}async function Dh(e,t){const n=Cs(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new Ah,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=kh(e,`Initialization of query '${Ha(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&Fh(n)}async function Lh(e,t){const n=Cs(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jh(e,t){const n=Cs(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&Fh(n)}function Mh(e,t,n){const r=Cs(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function Fh(e){e.Y_.forEach((e=>{e.next()}))}var Uh,Vh;(Vh=Uh||(Uh={})).ea="default",Vh.Cache="cache";class Bh{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Rh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=Rh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Uh.Cache}}class zh{constructor(e){this.key=e}}class qh{constructor(e){this.key=e}}class Hh{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ol(),this.mutatedKeys=ol(),this.Aa=Ka(e),this.Ra=new Ih(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Nh,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=$a(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Aa(u,a)>0||l&&this.Aa(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:o,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ss()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc))),this.pa(n),r=null!=r&&r;const o=t&&!r?this.ya():[],a=0===this.da.size&&this.current&&!r?1:0,l=a!==this.Ea;return this.Ea=a,0!==s.length||l?{snapshot:new Rh(this.query,e.Ra,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Nh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((e=>this.Ta=this.Ta.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ta=this.Ta.delete(e))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ol(),this.Ra.forEach((e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))}));const t=[];return e.forEach((e=>{this.da.has(e)||t.push(new qh(e))})),this.da.forEach((n=>{e.has(n)||t.push(new zh(n))})),t}ba(e){this.Ta=e.Ts,this.da=ol();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Rh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class $h{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Wh{constructor(e){this.key=e,this.va=!1}}class Kh{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Ya((e=>qa(e)),za),this.Ma=new Map,this.xa=new Set,this.Oa=new _o(Ks.comparator),this.Na=new Map,this.La=new cu,this.Ba={},this.ka=new Map,this.qa=Jc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Gh(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=md(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Qh(r,t,n,!0),i}async function Yh(e,t){const n=md(e);await Qh(n,t,!0,!1)}async function Qh(e,t,n,r){const i=await Iu(e.localStore,Fa(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Jh(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Zu(e.remoteStore,i),a}async function Jh(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await Ru(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ma(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return cd(e,t.targetId,a.wa),a.snapshot}(e,t,n,r);const s=await Ru(e.localStore,t,!0),o=new Hh(t,s.Ts),a=o.ma(s.documents),l=rc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);cd(e,n,c.wa);const u=new $h(t,n,o);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Xh(e,t,n){const r=Cs(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter((e=>!za(e,t)))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Nu(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&eh(r.remoteStore,i.targetId),ad(r,i.targetId)})).catch(to)):(ad(r,i.targetId),await Nu(r.localStore,i.targetId,!0))}async function Zh(e,t){const n=Cs(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),eh(n.remoteStore,r.targetId))}async function ed(e,t){const n=Cs(e);try{const e=await function(e,t){const n=Cs(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Ur.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(ko.EMPTY_BYTE_STRING,zs.min()).withLastLimboFreeSnapshotVersion(zs.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Ur.updateTargetData(e,c))}));let a=Ja(),l=ol();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Tu(e,s,t.documentUpdates).next((e=>{a=e.Ps,l=e.Is}))),!r.isEqual(zs.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next((t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return no.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.os=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Na.get(t);r&&(xs(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?xs(r.va):e.removedDocuments.size>0&&(xs(r.va),r.va=!1))})),await dd(n,e,t)}catch(e){await to(e)}}function td(e,t,n){const r=Cs(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach(((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Cs(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)})),r&&Fh(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function nd(e,t,n){const r=Cs(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new _o(Ks.comparator);e=e.insert(s,ia.newNoDocument(s,zs.min()));const n=ol().add(s),i=new nc(zs.min(),new Map,new _o(Us),e,n);await ed(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),hd(r)}else await Nu(r.localStore,t,!1).then((()=>ad(r,t,n))).catch(to)}async function rd(e,t){const n=Cs(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Cs(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=no.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);xs(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ol();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);od(n,r,null),sd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await dd(n,e)}catch(e){await to(e)}}async function id(e,t,n){const r=Cs(e);try{const e=await function(e,t){const n=Cs(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(xs(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);od(r,t,n),sd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await dd(r,e)}catch(n){await to(n)}}function sd(e,t){(e.ka.get(t)||[]).forEach((e=>{e.resolve()})),e.ka.delete(t)}function od(e,t,n){const r=Cs(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function ad(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach((t=>{e.La.containsKey(t)||ld(e,t)}))}function ld(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(eh(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),hd(e))}function cd(e,t,n){for(const r of n)r instanceof zh?(e.La.addReference(r.key,t),ud(e,r)):r instanceof qh?(bs("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||ld(e,r.key)):Ss()}function ud(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(bs("SyncEngine","New document in limbo: "+n),e.xa.add(r),hd(e))}function hd(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Ks(Hs.fromString(t)),r=e.qa.next();e.Na.set(r,new Wh(n)),e.Oa=e.Oa.insert(n,r),Zu(e.remoteStore,new qc(Fa(Da(n.path)),r,"TargetPurposeLimboResolution",so.oe))}}async function dd(e,t,n){const r=Cs(e),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach(((e,a)=>{o.push(r.Ka(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=bu.Wi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Ca.d_(i),await async function(e,t){const n=Cs(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>no.forEach(t,(t=>no.forEach(t.$i,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>no.forEach(t.Ui,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!io(e))throw e;bs("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function fd(e,t){const n=Cs(e);if(!n.currentUser.isEqual(t)){bs("SyncEngine","User change. New user:",t.toKey());const e=await xu(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach((e=>{e.forEach((e=>{e.reject(new ks(Ts.CANCELLED,t))}))})),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await dd(n,e.hs)}}function pd(e,t){const n=Cs(e),r=n.Na.get(t);if(r&&r.va)return ol().add(r.key);{let e=ol();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function md(e){const t=Cs(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ed.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=pd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=nd.bind(null,t),t.Ca.d_=jh.bind(null,t.eventManager),t.Ca.$a=Mh.bind(null,t.eventManager),t}function gd(e){const t=Cs(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=rd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=id.bind(null,t),t}class yd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Su(this.persistence,new wu,e.initialUser,this.serializer)}Ga(e){return new mu(yu.Zr,this.serializer)}Wa(e){return new Ou}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yd.provider={build:()=>new yd};class vd extends yd{constructor(e){super(),this.cacheSizeBytes=e}ja(e,t){xs(this.persistence.referenceDelegate instanceof vu);const n=this.persistence.referenceDelegate.garbageCollector;return new eu(n,e.asyncQueue,t)}Ga(e){const t=void 0!==this.cacheSizeBytes?Qc.withCacheSize(this.cacheSizeBytes):Qc.DEFAULT;return new mu((e=>vu.Zr(e,t)),this.serializer)}}class bd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>td(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=fd.bind(null,this.syncEngine),await Sh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ph}createDatastore(e){const t=qu(e.databaseInfo.databaseId),n=function(e){return new Bu(e)}(e.databaseInfo);return function(e,t,n,r){return new Gu(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Qu(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>td(this.syncEngine,e,0)),Lu.D()?new Lu:new Du)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Kh(e,t,n,r,i,s);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Cs(e);bs("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Xu(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}bd.provider={build:()=>new bd};class _d{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):_s("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class wd{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ms.UNAUTHENTICATED,this.clientId=Fs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{bs("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(bs("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Ux){const n=kh(Ux,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Ed(e,t){e.asyncQueue.verifyOperationInProgress(),bs("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await xu(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Sd(e,t){e.asyncQueue.verifyOperationInProgress();const n=await xd(e);bs("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Eh(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Eh(t.remoteStore,n))),e._onlineComponents=t}async function xd(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){bs("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ed(e,e._uninitializedComponentsProvider._offline)}catch(Ux){const n=Ux;if(!function(e){return"FirebaseError"===e.name?e.code===Ts.FAILED_PRECONDITION||e.code===Ts.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;ws("Error using user provided cache. Falling back to memory cache: "+n),await Ed(e,new yd)}}else bs("FirestoreClient","Using default OfflineComponentProvider"),await Ed(e,new vd(void 0));return e._offlineComponents}async function Cd(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(bs("FirestoreClient","Using user provided OnlineComponentProvider"),await Sd(e,e._uninitializedComponentsProvider._online)):(bs("FirestoreClient","Using default OnlineComponentProvider"),await Sd(e,new bd))),e._onlineComponents}function Td(e){return Cd(e).then((e=>e.syncEngine))}async function kd(e){const t=await Cd(e),n=t.eventManager;return n.onListen=Gh.bind(null,t.syncEngine),n.onUnlisten=Xh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Yh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Zh.bind(null,t.syncEngine),n}function Id(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Is;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new _d({next:a=>{s.Za(),t.enqueueAndForget((()=>Lh(e,o)));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new ks(Ts.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new ks(Ts.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new Bh(Da(n.path),s,{includeMetadataChanges:!0,_a:!0});return Dh(e,o)}(await kd(e),e.asyncQueue,t,n,r))),r.promise}function Nd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Is;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new _d({next:n=>{s.Za(),t.enqueueAndForget((()=>Lh(e,o))),n.fromCache&&"server"===r.source?i.reject(new ks(Ts.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Bh(n,s,{includeMetadataChanges:!0,_a:!0});return Dh(e,o)}(await kd(e),e.asyncQueue,t,n,r))),r.promise}function Rd(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ad=new Map;function Pd(e,t,n){if(!n)throw new ks(Ts.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Od(e){if(!Ks.isDocumentKey(e))throw new ks(Ts.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Dd(e){if(Ks.isDocumentKey(e))throw new ks(Ts.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ld(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Ss()}function jd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ks(Ts.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ld(e);throw new ks(Ts.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class Md{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ks(Ts.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ks(Ts.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ks(Ts.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rd(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ks(Ts.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ks(Ts.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ks(Ts.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fd{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Md({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ks(Ts.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ks(Ts.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Md(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Rs;switch(e.type){case"firstParty":return new Ds(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ks(Ts.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ad.get(e);t&&(bs("ComponentProvider","Removing Datastore"),Ad.delete(e),t.terminate())}(this),Promise.resolve()}}class Ud{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ud(this.firestore,e,this._query)}}class Vd{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vd(this.firestore,e,this._key)}}class Bd extends Ud{constructor(e,t,n){super(e,t,Da(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vd(this.firestore,null,new Ks(e))}withConverter(e){return new Bd(this.firestore,e,this._path)}}function zd(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=X(e),Pd("collection","path",t),e instanceof Fd){const n=Hs.fromString(t,...r);return Dd(n),new Bd(e,null,n)}{if(!(e instanceof Vd||e instanceof Bd))throw new ks(Ts.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Hs.fromString(t,...r));return Dd(n),new Bd(e.firestore,null,n)}}function qd(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=X(e),1===arguments.length&&(t=Fs.newId()),Pd("doc","path",t),e instanceof Fd){const n=Hs.fromString(t,...r);return Od(n),new Vd(e,null,new Ks(n))}{if(!(e instanceof Vd||e instanceof Bd))throw new ks(Ts.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Hs.fromString(t,...r));return Od(n),new Vd(e.firestore,e instanceof Bd?e.converter:null,new Ks(n))}}class Hd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Hu(this,"async_queue_retry"),this.Vu=()=>{const e=zu();e&&bs("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=zu();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=zu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Is;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(Fx){if(!io(Fx))throw Fx;bs("AsyncQueue","Operation failed with retryable error: "+Fx)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw _s("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.du=!1,e))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Th.createAndSchedule(this,e,t,n,(e=>this.yu(e)));return this.Tu.push(r),r}fu(){this.Eu&&Ss()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function $d(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Wd extends Fd{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Hd,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hd(e),this._firestoreClient=void 0,await e}}}function Kd(e){if(e._terminated)throw new ks(Ts.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Gd(e),e._firestoreClient}function Gd(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Lo(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Rd(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new wd(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Yd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yd(ko.fromBase64String(e))}catch(e){throw new ks(Ts.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Yd(ko.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qd{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ks(Ts.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ws(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Jd{constructor(e){this._methodName=e}}class Xd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ks(Ts.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ks(Ts.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Us(this._lat,e._lat)||Us(this._long,e._long)}}class Zd{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const ef=/^__.*__$/;class tf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ll(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dl(e,this.data,t,this.fieldTransforms)}}class nf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ll(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ss()}}class sf{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new sf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Cf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(rf(this.Cu)&&ef.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class of{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||qu(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new sf({Cu:e,methodName:t,qu:n,path:Ws.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function af(e){const t=e._freezeSettings(),n=qu(e._databaseId);return new of(e._databaseId,!!t.ignoreUndefinedProperties,n)}function lf(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);wf("Data must be an object, but it was:",o,r);const a=bf(r,o);let l,c;if(s.merge)l=new Co(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Ef(t,r,n);if(!o.contains(i))throw new ks(Ts.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Tf(e,i)||e.push(i)}l=new Co(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new tf(new na(a),l,c)}class cf extends Jd{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cf}}function uf(e,t,n){return new sf({Cu:3,qu:t.settings.qu,methodName:e._methodName,xu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class hf extends Jd{_toFieldTransform(e){return new xl(e.path,new gl)}isEqual(e){return e instanceof hf}}class df extends Jd{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=uf(this,e,!0),n=this.Ku.map((e=>vf(e,t))),r=new yl(n);return new xl(e.path,r)}isEqual(e){return e instanceof df&&z(this.Ku,e.Ku)}}class ff extends Jd{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=uf(this,e,!0),n=this.Ku.map((e=>vf(e,t))),r=new bl(n);return new xl(e.path,r)}isEqual(e){return e instanceof ff&&z(this.Ku,e.Ku)}}class pf extends Jd{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new wl(e.serializer,hl(e.serializer,this.$u));return new xl(e.path,t)}isEqual(e){return e instanceof pf&&this.$u===e.$u}}function mf(e,t,n,r){const i=e.Qu(1,t,n);wf("Data must be an object, but it was:",i,r);const s=[],o=na.empty();vo(r,((e,r)=>{const a=xf(t,e,n);r=X(r);const l=i.Nu(a);if(r instanceof cf)s.push(a);else{const e=vf(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Co(s);return new nf(o,a,i.fieldTransforms)}function gf(e,t,n,r,i,s){const o=e.Qu(1,t,n),a=[Ef(t,r,n)],l=[i];if(s.length%2!=0)throw new ks(Ts.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Ef(t,s[d])),l.push(s[d+1]);const c=[],u=na.empty();for(let d=a.length-1;d>=0;--d)if(!Tf(c,a[d])){const e=a[d];let t=l[d];t=X(t);const n=o.Nu(e);if(t instanceof cf)c.push(e);else{const r=vf(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Co(c);return new nf(u,h,o.fieldTransforms)}function yf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return vf(n,e.Qu(r?4:3,t))}function vf(e,t){if(_f(e=X(e)))return wf("Unsupported field value:",t,e),bf(e,t);if(e instanceof Jd)return function(e,t){if(!rf(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=vf(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=X(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return hl(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Bs.fromDate(e);return{timestampValue:gc(t.serializer,n)}}if(e instanceof Bs){const n=new Bs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:gc(t.serializer,n)}}if(e instanceof Xd)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Yd)return{bytesValue:yc(t.serializer,e._byteString)};if(e instanceof Vd){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:_c(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Zd)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return cl(t.serializer,e)}))}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${Ld(e)}`)}(e,t)}function bf(e,t){const n={};return bo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vo(e,((e,r)=>{const i=vf(r,t.Mu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function _f(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Bs||e instanceof Xd||e instanceof Yd||e instanceof Vd||e instanceof Jd||e instanceof Zd)}function wf(e,t,n){if(!_f(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ld(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Ef(e,t,n){if((t=X(t))instanceof Qd)return t._internalPath;if("string"==typeof t)return xf(e,t);throw Cf("Field path arguments must be of type string or ",e,!1,void 0,n)}const Sf=new RegExp("[~\\*/\\[\\]]");function xf(e,t,n){if(t.search(Sf)>=0)throw Cf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Qd(...t.split("."))._internalPath}catch(r){throw Cf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Cf(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ks(Ts.INVALID_ARGUMENT,a+e+l)}function Tf(e,t){return e.some((e=>e.isEqual(t)))}class kf{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Vd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new If(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Nf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class If extends kf{data(){return super.data()}}function Nf(e,t){return"string"==typeof t?xf(e,t):t instanceof Qd?t._internalPath:t._delegate._internalPath}function Rf(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ks(Ts.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Af{}class Pf extends Af{}function Of(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Af&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof jf)).length,n=e.filter((e=>e instanceof Df)).length;if(t>1||t>0&&n>0)throw new ks(Ts.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Df extends Pf{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Df(e,t,n)}_apply(e){const t=this._parse(e);return Bf(e._query,t),new Ud(e.firestore,e.converter,Va(e._query,t))}_parse(e){const t=af(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ks(Ts.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Vf(o,s);const t=[];for(const n of o)t.push(Uf(r,e,n));a={arrayValue:{values:t}}}else a=Uf(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Vf(o,s),a=yf(n,t,o,"in"===s||"not-in"===s);return ha.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Lf(e,t,n){const r=t,i=Nf("where",e);return Df._create(i,r,n)}class jf extends Af{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jf(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:da.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Bf(n,i),n=Va(n,i)}(e._query,t),new Ud(e.firestore,e.converter,Va(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Mf extends Pf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Mf(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ks(Ts.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ks(Ts.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new la(t,n)}(e._query,this._field,this._direction);return new Ud(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Pa(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Ff(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Nf("orderBy",e);return Mf._create(n,t)}function Uf(e,t,n){if("string"==typeof(n=X(n))){if(""===n)throw new ks(Ts.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ja(t)&&-1!==n.indexOf("/"))throw new ks(Ts.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Hs.fromString(n));if(!Ks.isDocumentKey(r))throw new ks(Ts.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ko(e,new Ks(r))}if(n instanceof Vd)return Ko(e,n._key);throw new ks(Ts.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ld(n)}.`)}function Vf(e,t){if(!Array.isArray(e)||0===e.length)throw new ks(Ts.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Bf(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ks(Ts.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ks(Ts.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function zf(e,t){if(!(t instanceof Df||t instanceof jf))throw new ks(Ts.INVALID_ARGUMENT,`Function ${e}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class qf{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ro(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ss()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return vo(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>Ro(e.doubleValue)));return new Zd(i)}convertGeoPoint(e){return new Xd(Ro(e.latitude),Ro(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Oo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Do(e));default:return null}}convertTimestamp(e){const t=No(e);return new Bs(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Hs.fromString(e);xs(zc(n));const r=new jo(n.get(1),n.get(3)),i=new Ks(n.popFirst(5));return r.isEqual(t)||_s(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Hf(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class $f{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wf extends kf{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Kf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Nf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Kf extends Wf{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Gf{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new $f(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Kf(this._firestore,this._userDataWriter,n.key,n,new $f(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ks(Ts.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Kf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new $f(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Kf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new $f(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Yf(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Yf(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ss()}}function Qf(e){e=jd(e,Vd);const t=jd(e.firestore,Wd);return Id(Kd(t),e._key).then((n=>ip(t,e,n)))}class Jf extends qf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vd(this.firestore,null,t)}}function Xf(e){e=jd(e,Ud);const t=jd(e.firestore,Wd),n=Kd(t),r=new Jf(t);return Rf(e._query),Nd(n,e._query).then((n=>new Gf(t,r,e,n)))}function Zf(e,t,n){e=jd(e,Vd);const r=jd(e.firestore,Wd),i=af(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=X(t))||t instanceof Qd?gf(i,"updateDoc",e._key,t,n,a):mf(i,"updateDoc",e._key,t),rp(r,[s.toMutation(e._key,Tl.exists(!0))])}function ep(e){return rp(jd(e.firestore,Wd),[new Ul(e._key,Tl.none())])}function tp(e,t){const n=jd(e.firestore,Wd),r=qd(e),i=Hf(e.converter,t);return rp(n,[lf(af(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Tl.exists(!1))]).then((()=>r))}function np(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=X(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||$d(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if($d(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof Vd)h=jd(e.firestore,Wd),d=Da(e._key.path),u={next:t=>{n[l]&&n[l](ip(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=jd(e,Ud);h=jd(t.firestore,Wd),d=t._query;const r=new Jf(h);u={next:e=>{n[l]&&n[l](new Gf(h,r,t,e))},error:n[l+1],complete:n[l+2]},Rf(e._query)}return function(e,t,n,r){const i=new _d(r),s=new Bh(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Dh(await kd(e),s))),()=>{i.Za(),e.asyncQueue.enqueueAndForget((async()=>Lh(await kd(e),s)))}}(Kd(h),d,c,u)}function rp(e,t){return function(e,t){const n=new Is;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=gd(e);try{const e=await function(e,t){const n=Cs(e),r=Bs.now(),i=t.reduce(((e,t)=>e.add(t.key)),ol());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Ja(),l=ol();return n.cs.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Pl(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Ll(e.key,t,ra(t.value.mapValue),Tl.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:el(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new _o(Us)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await dd(r,e.changes),await fh(r.remoteStore)}catch(e){const t=kh(e,"Failed to persist write");n.reject(t)}}(await Td(e),t,n))),n.promise}(Kd(e),t)}function ip(e,t,n){const r=n.docs.get(t._key),i=new Jf(e);return new Wf(e,i,t._key,r,new $f(n.hasPendingWrites,n.fromCache),t.converter)}function sp(){return new hf("serverTimestamp")}function op(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new df("arrayUnion",t)}function ap(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ff("arrayRemove",t)}function lp(e){return new pf("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){gs=e}(pt),ct(new Z("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Wd(new Ps(e.getProvider("auth-internal")),new js(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ks(Ts.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jo(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),yt(ps,"4.7.4",e),yt(ps,"4.7.4","esm2017")}();const cp="firebasestorage.googleapis.com",up="storageBucket";class hp extends P{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(pp(e),`Firebase Storage: ${t} (${pp(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hp.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return pp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var dp,fp;function pp(e){return"storage/"+e}function mp(){return new hp(dp.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function gp(){return new hp(dp.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yp(){return new hp(dp.CANCELED,"User canceled the upload/download.")}function vp(){return new hp(dp.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bp(e){return new hp(dp.INVALID_ARGUMENT,e)}function _p(){return new hp(dp.APP_DELETED,"The Firebase app was deleted.")}function wp(e,t){return new hp(dp.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Ep(e){throw new hp(dp.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(dp||(dp={}));class Sp{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Sp.makeFromUrl(e,t)}catch(Fx){return new Sp(e,"")}if(""===n.path)return n;throw r=e,new hp(dp.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===cp?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Sp(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new hp(dp.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class xp{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Cp(e){return"string"===typeof e||e instanceof String}function Tp(e){return kp()&&e instanceof Blob}function kp(){return"undefined"!==typeof Blob}function Ip(e,t,n,r){if(r<t)throw bp(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw bp(`Invalid value for '${e}'. Expected ${n} or less.`)}function Np(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Rp(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Ap(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(fp||(fp={}));class Pp{constructor(e,t,n,r,i,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Op(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===fp.NO_ERROR,i=n.getStatus();if(!t||Ap(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===fp.ABORT;return void e(!1,new Op(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Op(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(Fx){r(Fx)}else if(null!==i){const e=mp();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?_p():yp())}else{r(gp())}};this.canceled_?t(0,new Op(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function m(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Op{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Dp(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Lp(){const e=Dp();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(kp())return new Blob(n);throw new hp(dp.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function jp(e){if("undefined"===typeof atob)throw t="base-64",new hp(dp.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const Mp="raw",Fp="base64",Up="base64url",Vp="data_url";class Bp{constructor(e,t){this.data=e,this.contentType=t||null}}function zp(e,t){switch(e){case Mp:return new Bp(qp(t));case Fp:case Up:return new Bp(Hp(e,t));case Vp:return new Bp(function(e){const t=new $p(e);return t.base64?Hp(Fp,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(Fx){throw wp(Vp,"Malformed data URL.")}return qp(t)}(t.rest)}(t),new $p(t).contentType)}throw mp()}function qp(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Hp(e,t){switch(e){case Fp:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw wp(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Up:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw wp(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=jp(t)}catch(Fx){if(Fx.message.includes("polyfill"))throw Fx;throw wp(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class $p{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw wp(Vp,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Wp{constructor(e,t){let n=0,r="";Tp(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Tp(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Wp(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Wp(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(kp()){const e=t.map((e=>e instanceof Wp?e.data_:e));return new Wp(Lp.apply(null,e))}{const e=t.map((e=>Cp(e)?zp(Mp,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Wp(r,!0)}}uploadData(){return this.data_}}function Kp(e){let t;try{t=JSON.parse(e)}catch(Fx){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Gp(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Yp(e,t){return t}class Qp{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Yp}}let Jp=null;function Xp(){if(Jp)return Jp;const e=[];e.push(new Qp("bucket")),e.push(new Qp("generation")),e.push(new Qp("metageneration")),e.push(new Qp("name","fullPath",!0));const t=new Qp("name");t.xform=function(e,t){return function(e){return!Cp(e)||e.length<2?e:Gp(e)}(t)},e.push(t);const n=new Qp("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Qp("timeCreated")),e.push(new Qp("updated")),e.push(new Qp("md5Hash",null,!0)),e.push(new Qp("cacheControl",null,!0)),e.push(new Qp("contentDisposition",null,!0)),e.push(new Qp("contentEncoding",null,!0)),e.push(new Qp("contentLanguage",null,!0)),e.push(new Qp("contentType",null,!0)),e.push(new Qp("metadata","customMetadata",!0)),Jp=e,Jp}function Zp(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new Sp(n,r);return t._makeStorageReference(i)}})}(r,e),r}function em(e,t,n){const r=Kp(t);if(null===r)return null;return Zp(e,r,n)}function tm(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class nm{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function rm(e){if(!e)throw mp()}function im(e,t){return function(n,r){const i=em(e,r,t);return rm(null!==i),i}}function sm(e,t){return function(n,r){const i=em(e,r,t);return rm(null!==i),function(e,t,n,r){const i=Kp(t);if(null===i)return null;if(!Cp(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent,a=s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return Np("/b/"+o(i)+"/o/"+o(s),n,r)+Rp({alt:"media",token:t})}));return a[0]}(i,r,e.host,e._protocol)}}function om(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new hp(dp.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new hp(dp.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new hp(dp.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new hp(dp.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function am(e){const t=om(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new hp(dp.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function lm(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function cm(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=lm(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+tm(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=Wp.getBlob(c,r,u);if(null===h)throw vp();const d={name:l.fullPath},f=Np(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new nm(f,"POST",im(e,n),p);return m.urlParams=d,m.headers=o,m.body=h.uploadData(),m.errorHandler=om(t),m}class um{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fp.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=fp.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=fp.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw Ep("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ep("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ep("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Fx){return-1}}getResponse(){if(!this.sent_)throw Ep("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ep("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class hm extends um{initXhr(){this.xhr_.responseType="text"}}function dm(){return new hm}class fm{constructor(e,t){this._service=e,this._location=t instanceof Sp?t:Sp.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new fm(e,t)}get root(){const e=new Sp(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Gp(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Sp(this._location.bucket,e);return new fm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new hp(dp.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function pm(e,t,n){e._throwIfRoot("uploadBytes");const r=cm(e.storage,e._location,Xp(),new Wp(t,!0),n);return e.storage.makeRequestWithTokens(r,dm).then((t=>({metadata:t,ref:e})))}function mm(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Np(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new nm(r,"GET",sm(e,n),i);return s.errorHandler=am(t),s}(e.storage,e._location,Xp());return e.storage.makeRequestWithTokens(t,dm).then((e=>{if(null===e)throw new hp(dp.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function gm(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Sp(e._location.bucket,n);return new fm(e.storage,r)}function ym(e,t){if(e instanceof _m){const n=e;if(null==n._bucket)throw new hp(dp.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+up+"' property when initializing the app?");const r=new fm(n,n._bucket);return null!=t?ym(r,t):r}return void 0!==t?gm(e,t):e}function vm(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof _m)return new fm(e,t);throw bp("To use ref(service, url), the first argument must be a Storage instance.")}return ym(e,t)}function bm(e,t){const n=null===t||void 0===t?void 0:t[up];return null==n?null:Sp.makeFromBucketSpec(n,e)}class _m{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=cp,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Sp.makeFromBucketSpec(r,this._host):bm(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Sp.makeFromBucketSpec(this._url,e):this._bucket=bm(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ip("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ip("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fm(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new xp(_p());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=Rp(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Pp(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const wm="@firebase/storage",Em="0.13.3",Sm="storage";function xm(e,t,n){return pm(e=X(e),t,n)}function Cm(e){return mm(e=X(e))}function Tm(e,t){return vm(e=X(e),t)}function km(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new _m(r,i,s,n,pt)}ct(new Z(Sm,km,"PUBLIC").setMultipleInstances(!0)),yt(wm,Em,""),yt(wm,Em,"esm2017");const Im="@firebase/database",Nm="1.0.9";let Rm="";function Am(e){Rm=e}class Pm{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),j(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:L(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Om{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return F(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Dm=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Pm(t)}}catch(Fx){}return new Om},Lm=Dm("localStorage"),jm=Dm("sessionStorage"),Mm=new ue("@firebase/database"),Fm=function(){let e=1;return function(){return e++}}(),Um=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,l(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new K;n.update(t);const r=n.digest();return h.encodeByteArray(r)},Vm=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=Vm.apply(null,n):e+="object"===typeof n?j(n):n,e+=" "}return e};let Bm=null,zm=!0;const qm=function(e,t){l(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Mm.logLevel=se.VERBOSE,Bm=Mm.log.bind(Mm),t&&jm.set("logging_enabled",!0)):"function"===typeof e?Bm=e:(Bm=null,jm.remove("logging_enabled"))},Hm=function(){if(!0===zm&&(zm=!1,null===Bm&&!0===jm.get("logging_enabled")&&qm(!0)),Bm){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Vm.apply(null,t);Bm(r)}},$m=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Hm(e,...n)}},Wm=function(){const e="FIREBASE INTERNAL ERROR: "+Vm(...arguments);Mm.error(e)},Km=function(){const e=`FIREBASE FATAL ERROR: ${Vm(...arguments)}`;throw Mm.error(e),new Error(e)},Gm=function(){const e="FIREBASE WARNING: "+Vm(...arguments);Mm.warn(e)},Ym=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Qm="[MIN_NAME]",Jm="[MAX_NAME]",Xm=function(e,t){if(e===t)return 0;if(e===Qm||t===Jm)return-1;if(t===Qm||e===Jm)return 1;{const n=og(e),r=og(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Zm=function(e,t){return e===t?0:e<t?-1:1},eg=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+j(t))},tg=function(e){if("object"!==typeof e||null===e)return j(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=j(t[r]),n+=":",n+=tg(e[t[r]]);return n+="}",n},ng=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function rg(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const ig=function(e){l(!Ym(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const c=a.join("");let u="";for(o=0;o<64;o+=8){let e=parseInt(c.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),u+=e}return u.toLowerCase()};const sg=new RegExp("^-?(0*)\\d{1,10}$"),og=function(e){if(sg.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ag=function(e){try{e()}catch(Fx){setTimeout((()=>{const t=Fx.stack||"";throw Gm("Exception was thrown by user callback.",t),Fx}),Math.floor(0))}},lg=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class cg{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Gm(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ug{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Hm("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Gm(e)}}class hg{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}hg.OWNER="owner";const dg="5",fg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pg="ac",mg="websocket",gg="long_polling";class yg{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Lm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Lm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function vg(e,t,n){let r;if(l("string"===typeof t,"typeof type must == string"),l("object"===typeof n,"typeof params must == object"),t===mg)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==gg)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return rg(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class bg{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;F(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return g(this.counters_)}}const _g={},wg={};function Eg(e){const t=e.toString();return _g[t]||(_g[t]=new bg),_g[t]}class Sg{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&ag((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const xg="start";class Cg{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$m(e),this.stats_=Eg(t),this.urlFn=e=>(this.appCheckToken&&(e[pg]=this.appCheckToken),vg(t,gg,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Sg(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(N()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Tg((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===xg)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[xg]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=dg,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[pg]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&fg.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Cg.forceAllow_=!0}static forceDisallow(){Cg.forceDisallow_=!0}static isAvailable(){return!N()&&(!!Cg.forceAllow_||!Cg.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=j(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=f(t),r=ng(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(N())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=j(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Tg{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,N())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Fm(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Tg.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(Fx){Hm("frame writing exception"),Fx.stack&&Hm(Fx.stack),Hm(Fx)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Hm("No IE domain setting required")}catch(Fx){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){N()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Hm("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(Fx){}}),Math.floor(1))}}let kg=null;"undefined"!==typeof MozWebSocket?kg=MozWebSocket:"undefined"!==typeof WebSocket&&(kg=WebSocket);class Ig{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$m(this.connId),this.stats_=Eg(t),this.connURL=Ig.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=dg,!N()&&"undefined"!==typeof location&&location.hostname&&fg.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[pg]=r),i&&(s.p=i),vg(e,mg,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Lm.set("previous_websocket_failure",!0);try{let e;if(N()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${dg}/${Rm}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAWLn1bc_sregpLCEw2SDYgm3_UNE8Y-SA",REACT_APP_FIREBASE_APP_ID:"1:683690908711:web:832832fefb01be07eb8202",REACT_APP_FIREBASE_AUTH_DOMAIN:"milan-400c7.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-RWWM318TXZ",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"683690908711",REACT_APP_FIREBASE_PROJECT_ID:"milan-400c7",REACT_APP_FIREBASE_STORAGE_BUCKET:"milan-400c7.appspot.com"},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new kg(this.connURL,[],e)}catch(Fx){this.log_("Error instantiating WebSocket.");const t=Fx.message||Fx.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Ig.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==kg&&!Ig.forceDisallow_}static previouslyFailed(){return Lm.isInMemoryStorage||!0===Lm.get("previous_websocket_failure")}markConnectionHealthy(){Lm.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=L(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(l(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=j(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=ng(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(Fx){this.log_("Exception thrown from WebSocket.send():",Fx.message||Fx.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ig.responsesRequiredToBeHealthy=2,Ig.healthyTimeout=3e4;class Ng{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Cg,Ig]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Ig&&Ig.isAvailable();let n=t&&!Ig.previouslyFailed();if(e.webSocketOnly&&(t||Gm("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Ig];else{const e=this.transports_=[];for(const t of Ng.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Ng.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ng.globalTransportInitialized_=!1;class Rg{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$m("c:"+this.id+":"),this.transportManager_=new Ng(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=lg((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=eg("t",e),n=eg("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=eg("t",e),n=eg("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=eg("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Wm("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Wm("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),dg!==n&&Gm("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),lg((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):lg((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Lm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ag{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Pg{constructor(e){this.allowedEvents_=e,this.listeners_={},l(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){l(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class Og extends Pg{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||k()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new Og}getInitialEvent(e){return l("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Dg{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Lg(){return new Dg("")}function jg(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Mg(e){return e.pieces_.length-e.pieceNum_}function Fg(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Dg(e.pieces_,t)}function Ug(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Vg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Bg(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Dg(t,0)}function zg(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Dg)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Dg(n,0)}function qg(e){return e.pieceNum_>=e.pieces_.length}function Hg(e,t){const n=jg(e),r=jg(t);if(null===n)return t;if(n===r)return Hg(Fg(e),Fg(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function $g(e,t){const n=Vg(e,0),r=Vg(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=Xm(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function Wg(e,t){if(Mg(e)!==Mg(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Kg(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Mg(e)>Mg(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Gg{constructor(e,t){this.errorPrefix_=t,this.parts_=Vg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=J(this.parts_[n]);Yg(this)}}function Yg(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Qg(e))}function Qg(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Jg extends Pg{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Jg}getInitialEvent(e){return l("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Xg=1e3;class Zg extends Ag{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=Zg.nextPersistentConnectionId_++,this.log_=$m("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Xg,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!N())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Jg.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Og.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(j(i)),l(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new x,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),l(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),l(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;Zg.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&F(e,"w")){const n=U(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Gm(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=M(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=M(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),l(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+j(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Wm("Unrecognized action received from server: "+j(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){l(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xg,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Xg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Xg),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Zg.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},c=function(e){l(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);s?Hm("getToken() completed but was canceled"):(Hm("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new Rg(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Gm(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(Wm){this.log_("Failed to get token: "+Wm),s||(this.repoInfo_.nodeAdmin&&Gm(Wm),a())}}}interrupt(e){Hm("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Hm("Resuming connection for reason: "+e),delete this.interruptReasons_[e],V(this.interruptReasons_)&&(this.reconnectDelay_=Xg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>tg(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new Dg(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Hm("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Hm("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";N()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Rm.replace(/\./g,"-")]=1,k()?e["framework.cordova"]=1:I()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Og.getInstance().currentlyOnline();return V(this.interruptReasons_)&&e}}Zg.nextPersistentConnectionId_=0,Zg.nextConnectionId_=0;class ey{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ey(e,t)}}class ty{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new ey(Qm,e),r=new ey(Qm,t);return 0!==this.compare(n,r)}minPost(){return ey.MIN}}let ny;class ry extends ty{static get __EMPTY_NODE(){return ny}static set __EMPTY_NODE(e){ny=e}compare(e,t){return Xm(e.name,t.name)}isDefinedOn(e){throw c("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ey.MIN}maxPost(){return new ey(Jm,ny)}makePost(e,t){return l("string"===typeof e,"KeyIndex indexValue must always be a string."),new ey(e,ny)}toString(){return".key"}}const iy=new ry;class sy{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class oy{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:oy.RED,this.left=null!=r?r:ay.EMPTY_NODE,this.right=null!=i?i:ay.EMPTY_NODE}copy(e,t,n,r,i){return new oy(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ay.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ay.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,oy.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,oy.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}oy.RED=!0,oy.BLACK=!1;class ay{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ay.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new ay(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,oy.BLACK,null,null))}remove(e){return new ay(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,oy.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new sy(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new sy(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new sy(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new sy(this.root_,null,this.comparator_,!0,e)}}function ly(e,t){return Xm(e.name,t.name)}function cy(e,t){return Xm(e,t)}let uy;ay.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new oy(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const hy=function(e){return"number"===typeof e?"number:"+ig(e):"string:"+e},dy=function(e){if(e.isLeafNode()){const t=e.val();l("string"===typeof t||"number"===typeof t||"object"===typeof t&&F(t,".sv"),"Priority must be a string or number.")}else l(e===uy||e.isEmpty(),"priority of unexpected type.");l(e===uy||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let fy,py,my;class gy{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gy.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,l(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),dy(this.priorityNode_)}static set __childrenNodeConstructor(e){fy=e}static get __childrenNodeConstructor(){return fy}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new gy(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:gy.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return qg(e)?this:".priority"===jg(e)?this.priorityNode_:gy.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:gy.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=jg(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(l(".priority"!==n||1===Mg(e),".priority must be the last token in a path"),this.updateImmediateChild(n,gy.__childrenNodeConstructor.EMPTY_NODE.updateChild(Fg(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+hy(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?ig(this.value_):this.value_,this.lazyHash_=Um(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===gy.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof gy.__childrenNodeConstructor?-1:(l(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=gy.VALUE_TYPE_ORDER.indexOf(t),i=gy.VALUE_TYPE_ORDER.indexOf(n);return l(r>=0,"Unknown leaf type: "+t),l(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}gy.VALUE_TYPE_ORDER=["object","boolean","number","string"];const yy=new class extends ty{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Xm(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ey.MIN}maxPost(){return new ey(Jm,new gy("[PRIORITY-POST]",my))}makePost(e,t){const n=py(e);return new ey(t,new gy("[PRIORITY-POST]",n))}toString(){return".priority"}},vy=Math.log(2);class by{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/vy,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _y=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new oy(a,o.node,oy.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new oy(a,o.node,oy.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new oy(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,oy.BLACK):(a(r,oy.BLACK),a(r,oy.RED))}return s}(new by(e.length));return new ay(r||t,s)};let wy;const Ey={};class Sy{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return l(Ey&&yy,"ChildrenNode.ts has not been loaded"),wy=wy||new Sy({".priority":Ey},{".priority":yy}),wy}get(e){const t=U(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ay?t:null}hasIndex(e){return F(this.indexSet_,e.toString())}addIndex(e,t){l(e!==iy,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(ey.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?_y(n,e.getCompare()):Ey;const a=e.toString(),c=Object.assign({},this.indexSet_);c[a]=e;const u=Object.assign({},this.indexes_);return u[a]=s,new Sy(u,c)}addToIndexes(e,t){const n=B(this.indexes_,((n,r)=>{const i=U(this.indexSet_,r);if(l(i,"Missing index implementation for "+r),n===Ey){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(ey.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),_y(n,i.getCompare())}return Ey}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new ey(e.name,r))),i.insert(e,e.node)}}));return new Sy(n,this.indexSet_)}removeFromIndexes(e,t){const n=B(this.indexes_,(n=>{if(n===Ey)return n;{const r=t.get(e.name);return r?n.remove(new ey(e.name,r)):n}}));return new Sy(n,this.indexSet_)}}let xy;class Cy{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&dy(this.priorityNode_),this.children_.isEmpty()&&l(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xy||(xy=new Cy(new ay(cy),null,Sy.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xy}updatePriority(e){return this.children_.isEmpty()?this:new Cy(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?xy:t}}getChild(e){const t=jg(e);return null===t?this:this.getImmediateChild(t).getChild(Fg(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(l(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new ey(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?xy:this.priorityNode_;return new Cy(r,s,i)}}updateChild(e,t){const n=jg(e);if(null===n)return t;{l(".priority"!==jg(e)||1===Mg(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(Fg(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(yy,((s,o)=>{t[s]=o.val(e),n++,i&&Cy.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+hy(this.getPriority().val())+":"),this.forEachChild(yy,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Um(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new ey(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new ey(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new ey(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,ey.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,ey.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ty?-1:0}withIndex(e){if(e===iy||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Cy(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===iy||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(yy),n=t.getIterator(yy);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===iy?null:this.indexMap_.get(e.toString())}}Cy.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Ty=new class extends Cy{constructor(){super(new ay(cy),Cy.EMPTY_NODE,Sy.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Cy.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(ey,{MIN:{value:new ey(Qm,Cy.EMPTY_NODE)},MAX:{value:new ey(Jm,Ty)}}),ry.__EMPTY_NODE=Cy.EMPTY_NODE,gy.__childrenNodeConstructor=Cy,uy=Ty,function(e){my=e}(Ty);function ky(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Cy.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),l(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new gy(e,ky(t))}if(e instanceof Array){let n=Cy.EMPTY_NODE;return rg(e,((t,r)=>{if(F(e,t)&&"."!==t.substring(0,1)){const e=ky(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(ky(t))}{const n=[];let r=!1;if(rg(e,((e,t)=>{if("."!==e.substring(0,1)){const i=ky(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new ey(e,i)))}})),0===n.length)return Cy.EMPTY_NODE;const i=_y(n,ly,(e=>e.name),cy);if(r){const e=_y(n,yy.getCompare());return new Cy(i,ky(t),new Sy({".priority":e},{".priority":yy}))}return new Cy(i,ky(t),Sy.Default)}}!function(e){py=e}(ky);class Iy extends ty{constructor(e){super(),this.indexPath_=e,l(!qg(e)&&".priority"!==jg(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Xm(e.name,t.name):i}makePost(e,t){const n=ky(e),r=Cy.EMPTY_NODE.updateChild(this.indexPath_,n);return new ey(t,r)}maxPost(){const e=Cy.EMPTY_NODE.updateChild(this.indexPath_,Ty);return new ey(Jm,e)}toString(){return Vg(this.indexPath_,0).join("/")}}const Ny=new class extends ty{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Xm(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ey.MIN}maxPost(){return ey.MAX}makePost(e,t){const n=ky(e);return new ey(t,n)}toString(){return".value"}};function Ry(e){return{type:"value",snapshotNode:e}}function Ay(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Py(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Oy(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Dy{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){l(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Py(t,o)):l(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Ay(t,n)):s.trackChildChange(Oy(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(yy,((e,r)=>{t.hasChild(e)||n.trackChildChange(Py(e,r))})),t.isLeafNode()||t.forEachChild(yy,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Oy(t,r,i))}else n.trackChildChange(Ay(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Cy.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ly{constructor(e){this.indexedFilter_=new Dy(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ly.getStartPost_(e),this.endPost_=Ly.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new ey(t,n))||(n=Cy.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Cy.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Cy.EMPTY_NODE);const i=this;return t.forEachChild(yy,((e,t)=>{i.matches(new ey(e,t))||(r=r.updateImmediateChild(e,Cy.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class jy{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Ly(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new ey(t,n))||(n=Cy.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=Cy.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=Cy.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(Cy.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,Cy.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;l(o.numChildren()===this.limit_,"");const a=new ey(t,n),c=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),u=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let l=r.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=l&&(l.name===t||o.hasChild(l.name));)l=r.getChildAfterChild(this.index_,l,this.reverse_);const h=null==l?1:s(l,a);if(u&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(Oy(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Py(t,e));const n=o.updateImmediateChild(t,Cy.EMPTY_NODE);return null!=l&&this.rangedFilter_.matches(l)?(null!=i&&i.trackChildChange(Ay(l.name,l.node)),n.updateImmediateChild(l.name,l.node)):n}}return n.isEmpty()?e:u&&s(c,a)>=0?(null!=i&&(i.trackChildChange(Py(c.name,c.node)),i.trackChildChange(Ay(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(c.name,Cy.EMPTY_NODE)):e}}class My{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yy}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return l(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return l(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qm}hasEnd(){return this.endSet_}getIndexEndValue(){return l(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return l(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Jm}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return l(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===yy}copy(){const e=new My;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Fy(e){const t={};if(e.isDefault())return t;let n;if(e.index_===yy?n="$priority":e.index_===Ny?n="$value":e.index_===iy?n="$key":(l(e.index_ instanceof Iy,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=j(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=j(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+j(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=j(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+j(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Uy(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==yy&&(t.i=e.index_.toString()),t}class Vy extends Ag{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=$m("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(l(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=Vy.getListenId_(e,n),o={};this.listens_[s]=o;const a=Fy(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),U(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=Vy.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Fy(e._queryParams),n=e._path.toString(),r=new x;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+H(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=L(a.responseText)}catch(Fx){Gm("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&Gm("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class By{constructor(){this.rootNode_=Cy.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function zy(){return{value:null,children:new Map}}function qy(e,t,n){if(qg(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=jg(t);e.children.has(r)||e.children.set(r,zy());qy(e.children.get(r),t=Fg(t),n)}}function Hy(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Hy(r,new Dg(t.toString()+"/"+e),n)}))}class $y{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&rg(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Wy{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new $y(e);const n=1e4+2e4*Math.random();lg(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;rg(e,((e,r)=>{r>0&&F(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),lg(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ky;function Gy(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ky||(Ky={}));class Yy{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Ky.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(qg(this.path)){if(null!=this.affectedTree.value)return l(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Dg(e));return new Yy(Lg(),t,this.revert)}}return l(jg(this.path)===e,"operationForChild called for unrelated child."),new Yy(Fg(this.path),this.affectedTree,this.revert)}}class Qy{constructor(e,t){this.source=e,this.path=t,this.type=Ky.LISTEN_COMPLETE}operationForChild(e){return qg(this.path)?new Qy(this.source,Lg()):new Qy(this.source,Fg(this.path))}}class Jy{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Ky.OVERWRITE}operationForChild(e){return qg(this.path)?new Jy(this.source,Lg(),this.snap.getImmediateChild(e)):new Jy(this.source,Fg(this.path),this.snap)}}class Xy{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Ky.MERGE}operationForChild(e){if(qg(this.path)){const t=this.children.subtree(new Dg(e));return t.isEmpty()?null:t.value?new Jy(this.source,Lg(),t.value):new Xy(this.source,Lg(),t)}return l(jg(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Xy(this.source,Fg(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Zy{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(qg(e))return this.isFullyInitialized()&&!this.filtered_;const t=jg(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class ev{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function tv(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw c("Should only compare child_ events.");const r=new ey(t.childName,t.snapshotNode),i=new ey(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function nv(e,t){return{eventCache:e,serverCache:t}}function rv(e,t,n,r){return nv(new Zy(t,n,r),e.serverCache)}function iv(e,t,n,r){return nv(e.eventCache,new Zy(t,n,r))}function sv(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ov(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let av;class lv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(av||(av=new ay(Zm)),av);this.value=e,this.children=t}static fromObject(e){let t=new lv(null);return rg(e,((e,n)=>{t=t.set(new Dg(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Lg(),value:this.value};if(qg(e))return null;{const n=jg(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(Fg(e),t);if(null!=i){return{path:zg(new Dg(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(qg(e))return this;{const t=jg(e),n=this.children.get(t);return null!==n?n.subtree(Fg(e)):new lv(null)}}set(e,t){if(qg(e))return new lv(t,this.children);{const n=jg(e),r=(this.children.get(n)||new lv(null)).set(Fg(e),t),i=this.children.insert(n,r);return new lv(this.value,i)}}remove(e){if(qg(e))return this.children.isEmpty()?new lv(null):new lv(null,this.children);{const t=jg(e),n=this.children.get(t);if(n){const r=n.remove(Fg(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new lv(null):new lv(this.value,i)}return this}}get(e){if(qg(e))return this.value;{const t=jg(e),n=this.children.get(t);return n?n.get(Fg(e)):null}}setTree(e,t){if(qg(e))return t;{const n=jg(e),r=(this.children.get(n)||new lv(null)).setTree(Fg(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new lv(this.value,i)}}fold(e){return this.fold_(Lg(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(zg(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Lg(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(qg(e))return null;{const r=jg(e),i=this.children.get(r);return i?i.findOnPath_(Fg(e),zg(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Lg(),t)}foreachOnPath_(e,t,n){if(qg(e))return this;{this.value&&n(t,this.value);const r=jg(e),i=this.children.get(r);return i?i.foreachOnPath_(Fg(e),zg(t,r),n):new lv(null)}}foreach(e){this.foreach_(Lg(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(zg(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class cv{constructor(e){this.writeTree_=e}static empty(){return new cv(new lv(null))}}function uv(e,t,n){if(qg(t))return new cv(new lv(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=Hg(i,t);return s=s.updateChild(o,n),new cv(e.writeTree_.set(i,s))}{const r=new lv(n),i=e.writeTree_.setTree(t,r);return new cv(i)}}}function hv(e,t,n){let r=e;return rg(n,((e,n)=>{r=uv(r,zg(t,e),n)})),r}function dv(e,t){if(qg(t))return cv.empty();{const n=e.writeTree_.setTree(t,new lv(null));return new cv(n)}}function fv(e,t){return null!=pv(e,t)}function pv(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Hg(n.path,t)):null}function mv(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(yy,((e,n)=>{t.push(new ey(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new ey(e,n.value))})),t}function gv(e,t){if(qg(t))return e;{const n=pv(e,t);return new cv(null!=n?new lv(n):e.writeTree_.subtree(t))}}function yv(e){return e.writeTree_.isEmpty()}function vv(e,t){return bv(Lg(),e.writeTree_,t)}function bv(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(l(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=bv(zg(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(zg(e,".priority"),r)),n}}function _v(e,t){return Ov(t,e)}function wv(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));l(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&Ev(t,r.path)?i=!1:Kg(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=xv(e.allWrites,Sv,Lg()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=dv(e.visibleWrites,r.path);else{rg(r.children,(t=>{e.visibleWrites=dv(e.visibleWrites,zg(r.path,t))}))}return!0}return!1}function Ev(e,t){if(e.snap)return Kg(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Kg(zg(e.path,n),t))return!0;return!1}function Sv(e){return e.visible}function xv(e,t,n){let r=cv.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)Kg(n,e)?(t=Hg(n,e),r=uv(r,t,s.snap)):Kg(e,n)&&(t=Hg(e,n),r=uv(r,Lg(),s.snap.getChild(t)));else{if(!s.children)throw c("WriteRecord should have .snap or .children");if(Kg(n,e))t=Hg(n,e),r=hv(r,t,s.children);else if(Kg(e,n))if(t=Hg(e,n),qg(t))r=hv(r,Lg(),s.children);else{const e=U(s.children,jg(t));if(e){const n=e.getChild(Fg(t));r=uv(r,Lg(),n)}}}}}return r}function Cv(e,t,n,r,i){if(r||i){const s=gv(e.visibleWrites,t);if(!i&&yv(s))return n;if(i||null!=n||fv(s,Lg())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Kg(e.path,t)||Kg(t,e.path))};return vv(xv(e.allWrites,s,t),n||Cy.EMPTY_NODE)}return null}{const r=pv(e.visibleWrites,t);if(null!=r)return r;{const r=gv(e.visibleWrites,t);if(yv(r))return n;if(null!=n||fv(r,Lg())){return vv(r,n||Cy.EMPTY_NODE)}return null}}}function Tv(e,t,n,r){return Cv(e.writeTree,e.treePath,t,n,r)}function kv(e,t){return function(e,t,n){let r=Cy.EMPTY_NODE;const i=pv(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(yy,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=gv(e.visibleWrites,t);return n.forEachChild(yy,((e,t)=>{const n=vv(gv(i,new Dg(e)),t);r=r.updateImmediateChild(e,n)})),mv(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return mv(gv(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Iv(e,t,n,r){return function(e,t,n,r,i){l(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=zg(t,n);if(fv(e.visibleWrites,s))return null;{const t=gv(e.visibleWrites,s);return yv(t)?i.getChild(n):vv(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Nv(e,t){return function(e,t){return pv(e.visibleWrites,t)}(e.writeTree,zg(e.treePath,t))}function Rv(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=gv(e.visibleWrites,t),c=pv(l,Lg());if(null!=c)a=c;else{if(null==n)return[];a=vv(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function Av(e,t,n){return function(e,t,n,r){const i=zg(t,n),s=pv(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return vv(gv(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function Pv(e,t){return Ov(zg(e.treePath,t),e.writeTree)}function Ov(e,t){return{treePath:e,writeTree:t}}class Dv{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;l("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),l(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Oy(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Py(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Ay(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw c("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Oy(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Lv=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class jv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Zy(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Av(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ov(this.viewCache_),i=Rv(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function Mv(e,t,n,r,i){const s=new Dv;let o,a;if(n.type===Ky.OVERWRITE){const c=n;c.source.fromUser?o=Vv(e,t,c.path,c.snap,r,i,s):(l(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!qg(c.path),o=Uv(e,t,c.path,c.snap,r,i,a,s))}else if(n.type===Ky.MERGE){const c=n;c.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const c=zg(n,r);Bv(t,jg(c))&&(a=Vv(e,a,c,l,i,s,o))})),r.foreach(((r,l)=>{const c=zg(n,r);Bv(t,jg(c))||(a=Vv(e,a,c,l,i,s,o))})),a}(e,t,c.path,c.children,r,i,s):(l(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),o=qv(e,t,c.path,c.children,r,i,a,s))}else if(n.type===Ky.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=Nv(r,n))return t;{const a=new jv(r,t,i),c=t.eventCache.getNode();let u;if(qg(n)||".priority"===jg(n)){let n;if(t.serverCache.isFullyInitialized())n=Tv(r,ov(t));else{const e=t.serverCache.getNode();l(e instanceof Cy,"serverChildren would be complete if leaf node"),n=kv(r,e)}u=e.filter.updateFullNode(c,n,s)}else{const i=jg(n);let l=Av(r,i,t.serverCache);null==l&&t.serverCache.isCompleteForChild(i)&&(l=c.getImmediateChild(i)),u=null!=l?e.filter.updateChild(c,i,l,Fg(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(c,i,Cy.EMPTY_NODE,Fg(n),a,s):c,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Tv(r,ov(t)),o.isLeafNode()&&(u=e.filter.updateFullNode(u,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=Nv(r,Lg()),rv(t,u,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=Nv(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(qg(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Uv(e,t,n,l.getNode().getChild(n),i,s,a,o);if(qg(n)){let r=new lv(null);return l.getNode().forEachChild(iy,((e,t)=>{r=r.set(new Dg(e),t)})),qv(e,t,n,r,i,s,a,o)}return t}{let c=new lv(null);return r.foreach(((e,t)=>{const r=zg(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),qv(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==Ky.LISTEN_COMPLETE)throw c("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=iv(t,s.getNode(),s.isFullyInitialized()||qg(n),s.isFiltered());return Fv(e,o,n,r,Lv,i)}(e,t,n.path,r,s)}const u=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=sv(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Ry(sv(t)))}}(t,o,u),{viewCache:o,changes:u}}function Fv(e,t,n,r,i,s){const o=t.eventCache;if(null!=Nv(r,n))return t;{let a,c;if(qg(n))if(l(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=ov(t),i=kv(r,n instanceof Cy?n:Cy.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=Tv(r,ov(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const u=jg(n);if(".priority"===u){l(1===Mg(n),"Can't have a priority with additional path components");const i=o.getNode();c=t.serverCache.getNode();const s=Iv(r,n,i,c);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const l=Fg(n);let h;if(o.isCompleteForChild(u)){c=t.serverCache.getNode();const e=Iv(r,n,o.getNode(),c);h=null!=e?o.getNode().getImmediateChild(u).updateChild(l,e):o.getNode().getImmediateChild(u)}else h=Av(r,u,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),u,h,l,i,s):o.getNode()}}return rv(t,a,o.isFullyInitialized()||qg(n),e.filter.filtersNodes())}}function Uv(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(qg(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=jg(n);if(!l.isCompleteForPath(n)&&Mg(n)>1)return t;const i=Fg(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,Lv,null)}const h=iv(t,c,l.isFullyInitialized()||qg(n),u.filtersNodes());return Fv(e,h,n,i,new jv(i,h,s),a)}function Vv(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new jv(i,t,s);if(qg(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=rv(t,c,!0,e.filter.filtersNodes());else{const i=jg(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=rv(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=Fg(n),c=a.getNode().getImmediateChild(i);let h;if(qg(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===Ug(s)&&e.getChild(Bg(s)).isEmpty()?e:e.updateChild(s,r):Cy.EMPTY_NODE}if(c.equals(h))l=t;else{l=rv(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function Bv(e,t){return e.eventCache.isCompleteForChild(t)}function zv(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function qv(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=qg(n)?r:new lv(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=zv(0,t.serverCache.getNode().getImmediateChild(n),r);c=Uv(e,c,new Dg(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=zv(0,t.serverCache.getNode().getImmediateChild(n),r);c=Uv(e,c,new Dg(n),l,i,s,o,a)}})),c}class Hv{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new Dy(n.getIndex()),i=(s=n).loadsAllData()?new Dy(s.getIndex()):s.hasLimit()?new jy(s):new Ly(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(Cy.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(Cy.EMPTY_NODE,a.getNode(),null),u=new Zy(l,o.isFullyInitialized(),r.filtersNodes()),h=new Zy(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=nv(h,u),this.eventGenerator_=new ev(this.query_)}get query(){return this.query_}}function $v(e,t){const n=ov(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!qg(t)&&!n.getImmediateChild(jg(t)).isEmpty())?n.getChild(t):null}function Wv(e){return 0===e.eventRegistrations_.length}function Kv(e,t,n){const r=[];if(n){l(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function Gv(e,t,n,r){t.type===Ky.MERGE&&null!==t.source.queryId&&(l(ov(e.viewCache_),"We should always have a full cache before handling merges"),l(sv(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=Mv(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,l(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),l(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),l(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Yv(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Yv(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),tv(e,i,"child_removed",t,r,n),tv(e,i,"child_added",t,r,n),tv(e,i,"child_moved",s,r,n),tv(e,i,"child_changed",t,r,n),tv(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let Qv,Jv;class Xv{constructor(){this.views=new Map}}function Zv(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return l(null!=s,"SyncTree gave us an op for an invalid query."),Gv(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(Gv(s,t,n,r));return i}}function eb(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=Tv(n,i?r:null),s=!1;e?s=!0:r instanceof Cy?(e=kv(n,r),s=!1):(e=Cy.EMPTY_NODE,s=!1);const o=nv(new Zy(e,s,!1),new Zy(r,i,!1));return new Hv(t,o)}return o}function tb(e,t,n,r,i,s){const o=eb(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(yy,((e,t)=>{r.push(Ay(e,t))}));return n.isFullyInitialized()&&r.push(Ry(n.getNode())),Yv(e,r,n.getNode(),t)}(o,n)}function nb(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=ab(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(Kv(c,n,r)),Wv(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(Kv(t,n,r)),Wv(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!ab(e)&&s.push(new(l(Qv,"Reference.ts has not been loaded"),Qv)(t._repo,t._path)),{removed:s,events:o}}function rb(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function ib(e,t){let n=null;for(const r of e.views.values())n=n||$v(r,t);return n}function sb(e,t){if(t._queryParams.loadsAllData())return lb(e);{const n=t._queryIdentifier;return e.views.get(n)}}function ob(e,t){return null!=sb(e,t)}function ab(e){return null!=lb(e)}function lb(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let cb=1;class ub{constructor(e){this.listenProvider_=e,this.syncPointTree_=new lv(null),this.pendingWriteTree_={visibleWrites:cv.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function hb(e,t,n,r,i){return function(e,t,n,r,i){l(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=uv(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?bb(e,new Jy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function db(e,t,n,r){!function(e,t,n,r){l(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=hv(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=lv.fromObject(n);return bb(e,new Xy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function fb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(wv(e.pendingWriteTree_,t)){let t=new lv(null);return null!=r.snap?t=t.set(Lg(),!0):rg(r.children,(e=>{t=t.set(new Dg(e),!0)})),bb(e,new Yy(r.path,t,n))}return[]}function pb(e,t,n){return bb(e,new Jy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function mb(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||ob(o,t))){const l=nb(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>ab(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&ab(t)){return[lb(t)]}{let e=[];return t&&(e=rb(t)),rg(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=Eb(e,r);e.listenProvider_.startListening(Ib(i),Sb(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(Ib(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(xb(t));e.listenProvider_.stopListening(Ib(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=xb(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function gb(e,t,n,r){const i=Cb(e,r);if(null!=i){const r=Tb(i),s=r.path,o=r.queryId,a=Hg(s,t);return kb(e,s,new Jy(Gy(o),a,n))}return[]}function yb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=Hg(e,i);s=s||ib(t,n),o=o||ab(t)}));let a,c=e.syncPointTree_.get(i);if(c?(o=o||ab(c),s=s||ib(c,Lg())):(c=new Xv,e.syncPointTree_=e.syncPointTree_.set(i,c)),null!=s)a=!0;else{a=!1,s=Cy.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=ib(t,Lg());n&&(s=s.updateImmediateChild(e,n))}))}const u=ob(c,t);if(!u&&!t._queryParams.loadsAllData()){const n=xb(t);l(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=cb++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let h=tb(c,t,n,_v(e.pendingWriteTree_,i),s,a);if(!u&&!o&&!r){const n=sb(c,t);h=h.concat(function(e,t,n){const r=t._path,i=Sb(e,t),s=Eb(e,n),o=e.listenProvider_.startListening(Ib(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)l(!ab(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!qg(e)&&t&&ab(t))return[lb(t).query];{let e=[];return t&&(e=e.concat(rb(t).map((e=>e.query)))),rg(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(Ib(r),Sb(e,r))}}return o}(e,t,n))}return h}function vb(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=ib(n,Hg(e,t));if(r)return r}));return Cv(r,t,i,n,!0)}function bb(e,t){return _b(t,e.syncPointTree_,null,_v(e.pendingWriteTree_,Lg()))}function _b(e,t,n,r){if(qg(e.path))return wb(e,t,n,r);{const i=t.get(Lg());null==n&&null!=i&&(n=ib(i,Lg()));let s=[];const o=jg(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=Pv(r,o);s=s.concat(_b(a,l,e,t))}return i&&(s=s.concat(Zv(i,e,r,n))),s}}function wb(e,t,n,r){const i=t.get(Lg());null==n&&null!=i&&(n=ib(i,Lg()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=Pv(r,t),l=e.operationForChild(t);l&&(s=s.concat(wb(l,i,o,a)))})),i&&(s=s.concat(Zv(i,e,r,n))),s}function Eb(e,t){const n=t.query,r=Sb(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Cy.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=Cb(e,n);if(r){const n=Tb(r),i=n.path,s=n.queryId,o=Hg(i,t);return kb(e,i,new Qy(Gy(s),o))}return[]}(e,n._path,r):function(e,t){return bb(e,new Qy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return mb(e,n,null,r)}}}}function Sb(e,t){const n=xb(t);return e.queryToTagMap.get(n)}function xb(e){return e._path.toString()+"$"+e._queryIdentifier}function Cb(e,t){return e.tagToQueryMap.get(t)}function Tb(e){const t=e.indexOf("$");return l(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Dg(e.substr(0,t))}}function kb(e,t,n){const r=e.syncPointTree_.get(t);l(r,"Missing sync point for query tag that we're tracking");return Zv(r,n,_v(e.pendingWriteTree_,t),null)}function Ib(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(l(Jv,"Reference.ts has not been loaded"),Jv)(e._repo,e._path):e}class Nb{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Nb(t)}node(){return this.node_}}class Rb{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=zg(this.path_,e);return new Rb(this.syncTree_,t)}node(){return vb(this.syncTree_,this.path_)}}const Ab=function(e,t,n){return e&&"object"===typeof e?(l(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Pb(e[".sv"],t,n):"object"===typeof e[".sv"]?Ob(e[".sv"],t):void l(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Pb=function(e,t,n){if("timestamp"===e)return n.timestamp;l(!1,"Unexpected server value: "+e)},Ob=function(e,t,n){e.hasOwnProperty("increment")||l(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&l(!1,"Unexpected increment value: "+r);const i=t.node();if(l(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},Db=function(e,t,n,r){return jb(t,new Rb(n,e),r)},Lb=function(e,t,n){return jb(e,new Nb(t),n)};function jb(e,t,n){const r=e.getPriority().val(),i=Ab(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=Ab(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new gy(s,ky(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new gy(i))),r.forEachChild(yy,((e,r)=>{const i=jb(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class Mb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function Fb(e,t){let n=t instanceof Dg?t:new Dg(t),r=e,i=jg(n);for(;null!==i;){const e=U(r.node.children,i)||{children:{},childCount:0};r=new Mb(i,r,e),n=Fg(n),i=jg(n)}return r}function Ub(e){return e.node.value}function Vb(e,t){e.node.value=t,$b(e)}function Bb(e){return e.node.childCount>0}function zb(e,t){rg(e.node.children,((n,r)=>{t(new Mb(n,e,r))}))}function qb(e,t,n,r){n&&!r&&t(e),zb(e,(e=>{qb(e,t,!0,r)})),n&&r&&t(e)}function Hb(e){return new Dg(null===e.parent?e.name:Hb(e.parent)+"/"+e.name)}function $b(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===Ub(e)&&!Bb(e)}(n),i=F(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,$b(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,$b(e))}(e.parent,e.name,e)}const Wb=/[\[\].#$\/\u0000-\u001F\u007F]/,Kb=/[\[\].#$\u0000-\u001F\u007F]/,Gb=10485760,Yb=function(e){return"string"===typeof e&&0!==e.length&&!Wb.test(e)},Qb=function(e){return"string"===typeof e&&0!==e.length&&!Kb.test(e)},Jb=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Ym(e)||e&&"object"===typeof e&&F(e,".sv")},Xb=function(e,t,n,r){r&&void 0===t||Zb(Q(e,"value"),t,n)},Zb=function(e,t,n){const r=n instanceof Dg?new Gg(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Qg(r));if("function"===typeof t)throw new Error(e+"contains a function "+Qg(r)+" with contents = "+t.toString());if(Ym(t))throw new Error(e+"contains "+t.toString()+" "+Qg(r));if("string"===typeof t&&t.length>Gb/3&&J(t)>Gb)throw new Error(e+"contains a string greater than "+Gb+" utf8 bytes "+Qg(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(rg(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Yb(t)))throw new Error(e+" contains an invalid key ("+t+") "+Qg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=J(t),Yg(e)}(r,t),Zb(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=J(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+Qg(r)+" in addition to actual children.")}},e_=function(e,t,n,r){if(r&&void 0===t)return;const i=Q(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];rg(t,((e,t)=>{const r=new Dg(e);if(Zb(i,t,zg(n,r)),".priority"===Ug(r)&&!Jb(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=Vg(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!Yb(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort($g);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&Kg(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},t_=function(e,t,n,r){if((!r||void 0!==n)&&!Qb(n))throw new Error(Q(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},n_=function(e,t){if(".info"===jg(t))throw new Error(e+" failed = Can't modify data under /.info/")},r_=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Yb(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Qb(e)}(n))throw new Error(Q(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class i_{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function s_(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||Wg(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function o_(e,t,n){s_(e,n),l_(e,(e=>Wg(e,t)))}function a_(e,t,n){s_(e,n),l_(e,(e=>Kg(e,t)||Kg(t,e)))}function l_(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(c_(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function c_(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Bm&&Hm("event: "+n.toString()),ag(r)}}}const u_="repo_interrupt";class h_{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new i_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zy(),this.transactionQueueTree_=new Mb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function d_(e,t,n){if(e.stats_=Eg(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Vy(e.repoInfo_,((t,n,r,i)=>{m_(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>g_(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{j(n)}catch(Fx){throw new Error("Invalid authOverride provided: "+Fx)}}e.persistentConnection_=new Zg(e.repoInfo_,t,((t,n,r,i)=>{m_(e,t,n,r,i)}),(t=>{g_(e,t)}),(t=>{!function(e,t){rg(t,((t,n)=>{y_(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return wg[n]||(wg[n]=t()),wg[n]}(e.repoInfo_,(()=>new Wy(e.stats_,e.server_))),e.infoData_=new By,e.infoSyncTree_=new ub({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=pb(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),y_(e,"connected",!1),e.serverSyncTree_=new ub({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);a_(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function f_(e){const t=e.infoData_.getNode(new Dg(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function p_(e){return(t=(t={timestamp:f_(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function m_(e,t,n,r,i){e.dataUpdateCount++;const s=new Dg(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=B(n,(e=>ky(e)));o=function(e,t,n,r){const i=Cb(e,r);if(i){const r=Tb(i),s=r.path,o=r.queryId,a=Hg(s,t),l=lv.fromObject(n);return kb(e,s,new Xy(Gy(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=ky(n);o=gb(e.serverSyncTree_,s,t,i)}else if(r){const t=B(n,(e=>ky(e)));o=function(e,t,n){const r=lv.fromObject(n);return bb(e,new Xy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=ky(n);o=pb(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=T_(e,s)),a_(e.eventQueue_,a,o)}function g_(e,t){y_(e,"connected",t),!1===t&&function(e){E_(e,"onDisconnectEvents");const t=p_(e),n=zy();Hy(e.onDisconnect_,Lg(),((r,i)=>{const s=Db(r,i,e.serverSyncTree_,t);qy(n,r,s)}));let r=[];Hy(n,Lg(),((t,n)=>{r=r.concat(pb(e.serverSyncTree_,t,n));const i=A_(e,t);T_(e,i)})),e.onDisconnect_=zy(),a_(e.eventQueue_,Lg(),r)}(e)}function y_(e,t,n){const r=new Dg("/.info/"+t),i=ky(n);e.infoData_.updateSnapshot(r,i);const s=pb(e.infoSyncTree_,r,i);a_(e.eventQueue_,r,s)}function v_(e){return e.nextWriteId_++}function b_(e,t,n,r,i){E_(e,"set",{path:t.toString(),value:n,priority:r});const s=p_(e),o=ky(n,r),a=vb(e.serverSyncTree_,t),l=Lb(o,a,s),c=v_(e),u=hb(e.serverSyncTree_,t,l,c,!0);s_(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||Gm("set at "+t+" failed: "+n);const o=fb(e.serverSyncTree_,c,!s);a_(e.eventQueue_,t,o),S_(e,i,n,r)}));const h=A_(e,t);T_(e,h),a_(e.eventQueue_,h,[])}function __(e,t,n){let r;r=".info"===jg(t._path)?mb(e.infoSyncTree_,t,n):mb(e.serverSyncTree_,t,n),o_(e.eventQueue_,t._path,r)}function w_(e){e.persistentConnection_&&e.persistentConnection_.interrupt(u_)}function E_(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Hm(t,...r)}function S_(e,t,n,r){t&&ag((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function x_(e,t,n){return vb(e.serverSyncTree_,t,n)||Cy.EMPTY_NODE}function C_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||R_(e,t),Ub(t)){const n=I_(e,t);l(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=x_(e,t,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const e=n[u];l(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=Hg(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),c=t;e.server_.put(c.toString(),a,(r=>{E_(e,"transaction put response",{path:c.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(fb(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();R_(e,Fb(e.transactionQueueTree_,t)),C_(e,e.transactionQueueTree_),a_(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)ag(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Gm("transaction at "+c.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}T_(e,t)}}),o)}(e,Hb(t),n)}else Bb(t)&&zb(t,(t=>{C_(e,t)}))}function T_(e,t){const n=k_(e,t),r=Hb(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let c=0;c<t.length;c++){const s=t[c],u=Hg(n,s.path);let h,d=!1;if(l(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)d=!0,h=s.abortReason,i=i.concat(fb(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)d=!0,h="maxretry",i=i.concat(fb(e.serverSyncTree_,s.currentWriteId,!0));else{const n=x_(e,s.path,o);s.currentInputSnapshot=n;const r=t[c].update(n.val());if(void 0!==r){Zb("transaction failed: Data returned ",r,s.path);let t=ky(r);"object"===typeof r&&null!=r&&F(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=p_(e),c=Lb(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=v_(e),o.splice(o.indexOf(a),1),i=i.concat(hb(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(fb(e.serverSyncTree_,a,!0))}else d=!0,h="nodata",i=i.concat(fb(e.serverSyncTree_,s.currentWriteId,!0))}a_(e.eventQueue_,n,i),i=[],d&&(t[c].status=2,a=t[c].unwatcher,setTimeout(a,Math.floor(0)),t[c].onComplete&&("nodata"===h?r.push((()=>t[c].onComplete(null,!1,t[c].currentInputSnapshot))):r.push((()=>t[c].onComplete(new Error(h),!1,null)))))}var a;R_(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)ag(r[l]);C_(e,e.transactionQueueTree_)}(e,I_(e,n),r),r}function k_(e,t){let n,r=e.transactionQueueTree_;for(n=jg(t);null!==n&&void 0===Ub(r);)r=Fb(r,n),n=jg(t=Fg(t));return r}function I_(e,t){const n=[];return N_(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function N_(e,t,n){const r=Ub(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);zb(t,(t=>{N_(e,t,n)}))}function R_(e,t){const n=Ub(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Vb(t,n.length>0?n:void 0)}zb(t,(t=>{R_(e,t)}))}function A_(e,t){const n=Hb(k_(e,t)),r=Fb(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{P_(e,t)})),P_(e,r),qb(r,(t=>{P_(e,t)})),n}function P_(e,t){const n=Ub(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(l(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(l(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(fb(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Vb(t,void 0):n.length=s+1,a_(e.eventQueue_,Hb(t),i);for(let e=0;e<r.length;e++)ag(r[e])}}const O_=function(e,t){const n=D_(e),r=n.namespace;"firebase.com"===n.domain&&Km(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Km("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Gm("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new yg(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Dg(n.pathString)}},D_=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(Fx){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Gm(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},L_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",j_=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=L_.charAt(n%64),n=Math.floor(n/64);l(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=L_.charAt(t[i]);return l(20===o.length,"nextPushId: Length should be 20."),o}}();class M_{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+j(this.snapshot.exportVal())}}class F_{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class U_{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return l(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class V_{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return qg(this._path)?null:Ug(this._path)}get ref(){return new B_(this._repo,this._path)}get _queryIdentifier(){const e=Uy(this._queryParams),t=tg(e);return"{}"===t?"default":t}get _queryObject(){return Uy(this._queryParams)}isEqual(e){if(!((e=X(e))instanceof V_))return!1;const t=this._repo===e._repo,n=Wg(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class B_ extends V_{constructor(e,t){super(e,t,new My,!1)}get parent(){const e=Bg(this._path);return null===e?null:new B_(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class z_{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Dg(e),n=H_(this.ref,e);return new z_(this._node.getChild(t),n,yy)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new z_(n,H_(this.ref,t),yy))))}hasChild(e){const t=new Dg(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function q_(e,t){return(e=X(e))._checkNotDeleted("ref"),void 0!==t?H_(e._root,t):e._root}function H_(e,t){var n,r,i,s;return null===jg((e=X(e))._path)?(n="child",r="path",s=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),t_(n,r,i,s)):t_("child","path",t,!1),new B_(e._repo,zg(e._path,t))}function $_(e,t){e=X(e),n_("set",e._path),Xb("set",t,e._path,!1);const n=new x;return b_(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function W_(e,t){e_("update",t,e._path,!1);const n=new x;return function(e,t,n,r){E_(e,"update",{path:t.toString(),value:n});let i=!0;const s=p_(e),o={};if(rg(n,((n,r)=>{i=!1,o[n]=Db(zg(t,n),ky(r),e.serverSyncTree_,s)})),i)Hm("update() called with empty data.  Don't do anything."),S_(0,r,"ok",void 0);else{const i=v_(e),s=db(e.serverSyncTree_,t,o,i);s_(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const o="ok"===n;o||Gm("update at "+t+" failed: "+n);const a=fb(e.serverSyncTree_,i,!o),l=a.length>0?T_(e,t):t;a_(e.eventQueue_,l,a),S_(0,r,n,s)})),rg(n,(n=>{const r=A_(e,zg(t,n));T_(e,r)})),a_(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}class K_{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new M_("value",this,new z_(e.snapshotNode,new B_(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new F_(this,e,t):null}matches(e){return e instanceof K_&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class G_{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new F_(this,e,t):null}createEvent(e,t){l(null!=e.childName,"Child events should have a childName.");const n=H_(new B_(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new M_(e.type,this,new z_(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof G_&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function Y_(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{__(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new U_(n,s||void 0),a="value"===t?new K_(o):new G_(t,o);return function(e,t,n){let r;r=".info"===jg(t._path)?yb(e.infoSyncTree_,t,n):yb(e.serverSyncTree_,t,n),o_(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>__(e._repo,e,a)}function Q_(e,t,n,r){return Y_(e,"value",t,n,r)}!function(e){l(!Qv,"__referenceConstructor has already been defined"),Qv=e}(B_),function(e){l(!Jv,"__referenceConstructor has already been defined"),Jv=e}(B_);const J_={};let X_=!1;function Z_(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||Km("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hm("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=O_(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAWLn1bc_sregpLCEw2SDYgm3_UNE8Y-SA",REACT_APP_FIREBASE_APP_ID:"1:683690908711:web:832832fefb01be07eb8202",REACT_APP_FIREBASE_AUTH_DOMAIN:"milan-400c7.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-RWWM318TXZ",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"683690908711",REACT_APP_FIREBASE_PROJECT_ID:"milan-400c7",REACT_APP_FIREBASE_STORAGE_BUCKET:"milan-400c7.appspot.com"}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${c.namespace}`,l=O_(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new hg(hg.OWNER):new ug(e.name,e.options,t);r_("Invalid Firebase Database URL",l),qg(l.path)||Km("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=J_[t.name];i||(i={},J_[t.name]=i);let s=i[e.toURLString()];s&&Km("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new h_(e,X_,n,r),i[e.toURLString()]=s,s}(c,e,u,new cg(e.name,n));return new ew(h,e)}class ew{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(d_(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new B_(this._repo,Lg())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=J_[t];n&&n[e.key]===e||Km(`Database ${t}(${e.repoInfo_}) has already been deleted.`),w_(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Km("Cannot call "+e+" on a deleted database.")}}const tw={".sv":"timestamp"};Zg.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Zg.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Am(pt),ct(new Z("database",((e,t)=>{let{instanceIdentifier:n}=t;return Z_(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),yt(Im,Nm,e),yt(Im,Nm,"esm2017")}();console.log("API Key:","AIzaSyAWLn1bc_sregpLCEw2SDYgm3_UNE8Y-SA"),console.log("Auth Domain:","milan-400c7.firebaseapp.com"),console.log("Project ID:","milan-400c7"),console.log("Storage Bucket:","milan-400c7.appspot.com"),console.log("Messaging Sender ID:","683690908711"),console.log("App ID:","1:683690908711:web:832832fefb01be07eb8202"),console.log("Measurement ID:","G-RWWM318TXZ");const nw=mt({apiKey:"AIzaSyAWLn1bc_sregpLCEw2SDYgm3_UNE8Y-SA",authDomain:"milan-400c7.firebaseapp.com",projectId:"milan-400c7",storageBucket:"milan-400c7.appspot.com",messagingSenderId:"683690908711",appId:"1:683690908711:web:832832fefb01be07eb8202",measurementId:"G-RWWM318TXZ"}),rw=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt();const t=ut(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=ut(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(z(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Dt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Wi,persistence:[ni,Ur,Br]}),r=S("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Qi)return;const r=null===t||void 0===t?void 0:t.token;Ji!==r&&(Ji=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){X(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){X(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=_("auth");return s&&tr(n,`http://${s}`),n}(nw),iw=function(e,t){const n="string"==typeof e?e:t||"(default)",r=ut("object"==typeof e?e:gt(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=w("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=jd(e,Fd))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ws("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ms.MOCK_USER;else{t=C(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ks(Ts.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ms(s)}e._authCredentials=new As(new Ns(t,n))}}(r,...e)}return r}(nw),sw=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt(),t=arguments.length>1?arguments[1]:void 0;e=X(e);const n=ut(e,Sm).getImmediate({identifier:t}),r=w("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:C(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(nw),ow=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt(),t=arguments.length>1?arguments[1]:void 0;const n=ut(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=w("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=X(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Km("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Km('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new hg(hg.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:C(r.mockUserToken,e.app.options.projectId);s=new hg(t)}!function(e,t,n,r){e.repoInfo_=new yg(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}(n,...e)}return n}(nw),aw=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(((e,t,n)=>Boolean(e)&&n.indexOf(e)===t)).join(" ")};var lw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const cw=(0,t.forwardRef)(((e,n)=>{let{color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,iconNode:c,...u}=e;return(0,t.createElement)("svg",{ref:n,...lw,width:i,height:i,stroke:r,strokeWidth:o?24*Number(s)/Number(i):s,className:aw("lucide",a),...u},[...c.map((e=>{let[n,r]=e;return(0,t.createElement)(n,r)})),...Array.isArray(l)?l:[l]])})),uw=(e,n)=>{const r=(0,t.forwardRef)(((r,i)=>{let{className:s,...o}=r;return(0,t.createElement)(cw,{ref:i,iconNode:n,className:aw(`lucide-${a=e,a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,s),...o});var a}));return r.displayName=`${e}`,r},hw=uw("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),dw=uw("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),fw=uw("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),pw=uw("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),mw=uw("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),gw=uw("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),yw=uw("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),vw=uw("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var bw=n(579);const _w=n.p+"static/media/logo.f22152f31e26f57be6d1.png",ww=e=>{let{user:t,setCurrentPage:n}=e;return(0,bw.jsx)("nav",{className:"fixed top-0 w-full bg-white shadow-md z-10",children:(0,bw.jsxs)("div",{className:"max-w-7xl mx-auto px-4 flex justify-between items-center py-3",children:[(0,bw.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,bw.jsx)("img",{src:_w,alt:"Logo",className:"h-8 w-8 cursor-pointer",onClick:()=>n("home")}),(0,bw.jsx)("button",{onClick:()=>n("home"),"aria-label":"Home",className:"p-2 hover:bg-gray-200 rounded",children:(0,bw.jsx)(hw,{className:"text-gray-700 hover:text-blue-500"})}),(0,bw.jsx)("button",{onClick:()=>n("messages"),"aria-label":"Messages",className:"p-2 hover:bg-gray-200 rounded",children:(0,bw.jsx)(dw,{className:"text-gray-700 hover:text-blue-500"})}),(0,bw.jsx)("button",{onClick:()=>n("calendar"),"aria-label":"Calendar",className:"p-2 hover:bg-gray-200 rounded",children:(0,bw.jsx)(fw,{className:"text-gray-700 hover:text-blue-500"})}),(0,bw.jsx)("button",{onClick:()=>n("profile"),"aria-label":"Profile",className:"p-2 hover:bg-gray-200 rounded",children:(0,bw.jsx)(pw,{className:"text-gray-700 hover:text-blue-500"})}),(0,bw.jsx)("button",{onClick:()=>n("settings"),"aria-label":"Settings",className:"p-2 hover:bg-gray-200 rounded",children:(0,bw.jsx)(mw,{className:"text-gray-700 hover:text-blue-500"})})]}),(0,bw.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,bw.jsx)("button",{onClick:()=>n("search"),"aria-label":"search",className:"p-2 hover:bg-gray-200 rounded",children:(0,bw.jsx)(gw,{className:"text-gray-700 hover:text-blue-500 cursor-pointer"})}),(0,bw.jsx)("button",{onClick:()=>n("notifications"),"aria-label":"notifications",className:"p-2 hover:bg-gray-200 rounded",children:(0,bw.jsx)(yw,{className:"text-gray-700 hover:text-blue-500 cursor-pointer","aria-label":"Notifications"})}),(0,bw.jsx)("button",{onClick:()=>function(e){return X(e).signOut()}(rw),"aria-label":"Logout",className:"p-2 hover:bg-gray-200 rounded",children:(0,bw.jsx)(vw,{className:"text-gray-700 hover:text-red-500"})})]})]})})},Ew=e=>{var n;let{setCurrentPage:r,setSelectedUser:i}=e;const[s,o]=(0,t.useState)(""),[a,l]=(0,t.useState)([]),[c,u]=(0,t.useState)([]),[h,d]=(0,t.useState)([]),[f,p]=(0,t.useState)(""),[m,g]=(0,t.useState)([]),[y,v]=(0,t.useState)([]);(0,t.useEffect)((()=>{const e=np(Of(zd(iw,"users")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));l(t)}));return e}),[]),(0,t.useEffect)((()=>{const e=np(Of(zd(iw,"sessions")),(e=>{u(e.docs.map((e=>({id:e.id,...e.data()}))))}));return e}),[]),(0,t.useEffect)((()=>{(async()=>{const e=np(Of(zd(iw,"posts")),(async e=>{const t=await Promise.all(e.docs.map((async e=>{const t=e.data();let n={};try{const e=qd(iw,"users",t.userId),r=await Qf(e);r.exists()&&(n=r.data())}catch(Wm){console.error("Error fetching user data:",Wm)}return{id:e.id,...t,userName:n.displayName||"Unknown User",userPicture:n.profilePicture||null}})));d(t)}))})()}),[]);const b=null===(n=rw.currentUser)||void 0===n?void 0:n.uid,_=a.filter((e=>e.id!==b&&e.displayName.toLowerCase().includes(s.toLowerCase())));(0,t.useEffect)((()=>{(()=>{const e=rw.currentUser;if(e){const t=zd(iw,"connections"),n=Of(t,Lf("userId","==",e.uid),Lf("status","in",["pending","accepted"])),r=Of(t,Lf("partnerId","==",e.uid),Lf("status","in",["pending","accepted"])),i=np(n,(e=>{const t=[],n=[];e.docs.forEach((e=>{const r=e.data();r.partnerId&&"pending"===r.status&&t.push(r.partnerId),r.partnerId&&"accepted"===r.status&&n.push(r.partnerId)})),g((e=>[...new Set([...e,...t])])),v((e=>[...new Set([...e,...n])]))})),s=np(r,(e=>{const t=[],n=[];e.docs.forEach((e=>{const r=e.data();r.userId&&"pending"===r.status&&t.push(r.userId),r.userId&&"accepted"===r.status&&n.push(r.userId)})),g((e=>[...new Set([...e,...t])])),v((e=>[...new Set([...e,...n])]))}))}})()}),[a]);return(0,bw.jsxs)("div",{className:"space-y-6",children:[(0,bw.jsxs)("div",{className:"flex items-center space-x-4 bg-white p-4 rounded-lg shadow",children:[(0,bw.jsxs)("div",{className:"relative flex-1",children:[(0,bw.jsx)("input",{type:"text",placeholder:"Search study partners...",value:s,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg outline-none focus:border-blue-400"}),(0,bw.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:"\ud83d\udd0d"})]}),(0,bw.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Find Partners"})]}),(0,bw.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,bw.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Recommended Study Partners"}),(0,bw.jsx)("div",{className:"space-y-4",children:_.map((e=>(0,bw.jsxs)("div",{onClick:()=>{i(e.id),r("UserProfile")},className:"flex items-center space-x-4 p-4 border rounded-lg hover:shadow-md cursor-pointer",children:[(0,bw.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-full overflow-hidden",children:e.profilePicture?(0,bw.jsx)("img",{src:e.profilePicture,alt:e.displayName,className:"w-full h-full object-cover"}):(0,bw.jsx)("div",{className:"text-center",children:"No Image"})}),(0,bw.jsxs)("div",{className:"flex-1",children:[(0,bw.jsx)("h3",{className:"font-semibold",children:e.displayName}),(0,bw.jsxs)("p",{className:"text-sm text-gray-600",children:[e.major," \u2022 ",e.university]})]}),y.includes(e.id)?(0,bw.jsx)("button",{className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600",onClick:e=>{e.stopPropagation(),alert("Messaging functionality coming soon!")},children:"Message"}):(0,bw.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{const t=rw.currentUser;if(t){const n=await tp(zd(iw,"connections"),{userId:t.uid,partnerId:e,status:"pending",createdAt:sp()});await tp(zd(iw,"notifications"),{userId:e,connectionId:n.id,senderId:t.uid,type:"connection",action:"sent you a connection request",status:"pending",unread:!0,timestamp:sp()}),g([...m,e]),alert("Connection request sent!")}else console.log("No user logged in")}catch(Wm){console.error("Error sending connection request:",Wm)}})(e.id)},disabled:m.includes(e.id),className:"px-4 py-2 rounded-lg "+(m.includes(e.id)?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-blue-100 text-blue-600 hover:bg-blue-200"),children:m.includes(e.id)?"Waiting":"Connect"})]},e.id)))})]}),(0,bw.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,bw.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"What's on your mind?"}),(0,bw.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=rw.currentUser;if(t&&""!==f.trim())try{await tp(zd(iw,"posts"),{userId:t.uid,content:f,createdAt:sp()}),p("")}catch(Wm){console.error("Error creating post:",Wm)}},className:"space-y-4",children:[(0,bw.jsx)("textarea",{rows:"3",value:f,onChange:e=>p(e.target.value),placeholder:"Share your thoughts...",className:"w-full p-2 border rounded-lg outline-none focus:border-blue-400"}),(0,bw.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Post"})]})]}),(0,bw.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,bw.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Recent Posts"}),(0,bw.jsx)("div",{className:"space-y-4",children:h.length>0?h.map((e=>{var t;return(0,bw.jsxs)("div",{className:"p-4 border-b last:border-b-0",children:[(0,bw.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,bw.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full overflow-hidden",children:e.userPicture?(0,bw.jsx)("img",{src:e.userPicture,alt:e.userName,className:"w-full h-full object-cover"}):(0,bw.jsx)("div",{className:"text-center",children:"No Image"})}),(0,bw.jsxs)("div",{children:[(0,bw.jsx)("p",{className:"font-semibold",children:e.userName||"Unknown User"}),(0,bw.jsx)("p",{className:"text-sm text-gray-400",children:new Date(null===(t=e.createdAt)||void 0===t?void 0:t.toDate()).toLocaleString()})]})]}),(0,bw.jsx)("p",{className:"text-gray-600 mt-2",children:e.content})]},e.id)})):(0,bw.jsx)("p",{children:"No posts yet. Be the first to share something!"})})]})]})};var Sw=n(593),xw=n.n(Sw);const Cw=uw("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Tw=uw("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),kw=uw("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Iw=uw("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Nw=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(null),[s,o]=(0,t.useState)([]),[a,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(null),[h,d]=(0,t.useState)(null),[f,p]=(0,t.useState)(!1),m=(0,t.useRef)(null),g=(0,t.useRef)(null),y=(0,t.useRef)(null);(0,t.useEffect)((()=>{const e=e=>{const t=rw.currentUser,n=t.uid<e?`${t.uid}_${e}`:`${e}_${t.uid}`;Q_(q_(ow,`messages/${n}`),(n=>{const i=n.val(),s=i?Object.values(i):[];if(s.length>0){const n=s[s.length-1];_(e,n.content,n.senderId!==t.uid&&"read"!==n.status&&(null===r||void 0===r?void 0:r.id)!==e,n.timestamp)}}))};(async()=>{const t=rw.currentUser;if(t){const r=Of(zd(iw,"connections"),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((e=>zf("and",e))),jf._create("and",t)}(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((e=>zf("or",e))),jf._create("or",t)}(Lf("userId","==",t.uid),Lf("partnerId","==",t.uid)),Lf("status","==","accepted"))),i=await Xf(r),s=await Promise.all(i.docs.map((async e=>{const n=e.data(),r=n.userId===t.uid?n.partnerId:n.userId,i=await Qf(qd(iw,"users",r));return i.exists()?{id:r,...i.data(),lastMessage:"",unread:!1,timestamp:null}:null})));n(s.filter((e=>e))),s.filter((e=>e)).forEach((t=>e(t.id)))}})()}),[r]);const v=async e=>{try{const t=await navigator.mediaDevices.getUserMedia({video:"video"===e,audio:!0});d(t),m.current&&(m.current.srcObject=t);const n=new(xw())({initiator:!0,stream:t,trickle:!1});u(n),b(n,r.id),p(!0)}catch(Wm){console.error("Error accessing media devices.",Wm)}},b=(e,t)=>{const n=q_(ow,`calls/${rw.currentUser.uid}_${t}`);e.on("signal",(e=>{W_(n,{signal:e})})),e.on("stream",(e=>{g.current&&(g.current.srcObject=e)})),Q_(n,(t=>{const n=t.val();null!==n&&void 0!==n&&n.signal&&!e.destroyed&&e.signal(n.signal)}))},_=(e,t,r,i)=>{n((n=>{const s=n.map((n=>n.id===e?{...n,lastMessage:t,unread:r,timestamp:i}:n)).sort(((e,t)=>t.timestamp-e.timestamp));return s}))};return(0,bw.jsxs)("div",{className:"h-screen flex",children:[(0,bw.jsxs)("div",{className:"w-80 border-r bg-white",children:[(0,bw.jsxs)("div",{className:"p-4 border-b",children:[(0,bw.jsx)("h2",{className:"text-lg font-semibold",children:"Messages"}),(0,bw.jsx)("input",{type:"text",placeholder:"Search conversations...",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500"})]}),(0,bw.jsx)("div",{className:"overflow-y-auto",children:e.map((e=>(0,bw.jsx)("div",{onClick:()=>i(e),className:"p-4 border-b cursor-pointer hover:bg-gray-50 "+((null===r||void 0===r?void 0:r.id)===e.id?"bg-blue-50":""),children:(0,bw.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,bw.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,bw.jsx)("span",{className:"text-blue-600 font-semibold",children:e.displayName.split(" ").map((e=>e[0])).join("")})}),(0,bw.jsxs)("div",{className:"flex-1",children:[(0,bw.jsxs)("div",{className:"flex items-center justify-between",children:[(0,bw.jsx)("h3",{className:"font-semibold",children:e.displayName}),e.unread&&(0,bw.jsx)("span",{className:"text-blue-600 text-xs font-semibold",children:"New Message"})]}),(0,bw.jsx)("p",{className:"text-sm text-gray-600 truncate",children:e.unread?"New Message":e.lastMessage||"No recent messages"})]})]})},e.id)))})]}),r?(0,bw.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,bw.jsx)("div",{className:"bg-white border-b px-4 py-3",children:(0,bw.jsxs)("div",{className:"flex items-center justify-between",children:[(0,bw.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,bw.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,bw.jsx)("span",{className:"text-blue-600 font-semibold",children:r.displayName.split(" ").map((e=>e[0])).join("")})}),(0,bw.jsxs)("div",{children:[(0,bw.jsx)("h2",{className:"font-semibold",children:r.displayName}),(0,bw.jsx)("p",{className:"text-sm text-green-600",children:"Online"})]})]}),(0,bw.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,bw.jsx)("button",{onClick:()=>v("audio"),className:"p-2 hover:bg-gray-100 rounded-full",children:(0,bw.jsx)(Cw,{size:20,className:"text-gray-600"})}),(0,bw.jsx)("button",{onClick:()=>v("video"),className:"p-2 hover:bg-gray-100 rounded-full",children:(0,bw.jsx)(Tw,{size:20,className:"text-gray-600"})}),(0,bw.jsx)("button",{onClick:()=>{c&&(c.destroy(),u(null),p(!1),d(null))},className:"p-2 hover:bg-gray-100 rounded-full",children:(0,bw.jsx)(kw,{size:20,className:"text-gray-600"})})]})]})}),(0,bw.jsxs)("div",{className:"flex-1 bg-gray-50 p-4 overflow-y-auto",children:[s.map(((e,t)=>(0,bw.jsx)("div",{className:"flex "+(e.senderId===rw.currentUser.uid?"justify-end":"justify-start"),children:(0,bw.jsx)("div",{className:"max-w-md px-4 py-2 rounded-lg bg-white shadow",children:(0,bw.jsx)("p",{children:e.content})})},t))),(0,bw.jsx)("div",{ref:y})]}),(0,bw.jsx)("div",{className:"bg-white p-4 sticky bottom-0",children:(0,bw.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a.trim()&&r){const e=rw.currentUser,t=e.uid<r.id?`${e.uid}_${r.id}`:`${r.id}_${e.uid}`,n=q_(ow,`messages/${t}`),i={senderId:e.uid,content:a,timestamp:tw,status:"sent"};await function(e,t){e=X(e),n_("push",e._path),Xb("push",t,e._path,!0);const n=f_(e._repo),r=j_(n),i=H_(e,r),s=H_(e,r);let o;return o=null!=t?$_(s,t).then((()=>s)):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(n,i),_(r.id,a,!1,new Date),l(""),scrollToBottom()}},className:"flex items-center space-x-4",children:[(0,bw.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),placeholder:"Type your message...",className:"flex-1 border rounded-full px-4 py-2 focus:outline-none focus:border-blue-500"}),(0,bw.jsx)("button",{type:"submit",className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700",children:(0,bw.jsx)(Iw,{size:20})})]})})]}):(0,bw.jsx)("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:(0,bw.jsx)("h3",{className:"text-lg font-semibold text-gray-600",children:"Select a conversation"})}),f&&(0,bw.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,bw.jsxs)("div",{className:"w-1/2 p-4 bg-white rounded-lg shadow-lg",children:[(0,bw.jsx)("video",{ref:m,autoPlay:!0,muted:!0,className:"w-full h-1/2 mb-2"}),(0,bw.jsx)("video",{ref:g,autoPlay:!0,className:"w-full h-1/2"})]})})]})},Rw=uw("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),Aw=uw("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Pw=uw("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),Ow=uw("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Dw=e=>{let{children:t,className:n}=e;return(0,bw.jsx)("div",{className:`border rounded-lg p-4 ${n}`,children:t})},Lw=e=>{let{children:t}=e;return(0,bw.jsx)("div",{className:"font-bold",children:t})},jw=e=>{let{children:t}=e;return(0,bw.jsx)("div",{className:"mt-2",children:t})},Mw=e=>{let{children:t}=e;return(0,bw.jsx)("h2",{className:"text-lg font-semibold",children:t})};function Fw(e){return Fw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fw(e)}function Uw(e){var t=function(e,t){if("object"!=Fw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fw(t)?t:t+""}function Vw(e,t,n){return(t=Uw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bw(Object(n),!0).forEach((function(t){Vw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Hw(e,t){if(e){if("string"==typeof e)return qw(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qw(e,t):void 0}}function $w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||Hw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ww(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Kw=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Gw(){return Gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gw.apply(null,arguments)}function Yw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Uw(r.key),r)}}function Qw(e,t){return Qw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qw(e,t)}function Jw(e){return Jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jw(e)}function Xw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xw=function(){return!!e})()}function Zw(e,t){if(t&&("object"==Fw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function eE(e){return function(e){if(Array.isArray(e))return qw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Hw(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var tE=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(Fx){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),nE=Math.abs,rE=String.fromCharCode,iE=Object.assign;function sE(e){return e.trim()}function oE(e,t,n){return e.replace(t,n)}function aE(e,t){return e.indexOf(t)}function lE(e,t){return 0|e.charCodeAt(t)}function cE(e,t,n){return e.slice(t,n)}function uE(e){return e.length}function hE(e){return e.length}function dE(e,t){return t.push(e),e}var fE=1,pE=1,mE=0,gE=0,yE=0,vE="";function bE(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:fE,column:pE,length:o,return:""}}function _E(e,t){return iE(bE("",null,null,"",null,null,0),e,{length:-e.length},t)}function wE(){return yE=gE>0?lE(vE,--gE):0,pE--,10===yE&&(pE=1,fE--),yE}function EE(){return yE=gE<mE?lE(vE,gE++):0,pE++,10===yE&&(pE=1,fE++),yE}function SE(){return lE(vE,gE)}function xE(){return gE}function CE(e,t){return cE(vE,e,t)}function TE(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function kE(e){return fE=pE=1,mE=uE(vE=e),gE=0,[]}function IE(e){return vE="",e}function NE(e){return sE(CE(gE-1,PE(91===e?e+2:40===e?e+1:e)))}function RE(e){for(;(yE=SE())&&yE<33;)EE();return TE(e)>2||TE(yE)>3?"":" "}function AE(e,t){for(;--t&&EE()&&!(yE<48||yE>102||yE>57&&yE<65||yE>70&&yE<97););return CE(e,xE()+(t<6&&32==SE()&&32==EE()))}function PE(e){for(;EE();)switch(yE){case e:return gE;case 34:case 39:34!==e&&39!==e&&PE(yE);break;case 40:41===e&&PE(e);break;case 92:EE()}return gE}function OE(e,t){for(;EE()&&e+yE!==57&&(e+yE!==84||47!==SE()););return"/*"+CE(t,gE-1)+"*"+rE(47===e?e:EE())}function DE(e){for(;!TE(SE());)EE();return CE(e,gE)}var LE="-ms-",jE="-moz-",ME="-webkit-",FE="comm",UE="rule",VE="decl",BE="@keyframes";function zE(e,t){for(var n="",r=hE(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function qE(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case VE:return e.return=e.return||e.value;case FE:return"";case BE:return e.return=e.value+"{"+zE(e.children,r)+"}";case UE:e.value=e.props.join(",")}return uE(n=zE(e.children,r))?e.return=e.value+"{"+n+"}":""}function HE(e){return function(t){t.root||(t=t.return)&&e(t)}}function $E(e){return IE(WE("",null,null,null,[""],e=kE(e),0,[0],e))}function WE(e,t,n,r,i,s,o,a,l){for(var c=0,u=0,h=o,d=0,f=0,p=0,m=1,g=1,y=1,v=0,b="",_=i,w=s,E=r,S=b;g;)switch(p=v,v=EE()){case 40:if(108!=p&&58==lE(S,h-1)){-1!=aE(S+=oE(NE(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:S+=NE(v);break;case 9:case 10:case 13:case 32:S+=RE(p);break;case 92:S+=AE(xE()-1,7);continue;case 47:switch(SE()){case 42:case 47:dE(GE(OE(EE(),xE()),t,n),l);break;default:S+="/"}break;case 123*m:a[c++]=uE(S)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+u:-1==y&&(S=oE(S,/\f/g,"")),f>0&&uE(S)-h&&dE(f>32?YE(S+";",r,n,h-1):YE(oE(S," ","")+";",r,n,h-2),l);break;case 59:S+=";";default:if(dE(E=KE(S,t,n,c,u,i,a,b,_=[],w=[],h),s),123===v)if(0===u)WE(S,t,E,E,_,s,h,a,w);else switch(99===d&&110===lE(S,3)?100:d){case 100:case 108:case 109:case 115:WE(e,E,E,r&&dE(KE(e,E,E,0,0,i,a,b,i,_=[],h),w),i,w,h,a,r?_:w);break;default:WE(S,E,E,E,[""],w,0,a,w)}}c=u=f=0,m=y=1,b=S="",h=o;break;case 58:h=1+uE(S),f=p;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==wE())continue;switch(S+=rE(v),v*m){case 38:y=u>0?1:(S+="\f",-1);break;case 44:a[c++]=(uE(S)-1)*y,y=1;break;case 64:45===SE()&&(S+=NE(EE())),d=SE(),u=h=uE(b=S+=DE(xE())),v++;break;case 45:45===p&&2==uE(S)&&(m=0)}}return s}function KE(e,t,n,r,i,s,o,a,l,c,u){for(var h=i-1,d=0===i?s:[""],f=hE(d),p=0,m=0,g=0;p<r;++p)for(var y=0,v=cE(e,h+1,h=nE(m=o[p])),b=e;y<f;++y)(b=sE(m>0?d[y]+" "+v:oE(v,/&\f/g,d[y])))&&(l[g++]=b);return bE(e,t,n,0===i?UE:a,l,c,u)}function GE(e,t,n){return bE(e,t,n,FE,rE(yE),cE(e,2,-2),0)}function YE(e,t,n,r){return bE(e,t,n,VE,cE(e,0,r),cE(e,r+1,-1),r)}var QE=function(e,t,n){for(var r=0,i=0;r=i,i=SE(),38===r&&12===i&&(t[n]=1),!TE(i);)EE();return CE(e,gE)},JE=function(e,t){return IE(function(e,t){var n=-1,r=44;do{switch(TE(r)){case 0:38===r&&12===SE()&&(t[n]=1),e[n]+=QE(gE-1,t,n);break;case 2:e[n]+=NE(r);break;case 4:if(44===r){e[++n]=58===SE()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=rE(r)}}while(r=EE());return e}(kE(e),t))},XE=new WeakMap,ZE=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||XE.get(n))&&!r){XE.set(e,!0);for(var i=[],s=JE(t,i),o=n.props,a=0,l=0;a<s.length;a++)for(var c=0;c<o.length;c++,l++)e.props[l]=i[a]?s[a].replace(/&\f/g,o[c]):o[c]+" "+s[a]}}},eS=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function tS(e,t){switch(function(e,t){return 45^lE(e,0)?(((t<<2^lE(e,0))<<2^lE(e,1))<<2^lE(e,2))<<2^lE(e,3):0}(e,t)){case 5103:return ME+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ME+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ME+e+jE+e+LE+e+e;case 6828:case 4268:return ME+e+LE+e+e;case 6165:return ME+e+LE+"flex-"+e+e;case 5187:return ME+e+oE(e,/(\w+).+(:[^]+)/,ME+"box-$1$2"+LE+"flex-$1$2")+e;case 5443:return ME+e+LE+"flex-item-"+oE(e,/flex-|-self/,"")+e;case 4675:return ME+e+LE+"flex-line-pack"+oE(e,/align-content|flex-|-self/,"")+e;case 5548:return ME+e+LE+oE(e,"shrink","negative")+e;case 5292:return ME+e+LE+oE(e,"basis","preferred-size")+e;case 6060:return ME+"box-"+oE(e,"-grow","")+ME+e+LE+oE(e,"grow","positive")+e;case 4554:return ME+oE(e,/([^-])(transform)/g,"$1"+ME+"$2")+e;case 6187:return oE(oE(oE(e,/(zoom-|grab)/,ME+"$1"),/(image-set)/,ME+"$1"),e,"")+e;case 5495:case 3959:return oE(e,/(image-set\([^]*)/,ME+"$1$`$1");case 4968:return oE(oE(e,/(.+:)(flex-)?(.*)/,ME+"box-pack:$3"+LE+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ME+e+e;case 4095:case 3583:case 4068:case 2532:return oE(e,/(.+)-inline(.+)/,ME+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(uE(e)-1-t>6)switch(lE(e,t+1)){case 109:if(45!==lE(e,t+4))break;case 102:return oE(e,/(.+:)(.+)-([^]+)/,"$1"+ME+"$2-$3$1"+jE+(108==lE(e,t+3)?"$3":"$2-$3"))+e;case 115:return~aE(e,"stretch")?tS(oE(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==lE(e,t+1))break;case 6444:switch(lE(e,uE(e)-3-(~aE(e,"!important")&&10))){case 107:return oE(e,":",":"+ME)+e;case 101:return oE(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ME+(45===lE(e,14)?"inline-":"")+"box$3$1"+ME+"$2$3$1"+LE+"$2box$3")+e}break;case 5936:switch(lE(e,t+11)){case 114:return ME+e+LE+oE(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ME+e+LE+oE(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ME+e+LE+oE(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ME+e+LE+e+e}return e}var nS=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case VE:e.return=tS(e.value,e.length);break;case BE:return zE([_E(e,{value:oE(e.value,"@","@"+ME)})],r);case UE:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return zE([_E(e,{props:[oE(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return zE([_E(e,{props:[oE(t,/:(plac\w+)/,":"+ME+"input-$1")]}),_E(e,{props:[oE(t,/:(plac\w+)/,":-moz-$1")]}),_E(e,{props:[oE(t,/:(plac\w+)/,LE+"input-$1")]})],r)}return""}))}}],rS=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,i,s=e.stylisPlugins||nS,o={},a=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;a.push(e)}));var l,c=[ZE,eS],u=[qE,HE((function(e){l.insert(e)}))],h=function(e){var t=hE(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}(c.concat(s,u));i=function(e,t,n,r){l=n,zE($E(e?e+"{"+t.styles+"}":t.styles),h),r&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new tE({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:i};return d.sheet.hydrate(a),d};var iS=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)};var sS={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function oS(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var aS=/[A-Z]|^ms/g,lS=/_EMO_([^_]+?)_([^]*?)_EMO_/g,cS=function(e){return 45===e.charCodeAt(1)},uS=function(e){return null!=e&&"boolean"!==typeof e},hS=oS((function(e){return cS(e)?e:e.replace(aS,"-$&").toLowerCase()})),dS=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(lS,(function(e,t,n){return pS={name:t,styles:n,next:pS},t}))}return 1===sS[e]||cS(e)||"number"!==typeof t||0===t?t:t+"px"};function fS(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return pS={name:i.name,styles:i.styles,next:pS},i.name;var s=n;if(void 0!==s.styles){var o=s.next;if(void 0!==o)for(;void 0!==o;)pS={name:o.name,styles:o.styles,next:pS},o=o.next;return s.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=fS(e,t,n[i])+";";else for(var s in n){var o=n[s];if("object"!==typeof o){var a=o;null!=t&&void 0!==t[a]?r+=s+"{"+t[a]+"}":uS(a)&&(r+=hS(s)+":"+dS(s,a)+";")}else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var l=fS(e,t,o);switch(s){case"animation":case"animationName":r+=hS(s)+":"+l+";";break;default:r+=s+"{"+l+"}"}}else for(var c=0;c<o.length;c++)uS(o[c])&&(r+=hS(s)+":"+dS(s,o[c])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=pS,l=n(e);return pS=a,fS(e,t,l)}}var c=n;if(null==t)return c;var u=t[c];return void 0!==u?u:c}var pS,mS=/label:\s*([^\s;{]+)\s*(;|$)/g;function gS(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";pS=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,i+=fS(n,t,s)):i+=s[0];for(var o=1;o<e.length;o++){if(i+=fS(n,t,e[o]),r)i+=s[o]}mS.lastIndex=0;for(var a,l="";null!==(a=mS.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:pS}}var yS=!!r.useInsertionEffect&&r.useInsertionEffect,vS=yS||function(e){return e()},bS=(yS||t.useLayoutEffect,t.createContext("undefined"!==typeof HTMLElement?rS({key:"css"}):null)),_S=(bS.Provider,function(e){return(0,t.forwardRef)((function(n,r){var i=(0,t.useContext)(bS);return e(n,i,r)}))}),wS=t.createContext({});var ES={}.hasOwnProperty,SS="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",xS=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return iS(t,n,r),vS((function(){return function(e,t,n){iS(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)})),null},CS=_S((function(e,n,r){var i=e.css;"string"===typeof i&&void 0!==n.registered[i]&&(i=n.registered[i]);var s=e[SS],o=[i],a="";"string"===typeof e.className?a=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}(n.registered,o,e.className):null!=e.className&&(a=e.className+" ");var l=gS(o,void 0,t.useContext(wS));a+=n.key+"-"+l.name;var c={};for(var u in e)ES.call(e,u)&&"css"!==u&&u!==SS&&(c[u]=e[u]);return c.className=a,r&&(c.ref=r),t.createElement(t.Fragment,null,t.createElement(xS,{cache:n,serialized:l,isStringTag:"string"===typeof s}),t.createElement(s,c))})),TS=CS,kS=(n(219),function(e,n){var r=arguments;if(null==n||!ES.call(n,"css"))return t.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=TS,s[1]=function(e,t){var n={};for(var r in t)ES.call(t,r)&&(n[r]=t[r]);return n[SS]=e,n}(e,n);for(var o=2;o<i;o++)s[o]=r[o];return t.createElement.apply(null,s)});function IS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gS(t)}var NS=n(950);const RS=Math.min,AS=Math.max,PS=Math.round,OS=Math.floor,DS=e=>({x:e,y:e});function LS(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function jS(){return"undefined"!==typeof window}function MS(e){return VS(e)?(e.nodeName||"").toLowerCase():"#document"}function FS(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function US(e){var t;return null==(t=(VS(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function VS(e){return!!jS()&&(e instanceof Node||e instanceof FS(e).Node)}function BS(e){return!!jS()&&(e instanceof Element||e instanceof FS(e).Element)}function zS(e){return!!jS()&&(e instanceof HTMLElement||e instanceof FS(e).HTMLElement)}function qS(e){return!(!jS()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof FS(e).ShadowRoot)}function HS(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=KS(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function $S(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function WS(e){return["html","body","#document"].includes(MS(e))}function KS(e){return FS(e).getComputedStyle(e)}function GS(e){if("html"===MS(e))return e;const t=e.assignedSlot||e.parentNode||qS(e)&&e.host||US(e);return qS(t)?t.host:t}function YS(e){const t=GS(e);return WS(t)?e.ownerDocument?e.ownerDocument.body:e.body:zS(t)&&HS(t)?t:YS(t)}function QS(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=YS(e),s=i===(null==(r=e.ownerDocument)?void 0:r.body),o=FS(i);if(s){const e=JS(o);return t.concat(o,o.visualViewport||[],HS(i)?i:[],e&&n?QS(e):[])}return t.concat(i,QS(i,[],n))}function JS(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function XS(e){const t=KS(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=zS(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=PS(n)!==s||PS(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function ZS(e){return BS(e)?e:e.contextElement}function ex(e){const t=ZS(e);if(!zS(t))return DS(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=XS(t);let o=(s?PS(n.width):n.width)/r,a=(s?PS(n.height):n.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const tx=DS(0);function nx(e){const t=FS(e);return $S()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:tx}function rx(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),s=ZS(e);let o=DS(1);t&&(r?BS(r)&&(o=ex(r)):o=ex(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==FS(e))&&t}(s,n,r)?nx(s):DS(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const e=FS(s),t=r&&BS(r)?FS(r):r;let n=e,i=JS(n);for(;i&&r&&t!==n;){const e=ex(i),t=i.getBoundingClientRect(),r=KS(i),s=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,h*=e.y,l+=s,c+=o,n=FS(i),i=JS(n)}}return LS({width:u,height:h,x:l,y:c})}function ix(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o="function"===typeof ResizeObserver,layoutShift:a="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,c=ZS(e),u=i||s?[...c?QS(c):[],...QS(t)]:[];u.forEach((e=>{i&&e.addEventListener("scroll",n,{passive:!0}),s&&e.addEventListener("resize",n)}));const h=c&&a?function(e,t){let n,r=null;const i=US(e);function s(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function o(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),s();const{left:c,top:u,width:h,height:d}=e.getBoundingClientRect();if(a||t(),!h||!d)return;const f={rootMargin:-OS(u)+"px "+-OS(i.clientWidth-(c+h))+"px "+-OS(i.clientHeight-(u+d))+"px "+-OS(c)+"px",threshold:AS(0,RS(1,l))||1};let p=!0;function m(e){const t=e[0].intersectionRatio;if(t!==l){if(!p)return o();t?o(!1,t):n=setTimeout((()=>{o(!1,1e-7)}),1e3)}p=!1}try{r=new IntersectionObserver(m,{...f,root:i.ownerDocument})}catch(Fx){r=new IntersectionObserver(m,f)}r.observe(e)}(!0),s}(c,n):null;let d,f=-1,p=null;o&&(p=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame((()=>{var e;null==(e=p)||e.observe(t)}))),n()})),c&&!l&&p.observe(c),p.observe(t));let m=l?rx(e):null;return l&&function t(){const r=rx(e);!m||r.x===m.x&&r.y===m.y&&r.width===m.width&&r.height===m.height||n();m=r,d=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{i&&e.removeEventListener("scroll",n),s&&e.removeEventListener("resize",n)})),null==h||h(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(d)}}const sx=t.useLayoutEffect;var ox=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],ax=function(){};function lx(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function cx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=[].concat(r);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&s.push("".concat(lx(e,o)));return s.filter((function(e){return e})).map((function(e){return String(e).trim()})).join(" ")}var ux=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):"object"===Fw(e)&&null!==e?[e]:[];var t},hx=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,zw({},Ww(e,ox))},dx=function(e,t,n){var r=e.cx,i=e.getStyles,s=e.getClassNames,o=e.className;return{css:i(t,e),className:r(null!==n&&void 0!==n?n:{},s(t,e),o)}};function fx(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function px(e){return fx(e)?window.pageYOffset:e.scrollTop}function mx(e,t){fx(e)?window.scrollTo(0,t):e.scrollTop=t}function gx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ax,i=px(e),s=t-i,o=0;!function t(){var a=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}(o+=10,i,s,n);mx(e,a),o<n?window.requestAnimationFrame(t):r(e)}()}function yx(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=t.offsetHeight/3;r.bottom+i>n.bottom?mx(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):r.top-i<n.top&&mx(e,Math.max(t.offsetTop-i,0))}function vx(){try{return document.createEvent("TouchEvent"),!0}catch(Fx){return!1}}var bx=!1,_x={get passive(){return bx=!0}},wx="undefined"!==typeof window?window:{};wx.addEventListener&&wx.removeEventListener&&(wx.addEventListener("p",ax,_x),wx.removeEventListener("p",ax,!1));var Ex=bx;function Sx(e){return null!=e}function xx(e,t,n){return e?t:n}var Cx=["children","innerProps"],Tx=["children","innerProps"];function kx(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,i=e.placement,s=e.shouldScroll,o=e.isFixedPosition,a=e.controlHeight,l=function(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/;if("fixed"===t.position)return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}(n),c={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return c;var u,h=l.getBoundingClientRect().height,d=n.getBoundingClientRect(),f=d.bottom,p=d.height,m=d.top,g=n.offsetParent.getBoundingClientRect().top,y=o?window.innerHeight:fx(u=l)?window.innerHeight:u.clientHeight,v=px(l),b=parseInt(getComputedStyle(n).marginBottom,10),_=parseInt(getComputedStyle(n).marginTop,10),w=g-_,E=y-m,S=w+v,x=h-v-m,C=f-y+v+b,T=v+m-_,k=160;switch(i){case"auto":case"bottom":if(E>=p)return{placement:"bottom",maxHeight:t};if(x>=p&&!o)return s&&gx(l,C,k),{placement:"bottom",maxHeight:t};if(!o&&x>=r||o&&E>=r)return s&&gx(l,C,k),{placement:"bottom",maxHeight:o?E-b:x-b};if("auto"===i||o){var I=t,N=o?w:S;return N>=r&&(I=Math.min(N-b-a,t)),{placement:"top",maxHeight:I}}if("bottom"===i)return s&&mx(l,C),{placement:"bottom",maxHeight:t};break;case"top":if(w>=p)return{placement:"top",maxHeight:t};if(S>=p&&!o)return s&&gx(l,T,k),{placement:"top",maxHeight:t};if(!o&&S>=r||o&&w>=r){var R=t;return(!o&&S>=r||o&&w>=r)&&(R=o?w-_:S-_),s&&gx(l,T,k),{placement:"top",maxHeight:R}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}var Ix,Nx=function(e){return"auto"===e?"bottom":e},Rx=(0,t.createContext)(null),Ax=function(e){var n=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,a=e.menuShouldScrollIntoView,l=e.theme,c=((0,t.useContext)(Rx)||{}).setPortalPlacement,u=(0,t.useRef)(null),h=$w((0,t.useState)(i),2),d=h[0],f=h[1],p=$w((0,t.useState)(null),2),m=p[0],g=p[1],y=l.spacing.controlHeight;return sx((function(){var e=u.current;if(e){var t="fixed"===o,n=kx({maxHeight:i,menuEl:e,minHeight:r,placement:s,shouldScroll:a&&!t,isFixedPosition:t,controlHeight:y});f(n.maxHeight),g(n.placement),null===c||void 0===c||c(n.placement)}}),[i,s,o,a,r,c,y]),n({ref:u,placerProps:zw(zw({},e),{},{placement:m||Nx(s),maxHeight:d})})},Px=function(e){var t=e.children,n=e.innerRef,r=e.innerProps;return kS("div",Gw({},dx(e,"menu",{menu:!0}),{ref:n},r),t)},Ox=function(e,t){var n=e.theme,r=n.spacing.baseUnit,i=n.colors;return zw({textAlign:"center"},t?{}:{color:i.neutral40,padding:"".concat(2*r,"px ").concat(3*r,"px")})},Dx=Ox,Lx=Ox,jx=["size"],Mx=["innerProps","isRtl","size"];var Fx,Ux,Vx={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Bx=function(e){var t=e.size,n=Ww(e,jx);return kS("svg",Gw({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Vx},n))},zx=function(e){return kS(Bx,Gw({size:20},e),kS("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},qx=function(e){return kS(Bx,Gw({size:20},e),kS("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Hx=function(e,t){var n=e.isFocused,r=e.theme,i=r.spacing.baseUnit,s=r.colors;return zw({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:n?s.neutral60:s.neutral20,padding:2*i,":hover":{color:n?s.neutral80:s.neutral40}})},$x=Hx,Wx=Hx,Kx=function(){var e=IS.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(Ix||(Fx=["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"],Ux||(Ux=Fx.slice(0)),Ix=Object.freeze(Object.defineProperties(Fx,{raw:{value:Object.freeze(Ux)}})))),Gx=function(e){var t=e.delay,n=e.offset;return kS("span",{css:IS({animation:"".concat(Kx," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Yx=function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.innerRef,s=e.innerProps,o=e.menuIsOpen;return kS("div",Gw({ref:i},dx(e,"control",{control:!0,"control--is-disabled":n,"control--is-focused":r,"control--menu-is-open":o}),s,{"aria-disabled":n||void 0}),t)},Qx=["data"],Jx=function(e){var t=e.children,n=e.cx,r=e.getStyles,i=e.getClassNames,s=e.Heading,o=e.headingProps,a=e.innerProps,l=e.label,c=e.theme,u=e.selectProps;return kS("div",Gw({},dx(e,"group",{group:!0}),a),kS(s,Gw({},o,{selectProps:u,theme:c,getStyles:r,getClassNames:i,cx:n}),l),kS("div",null,t))},Xx=["innerRef","isDisabled","isHidden","inputClassName"],Zx={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},eC={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":zw({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Zx)},tC=function(e){return zw({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Zx)},nC=function(e){var t=e.children,n=e.innerProps;return kS("div",n,t)};var rC=function(e){var t=e.children,n=e.components,r=e.data,i=e.innerProps,s=e.isDisabled,o=e.removeProps,a=e.selectProps,l=n.Container,c=n.Label,u=n.Remove;return kS(l,{data:r,innerProps:zw(zw({},dx(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),i),selectProps:a},kS(c,{data:r,innerProps:zw({},dx(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:a},t),kS(u,{data:r,innerProps:zw(zw({},dx(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},o),selectProps:a}))},iC={ClearIndicator:function(e){var t=e.children,n=e.innerProps;return kS("div",Gw({},dx(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),t||kS(zx,null))},Control:Yx,DropdownIndicator:function(e){var t=e.children,n=e.innerProps;return kS("div",Gw({},dx(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),t||kS(qx,null))},DownChevron:qx,CrossIcon:zx,Group:Jx,GroupHeading:function(e){var t=hx(e);t.data;var n=Ww(t,Qx);return kS("div",Gw({},dx(e,"groupHeading",{"group-heading":!0}),n))},IndicatorsContainer:function(e){var t=e.children,n=e.innerProps;return kS("div",Gw({},dx(e,"indicatorsContainer",{indicators:!0}),n),t)},IndicatorSeparator:function(e){var t=e.innerProps;return kS("span",Gw({},t,dx(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,n=e.value,r=hx(e),i=r.innerRef,s=r.isDisabled,o=r.isHidden,a=r.inputClassName,l=Ww(r,Xx);return kS("div",Gw({},dx(e,"input",{"input-container":!0}),{"data-value":n||""}),kS("input",Gw({className:t({input:!0},a),ref:i,style:tC(o),disabled:s},l)))},LoadingIndicator:function(e){var t=e.innerProps,n=e.isRtl,r=e.size,i=void 0===r?4:r,s=Ww(e,Mx);return kS("div",Gw({},dx(zw(zw({},s),{},{innerProps:t,isRtl:n,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),kS(Gx,{delay:0,offset:n}),kS(Gx,{delay:160,offset:!0}),kS(Gx,{delay:320,offset:!n}))},Menu:Px,MenuList:function(e){var t=e.children,n=e.innerProps,r=e.innerRef,i=e.isMulti;return kS("div",Gw({},dx(e,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:r},n),t)},MenuPortal:function(e){var n=e.appendTo,r=e.children,i=e.controlElement,s=e.innerProps,o=e.menuPlacement,a=e.menuPosition,l=(0,t.useRef)(null),c=(0,t.useRef)(null),u=$w((0,t.useState)(Nx(o)),2),h=u[0],d=u[1],f=(0,t.useMemo)((function(){return{setPortalPlacement:d}}),[]),p=$w((0,t.useState)(null),2),m=p[0],g=p[1],y=(0,t.useCallback)((function(){if(i){var e=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(i),t="fixed"===a?0:window.pageYOffset,n=e[h]+t;n===(null===m||void 0===m?void 0:m.offset)&&e.left===(null===m||void 0===m?void 0:m.rect.left)&&e.width===(null===m||void 0===m?void 0:m.rect.width)||g({offset:n,rect:e})}}),[i,a,h,null===m||void 0===m?void 0:m.offset,null===m||void 0===m?void 0:m.rect.left,null===m||void 0===m?void 0:m.rect.width]);sx((function(){y()}),[y]);var v=(0,t.useCallback)((function(){"function"===typeof c.current&&(c.current(),c.current=null),i&&l.current&&(c.current=ix(i,l.current,y,{elementResize:"ResizeObserver"in window}))}),[i,y]);sx((function(){v()}),[v]);var b=(0,t.useCallback)((function(e){l.current=e,v()}),[v]);if(!n&&"fixed"!==a||!m)return null;var _=kS("div",Gw({ref:b},dx(zw(zw({},e),{},{offset:m.offset,position:a,rect:m.rect}),"menuPortal",{"menu-portal":!0}),s),r);return kS(Rx.Provider,{value:f},n?(0,NS.createPortal)(_,n):_)},LoadingMessage:function(e){var t=e.children,n=void 0===t?"Loading...":t,r=e.innerProps,i=Ww(e,Tx);return kS("div",Gw({},dx(zw(zw({},i),{},{children:n,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),n)},NoOptionsMessage:function(e){var t=e.children,n=void 0===t?"No options":t,r=e.innerProps,i=Ww(e,Cx);return kS("div",Gw({},dx(zw(zw({},i),{},{children:n,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),n)},MultiValue:rC,MultiValueContainer:nC,MultiValueLabel:nC,MultiValueRemove:function(e){var t=e.children,n=e.innerProps;return kS("div",Gw({role:"button"},n),t||kS(zx,{size:14}))},Option:function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.isSelected,s=e.innerRef,o=e.innerProps;return kS("div",Gw({},dx(e,"option",{option:!0,"option--is-disabled":n,"option--is-focused":r,"option--is-selected":i}),{ref:s,"aria-disabled":n},o),t)},Placeholder:function(e){var t=e.children,n=e.innerProps;return kS("div",Gw({},dx(e,"placeholder",{placeholder:!0}),n),t)},SelectContainer:function(e){var t=e.children,n=e.innerProps,r=e.isDisabled,i=e.isRtl;return kS("div",Gw({},dx(e,"container",{"--is-disabled":r,"--is-rtl":i}),n),t)},SingleValue:function(e){var t=e.children,n=e.isDisabled,r=e.innerProps;return kS("div",Gw({},dx(e,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),r),t)},ValueContainer:function(e){var t=e.children,n=e.innerProps,r=e.isMulti,i=e.hasValue;return kS("div",Gw({},dx(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":i}),n),t)}},sC=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function oC(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],i=t[n],!(r===i||sC(r)&&sC(i)))return!1;var r,i;return!0}for(var aC={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},lC=function(e){return kS("span",Gw({css:aC},e))},cC={guidance:function(e){var t=e.isSearchable,n=e.isMulti,r=e.tabSelectsValue,i=e.context,s=e.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,n=e.label,r=void 0===n?"":n,i=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return"option ".concat(r,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,n=e.focused,r=e.options,i=e.label,s=void 0===i?"":i,o=e.selectValue,a=e.isDisabled,l=e.isSelected,c=e.isAppleDevice,u=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&o)return"value ".concat(s," focused, ").concat(u(o,n),".");if("menu"===t&&c){var h=a?" disabled":"",d="".concat(l?" selected":"").concat(h);return"".concat(s).concat(d,", ").concat(u(r,n),".")}return""},onFilter:function(e){var t=e.inputValue,n=e.resultsMessage;return"".concat(n).concat(t?" for search term "+t:"",".")}},uC=function(e){var n=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,s=e.focusableOptions,o=e.isFocused,a=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,h=l.ariaLiveMessages,d=l.getOptionLabel,f=l.inputValue,p=l.isMulti,m=l.isOptionDisabled,g=l.isSearchable,y=l.menuIsOpen,v=l.options,b=l.screenReaderStatus,_=l.tabSelectsValue,w=l.isLoading,E=l["aria-label"],S=l["aria-live"],x=(0,t.useMemo)((function(){return zw(zw({},cC),h||{})}),[h]),C=(0,t.useMemo)((function(){var e="";if(n&&x.onChange){var t=n.option,r=n.options,i=n.removedValue,s=n.removedValues,o=n.value,l=i||t||function(e){return Array.isArray(e)?null:e}(o),c=l?d(l):"",u=r||s||void 0,h=u?u.map(d):[],f=zw({isDisabled:l&&m(l,a),label:c,labels:h},n);e=x.onChange(f)}return e}),[n,x,m,a,d]),T=(0,t.useMemo)((function(){var e="",t=r||i,n=!!(r&&a&&a.includes(r));if(t&&x.onFocus){var o={focused:t,label:d(t),isDisabled:m(t,a),isSelected:n,options:s,context:t===r?"menu":"value",selectValue:a,isAppleDevice:u};e=x.onFocus(o)}return e}),[r,i,d,m,x,s,a,u]),k=(0,t.useMemo)((function(){var e="";if(y&&v.length&&!w&&x.onFilter){var t=b({count:s.length});e=x.onFilter({inputValue:f,resultsMessage:t})}return e}),[s,f,y,x,v,b,w]),I="initial-input-focus"===(null===n||void 0===n?void 0:n.action),N=(0,t.useMemo)((function(){var e="";if(x.guidance){var t=i?"value":y?"menu":"input";e=x.guidance({"aria-label":E,context:t,isDisabled:r&&m(r,a),isMulti:p,isSearchable:g,tabSelectsValue:_,isInitialFocus:I})}return e}),[E,r,i,p,m,g,y,x,a,_,I]),R=kS(t.Fragment,null,kS("span",{id:"aria-selection"},C),kS("span",{id:"aria-focused"},T),kS("span",{id:"aria-results"},k),kS("span",{id:"aria-guidance"},N));return kS(t.Fragment,null,kS(lC,{id:c},I&&R),kS(lC,{"aria-live":S,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!I&&R))},hC=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],dC=new RegExp("["+hC.map((function(e){return e.letters})).join("")+"]","g"),fC={},pC=0;pC<hC.length;pC++)for(var mC=hC[pC],gC=0;gC<mC.letters.length;gC++)fC[mC.letters[gC]]=mC.base;var yC=function(e){return e.replace(dC,(function(e){return fC[e]}))},vC=function(e,t){void 0===t&&(t=oC);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var s=e.apply(this,r);return n={lastResult:s,lastArgs:r,lastThis:this},s}return r.clear=function(){n=null},r}(yC),bC=function(e){return e.replace(/^\s+|\s+$/g,"")},_C=function(e){return"".concat(e.label," ").concat(e.value)},wC=["innerRef"];function EC(e){var t=e.innerRef,n=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=Object.entries(e).filter((function(e){var t=$w(e,1)[0];return!n.includes(t)}));return i.reduce((function(e,t){var n=$w(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})}(Ww(e,wC),"onExited","in","enter","exit","appear");return kS("input",Gw({ref:t},n,{css:IS({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var SC=["boxSizing","height","overflow","paddingRight","position"],xC={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function CC(e){e.cancelable&&e.preventDefault()}function TC(e){e.stopPropagation()}function kC(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function IC(){return"ontouchstart"in window||navigator.maxTouchPoints}var NC=!("undefined"===typeof window||!window.document||!window.document.createElement),RC=0,AC={capture:!1,passive:!1};var PC=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},OC={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function DC(e){var n=e.children,r=e.lockEnabled,i=e.captureEnabled,s=function(e){var n=e.isEnabled,r=e.onBottomArrive,i=e.onBottomLeave,s=e.onTopArrive,o=e.onTopLeave,a=(0,t.useRef)(!1),l=(0,t.useRef)(!1),c=(0,t.useRef)(0),u=(0,t.useRef)(null),h=(0,t.useCallback)((function(e,t){if(null!==u.current){var n=u.current,c=n.scrollTop,h=n.scrollHeight,d=n.clientHeight,f=u.current,p=t>0,m=h-d-c,g=!1;m>t&&a.current&&(i&&i(e),a.current=!1),p&&l.current&&(o&&o(e),l.current=!1),p&&t>m?(r&&!a.current&&r(e),f.scrollTop=h,g=!0,a.current=!0):!p&&-t>c&&(s&&!l.current&&s(e),f.scrollTop=0,g=!0,l.current=!0),g&&function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()}(e)}}),[r,i,s,o]),d=(0,t.useCallback)((function(e){h(e,e.deltaY)}),[h]),f=(0,t.useCallback)((function(e){c.current=e.changedTouches[0].clientY}),[]),p=(0,t.useCallback)((function(e){var t=c.current-e.changedTouches[0].clientY;h(e,t)}),[h]),m=(0,t.useCallback)((function(e){if(e){var t=!!Ex&&{passive:!1};e.addEventListener("wheel",d,t),e.addEventListener("touchstart",f,t),e.addEventListener("touchmove",p,t)}}),[p,f,d]),g=(0,t.useCallback)((function(e){e&&(e.removeEventListener("wheel",d,!1),e.removeEventListener("touchstart",f,!1),e.removeEventListener("touchmove",p,!1))}),[p,f,d]);return(0,t.useEffect)((function(){if(n){var e=u.current;return m(e),function(){g(e)}}}),[n,m,g]),function(e){u.current=e}}({isEnabled:void 0===i||i,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),o=function(e){var n=e.isEnabled,r=e.accountForScrollbars,i=void 0===r||r,s=(0,t.useRef)({}),o=(0,t.useRef)(null),a=(0,t.useCallback)((function(e){if(NC){var t=document.body,n=t&&t.style;if(i&&SC.forEach((function(e){var t=n&&n[e];s.current[e]=t})),i&&RC<1){var r=parseInt(s.current.paddingRight,10)||0,o=document.body?document.body.clientWidth:0,a=window.innerWidth-o+r||0;Object.keys(xC).forEach((function(e){var t=xC[e];n&&(n[e]=t)})),n&&(n.paddingRight="".concat(a,"px"))}t&&IC()&&(t.addEventListener("touchmove",CC,AC),e&&(e.addEventListener("touchstart",kC,AC),e.addEventListener("touchmove",TC,AC))),RC+=1}}),[i]),l=(0,t.useCallback)((function(e){if(NC){var t=document.body,n=t&&t.style;RC=Math.max(RC-1,0),i&&RC<1&&SC.forEach((function(e){var t=s.current[e];n&&(n[e]=t)})),t&&IC()&&(t.removeEventListener("touchmove",CC,AC),e&&(e.removeEventListener("touchstart",kC,AC),e.removeEventListener("touchmove",TC,AC)))}}),[i]);return(0,t.useEffect)((function(){if(n){var e=o.current;return a(e),function(){l(e)}}}),[n,a,l]),function(e){o.current=e}}({isEnabled:r});return kS(t.Fragment,null,r&&kS("div",{onClick:PC,css:OC}),n((function(e){s(e),o(e)})))}var LC={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},jC=function(e){var t=e.name,n=e.onFocus;return kS("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:LC,value:"",onChange:function(){}})};function MC(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function FC(){return MC(/^Mac/i)}function UC(){return MC(/^iPhone/i)||MC(/^iPad/i)||FC()&&navigator.maxTouchPoints>1}var VC={clearIndicator:Wx,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.theme,s=i.colors,o=i.borderRadius;return zw({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:i.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:n?s.neutral5:s.neutral0,borderColor:n?s.neutral10:r?s.primary:s.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:r?s.primary:s.neutral30}})},dropdownIndicator:$x,group:function(e,t){var n=e.theme.spacing;return t?{}:{paddingBottom:2*n.baseUnit,paddingTop:2*n.baseUnit}},groupHeading:function(e,t){var n=e.theme,r=n.colors,i=n.spacing;return zw({label:"group",cursor:"default",display:"block"},t?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*i.baseUnit,paddingRight:3*i.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing.baseUnit,s=r.colors;return zw({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:n?s.neutral10:s.neutral20,marginBottom:2*i,marginTop:2*i})},input:function(e,t){var n=e.isDisabled,r=e.value,i=e.theme,s=i.spacing,o=i.colors;return zw(zw({visibility:n?"hidden":"visible",transform:r?"translateZ(0)":""},eC),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:o.neutral80})},loadingIndicator:function(e,t){var n=e.isFocused,r=e.size,i=e.theme,s=i.colors,o=i.spacing.baseUnit;return zw({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},t?{}:{color:n?s.neutral60:s.neutral20,padding:2*o})},loadingMessage:Lx,menu:function(e,t){var n,r=e.placement,i=e.theme,s=i.borderRadius,o=i.spacing,a=i.colors;return zw((Vw(n={label:"menu"},function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(r),"100%"),Vw(n,"position","absolute"),Vw(n,"width","100%"),Vw(n,"zIndex",1),n),t?{}:{backgroundColor:a.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},menuList:function(e,t){var n=e.maxHeight,r=e.theme.spacing.baseUnit;return zw({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:r,paddingTop:r})},menuPortal:function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},multiValue:function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,s=n.colors;return zw({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:i/2,margin:r.baseUnit/2})},multiValueLabel:function(e,t){var n=e.theme,r=n.borderRadius,i=n.colors,s=e.cropWithEllipsis;return zw({overflow:"hidden",textOverflow:s||void 0===s?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:r/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,s=n.colors,o=e.isFocused;return zw({alignItems:"center",display:"flex"},t?{}:{borderRadius:i/2,backgroundColor:o?s.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:Dx,option:function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.isSelected,s=e.theme,o=s.spacing,a=s.colors;return zw({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:i?a.primary:r?a.primary25:"transparent",color:n?a.neutral20:i?a.neutral0:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),":active":{backgroundColor:n?void 0:i?a.primary:a.primary50}})},placeholder:function(e,t){var n=e.theme,r=n.spacing,i=n.colors;return zw({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:i.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},singleValue:function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing,s=r.colors;return zw({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:n?s.neutral40:s.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},valueContainer:function(e,t){var n=e.theme.spacing,r=e.isMulti,i=e.hasValue,s=e.selectProps.controlShouldRenderValue;return zw({alignItems:"center",display:r&&i&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(2*n.baseUnit,"px")})}};var BC,zC={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},qC={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:vx(),captureMenuScroll:!vx(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var n=zw({ignoreCase:!0,ignoreAccents:!0,stringify:_C,trim:!0,matchFrom:"any"},BC),r=n.ignoreCase,i=n.ignoreAccents,s=n.stringify,o=n.trim,a=n.matchFrom,l=o?bC(t):t,c=o?bC(s(e)):s(e);return r&&(l=l.toLowerCase(),c=c.toLowerCase()),i&&(l=vC(l),c=yC(c)),"start"===a?c.substr(0,l.length)===l:c.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(Fx){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function HC(e,t,n,r){return{type:"option",data:t,isDisabled:XC(e,t,n),isSelected:ZC(e,t,n),label:QC(e,t),value:JC(e,t),index:r}}function $C(e,t){return e.options.map((function(n,r){if("options"in n){var i=n.options.map((function(n,r){return HC(e,n,t,r)})).filter((function(t){return GC(e,t)}));return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var s=HC(e,n,t,r);return GC(e,s)?s:void 0})).filter(Sx)}function WC(e){return e.reduce((function(e,t){return"group"===t.type?e.push.apply(e,eE(t.options.map((function(e){return e.data})))):e.push(t.data),e}),[])}function KC(e,t){return e.reduce((function(e,n){return"group"===n.type?e.push.apply(e,eE(n.options.map((function(e){return{data:e.data,id:"".concat(t,"-").concat(n.index,"-").concat(e.index)}})))):e.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),e}),[])}function GC(e,t){var n=e.inputValue,r=void 0===n?"":n,i=t.data,s=t.isSelected,o=t.label,a=t.value;return(!tT(e)||!s)&&eT(e,{label:o,value:a,data:i},r)}var YC=function(e,t){var n;return(null===(n=e.find((function(e){return e.data===t})))||void 0===n?void 0:n.id)||null},QC=function(e,t){return e.getOptionLabel(t)},JC=function(e,t){return e.getOptionValue(t)};function XC(e,t,n){return"function"===typeof e.isOptionDisabled&&e.isOptionDisabled(t,n)}function ZC(e,t,n){if(n.indexOf(t)>-1)return!0;if("function"===typeof e.isOptionSelected)return e.isOptionSelected(t,n);var r=JC(e,t);return n.some((function(t){return JC(e,t)===r}))}function eT(e,t,n){return!e.filterOption||e.filterOption(t,n)}var tT=function(e){var t=e.hideSelectedOptions,n=e.isMulti;return void 0===t?n:t},nT=1,rT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qw(e,t)}(r,e);var n=function(e){var t=Xw();return function(){var n,r=Jw(e);if(t){var i=Jw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Zw(this,n)}}(r);function r(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},t.blockOptionHover=!1,t.isComposing=!1,t.commonProps=void 0,t.initialTouchX=0,t.initialTouchY=0,t.openAfterFocus=!1,t.scrollToFocusedOptionOnUpdate=!1,t.userIsDragging=void 0,t.isAppleDevice=FC()||UC(),t.controlRef=null,t.getControlRef=function(e){t.controlRef=e},t.focusedOptionRef=null,t.getFocusedOptionRef=function(e){t.focusedOptionRef=e},t.menuListRef=null,t.getMenuListRef=function(e){t.menuListRef=e},t.inputRef=null,t.getInputRef=function(e){t.inputRef=e},t.focus=t.focusInput,t.blur=t.blurInput,t.onChange=function(e,n){var r=t.props,i=r.onChange,s=r.name;n.name=s,t.ariaOnChange(e,n),i(e,n)},t.setValue=function(e,n,r){var i=t.props,s=i.closeMenuOnSelect,o=i.isMulti,a=i.inputValue;t.onInputChange("",{action:"set-value",prevInputValue:a}),s&&(t.setState({inputIsHiddenAfterUpdate:!o}),t.onMenuClose()),t.setState({clearFocusValueOnUpdate:!0}),t.onChange(e,{action:n,option:r})},t.selectOption=function(e){var n=t.props,r=n.blurInputOnSelect,i=n.isMulti,s=n.name,o=t.state.selectValue,a=i&&t.isOptionSelected(e,o),l=t.isOptionDisabled(e,o);if(a){var c=t.getOptionValue(e);t.setValue(o.filter((function(e){return t.getOptionValue(e)!==c})),"deselect-option",e)}else{if(l)return void t.ariaOnChange(e,{action:"select-option",option:e,name:s});i?t.setValue([].concat(eE(o),[e]),"select-option",e):t.setValue(e,"select-option")}r&&t.blurInput()},t.removeValue=function(e){var n=t.props.isMulti,r=t.state.selectValue,i=t.getOptionValue(e),s=r.filter((function(e){return t.getOptionValue(e)!==i})),o=xx(n,s,s[0]||null);t.onChange(o,{action:"remove-value",removedValue:e}),t.focusInput()},t.clearValue=function(){var e=t.state.selectValue;t.onChange(xx(t.props.isMulti,[],null),{action:"clear",removedValues:e})},t.popValue=function(){var e=t.props.isMulti,n=t.state.selectValue,r=n[n.length-1],i=n.slice(0,n.length-1),s=xx(e,i,i[0]||null);r&&t.onChange(s,{action:"pop-value",removedValue:r})},t.getFocusedOptionId=function(e){return YC(t.state.focusableOptionsWithIds,e)},t.getFocusableOptionsWithIds=function(){return KC($C(t.props,t.state.selectValue),t.getElementId("option"))},t.getValue=function(){return t.state.selectValue},t.cx=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return cx.apply(void 0,[t.props.classNamePrefix].concat(n))},t.getOptionLabel=function(e){return QC(t.props,e)},t.getOptionValue=function(e){return JC(t.props,e)},t.getStyles=function(e,n){var r=t.props.unstyled,i=VC[e](n,r);i.boxSizing="border-box";var s=t.props.styles[e];return s?s(i,n):i},t.getClassNames=function(e,n){var r,i;return null===(r=(i=t.props.classNames)[e])||void 0===r?void 0:r.call(i,n)},t.getElementId=function(e){return"".concat(t.state.instancePrefix,"-").concat(e)},t.getComponents=function(){return e=t.props,zw(zw({},iC),e.components);var e},t.buildCategorizedOptions=function(){return $C(t.props,t.state.selectValue)},t.getCategorizedOptions=function(){return t.props.menuIsOpen?t.buildCategorizedOptions():[]},t.buildFocusableOptions=function(){return WC(t.buildCategorizedOptions())},t.getFocusableOptions=function(){return t.props.menuIsOpen?t.buildFocusableOptions():[]},t.ariaOnChange=function(e,n){t.setState({ariaSelection:zw({value:e},n)})},t.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),t.focusInput())},t.onMenuMouseMove=function(e){t.blockOptionHover=!1},t.onControlMouseDown=function(e){if(!e.defaultPrevented){var n=t.props.openMenuOnClick;t.state.isFocused?t.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&t.onMenuClose():n&&t.openMenu("first"):(n&&(t.openAfterFocus=!0),t.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()}},t.onDropdownIndicatorMouseDown=function(e){if((!e||"mousedown"!==e.type||0===e.button)&&!t.props.isDisabled){var n=t.props,r=n.isMulti,i=n.menuIsOpen;t.focusInput(),i?(t.setState({inputIsHiddenAfterUpdate:!r}),t.onMenuClose()):t.openMenu("first"),e.preventDefault()}},t.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(t.clearValue(),e.preventDefault(),t.openAfterFocus=!1,"touchend"===e.type?t.focusInput():setTimeout((function(){return t.focusInput()})))},t.onScroll=function(e){"boolean"===typeof t.props.closeMenuOnScroll?e.target instanceof HTMLElement&&fx(e.target)&&t.props.onMenuClose():"function"===typeof t.props.closeMenuOnScroll&&t.props.closeMenuOnScroll(e)&&t.props.onMenuClose()},t.onCompositionStart=function(){t.isComposing=!0},t.onCompositionEnd=function(){t.isComposing=!1},t.onTouchStart=function(e){var n=e.touches,r=n&&n.item(0);r&&(t.initialTouchX=r.clientX,t.initialTouchY=r.clientY,t.userIsDragging=!1)},t.onTouchMove=function(e){var n=e.touches,r=n&&n.item(0);if(r){var i=Math.abs(r.clientX-t.initialTouchX),s=Math.abs(r.clientY-t.initialTouchY);t.userIsDragging=i>5||s>5}},t.onTouchEnd=function(e){t.userIsDragging||(t.controlRef&&!t.controlRef.contains(e.target)&&t.menuListRef&&!t.menuListRef.contains(e.target)&&t.blurInput(),t.initialTouchX=0,t.initialTouchY=0)},t.onControlTouchEnd=function(e){t.userIsDragging||t.onControlMouseDown(e)},t.onClearIndicatorTouchEnd=function(e){t.userIsDragging||t.onClearIndicatorMouseDown(e)},t.onDropdownIndicatorTouchEnd=function(e){t.userIsDragging||t.onDropdownIndicatorMouseDown(e)},t.handleInputChange=function(e){var n=t.props.inputValue,r=e.currentTarget.value;t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange(r,{action:"input-change",prevInputValue:n}),t.props.menuIsOpen||t.onMenuOpen()},t.onInputFocus=function(e){t.props.onFocus&&t.props.onFocus(e),t.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(t.openAfterFocus||t.props.openMenuOnFocus)&&t.openMenu("first"),t.openAfterFocus=!1},t.onInputBlur=function(e){var n=t.props.inputValue;t.menuListRef&&t.menuListRef.contains(document.activeElement)?t.inputRef.focus():(t.props.onBlur&&t.props.onBlur(e),t.onInputChange("",{action:"input-blur",prevInputValue:n}),t.onMenuClose(),t.setState({focusedValue:null,isFocused:!1}))},t.onOptionHover=function(e){if(!t.blockOptionHover&&t.state.focusedOption!==e){var n=t.getFocusableOptions().indexOf(e);t.setState({focusedOption:e,focusedOptionId:n>-1?t.getFocusedOptionId(e):null})}},t.shouldHideSelectedOptions=function(){return tT(t.props)},t.onValueInputFocus=function(e){e.preventDefault(),e.stopPropagation(),t.focus()},t.onKeyDown=function(e){var n=t.props,r=n.isMulti,i=n.backspaceRemovesValue,s=n.escapeClearsValue,o=n.inputValue,a=n.isClearable,l=n.isDisabled,c=n.menuIsOpen,u=n.onKeyDown,h=n.tabSelectsValue,d=n.openMenuOnFocus,f=t.state,p=f.focusedOption,m=f.focusedValue,g=f.selectValue;if(!l&&("function"!==typeof u||(u(e),!e.defaultPrevented))){switch(t.blockOptionHover=!0,e.key){case"ArrowLeft":if(!r||o)return;t.focusValue("previous");break;case"ArrowRight":if(!r||o)return;t.focusValue("next");break;case"Delete":case"Backspace":if(o)return;if(m)t.removeValue(m);else{if(!i)return;r?t.popValue():a&&t.clearValue()}break;case"Tab":if(t.isComposing)return;if(e.shiftKey||!c||!h||!p||d&&t.isOptionSelected(p,g))return;t.selectOption(p);break;case"Enter":if(229===e.keyCode)break;if(c){if(!p)return;if(t.isComposing)return;t.selectOption(p);break}return;case"Escape":c?(t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange("",{action:"menu-close",prevInputValue:o}),t.onMenuClose()):a&&s&&t.clearValue();break;case" ":if(o)return;if(!c){t.openMenu("first");break}if(!p)return;t.selectOption(p);break;case"ArrowUp":c?t.focusOption("up"):t.openMenu("last");break;case"ArrowDown":c?t.focusOption("down"):t.openMenu("first");break;case"PageUp":if(!c)return;t.focusOption("pageup");break;case"PageDown":if(!c)return;t.focusOption("pagedown");break;case"Home":if(!c)return;t.focusOption("first");break;case"End":if(!c)return;t.focusOption("last");break;default:return}e.preventDefault()}},t.state.instancePrefix="react-select-"+(t.props.instanceId||++nT),t.state.selectValue=ux(e.value),e.menuIsOpen&&t.state.selectValue.length){var i=t.getFocusableOptionsWithIds(),s=t.buildFocusableOptions(),o=s.indexOf(t.state.selectValue[0]);t.state.focusableOptionsWithIds=i,t.state.focusedOption=s[o],t.state.focusedOptionId=YC(i,s[o])}return t}return function(e,t,n){t&&Yw(e.prototype,t),n&&Yw(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&yx(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isDisabled,r=t.menuIsOpen,i=this.state.isFocused;(i&&!n&&e.isDisabled||i&&r&&!e.menuIsOpen)&&this.focusInput(),i&&n&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):i||n||!e.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(yx(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,n=this.state,r=n.selectValue,i=n.isFocused,s=this.buildFocusableOptions(),o="first"===e?0:s.length-1;if(!this.props.isMulti){var a=s.indexOf(r[0]);a>-1&&(o=a)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:s[o],focusedOptionId:this.getFocusedOptionId(s[o])},(function(){return t.onMenuOpen()}))}},{key:"focusValue",value:function(e){var t=this.state,n=t.selectValue,r=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var i=n.indexOf(r);r||(i=-1);var s=n.length-1,o=-1;if(n.length){switch(e){case"previous":o=0===i?0:-1===i?s:i-1;break;case"next":i>-1&&i<s&&(o=i+1)}this.setState({inputIsHidden:-1!==o,focusedValue:n[o]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var i=0,s=r.indexOf(n);n||(s=-1),"up"===e?i=s>0?s-1:r.length-1:"down"===e?i=(s+1)%r.length:"pageup"===e?(i=s-t)<0&&(i=0):"pagedown"===e?(i=s+t)>r.length-1&&(i=r.length-1):"last"===e&&(i=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[i],focusedValue:null,focusedOptionId:this.getFocusedOptionId(r[i])})}}},{key:"getTheme",value:function(){return this.props.theme?"function"===typeof this.props.theme?this.props.theme(zC):zw(zw({},zC),this.props.theme):zC}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,n=this.getStyles,r=this.getClassNames,i=this.getValue,s=this.selectOption,o=this.setValue,a=this.props,l=a.isMulti,c=a.isRtl,u=a.options;return{clearValue:e,cx:t,getStyles:n,getClassNames:r,getValue:i,hasValue:this.hasValue(),isMulti:l,isRtl:c,options:u,selectOption:s,selectProps:a,setValue:o,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e,t){return XC(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return ZC(this.props,e,t)}},{key:"filterOption",value:function(e,t){return eT(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"===typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var e=this.props,n=e.isDisabled,r=e.isSearchable,i=e.inputId,s=e.inputValue,o=e.tabIndex,a=e.form,l=e.menuIsOpen,c=e.required,u=this.getComponents().Input,h=this.state,d=h.inputIsHidden,f=h.ariaSelection,p=this.commonProps,m=i||this.getElementId("input"),g=zw(zw(zw({"aria-autocomplete":"list","aria-expanded":l,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":c,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},l&&{"aria-controls":this.getElementId("listbox")}),!r&&{"aria-readonly":!0}),this.hasValue()?"initial-input-focus"===(null===f||void 0===f?void 0:f.action)&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return r?t.createElement(u,Gw({},p,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:m,innerRef:this.getInputRef,isDisabled:n,isHidden:d,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:o,form:a,type:"text",value:s},g)):t.createElement(EC,Gw({id:m,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:ax,onFocus:this.onInputFocus,disabled:n,tabIndex:o,inputMode:"none",form:a,value:""},g))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,n=this.getComponents(),r=n.MultiValue,i=n.MultiValueContainer,s=n.MultiValueLabel,o=n.MultiValueRemove,a=n.SingleValue,l=n.Placeholder,c=this.commonProps,u=this.props,h=u.controlShouldRenderValue,d=u.isDisabled,f=u.isMulti,p=u.inputValue,m=u.placeholder,g=this.state,y=g.selectValue,v=g.focusedValue,b=g.isFocused;if(!this.hasValue()||!h)return p?null:t.createElement(l,Gw({},c,{key:"placeholder",isDisabled:d,isFocused:b,innerProps:{id:this.getElementId("placeholder")}}),m);if(f)return y.map((function(n,a){var l=n===v,u="".concat(e.getOptionLabel(n),"-").concat(e.getOptionValue(n));return t.createElement(r,Gw({},c,{components:{Container:i,Label:s,Remove:o},isFocused:l,isDisabled:d,key:u,index:a,removeProps:{onClick:function(){return e.removeValue(n)},onTouchEnd:function(){return e.removeValue(n)},onMouseDown:function(e){e.preventDefault()}},data:n}),e.formatOptionLabel(n,"value"))}));if(p)return null;var _=y[0];return t.createElement(a,Gw({},c,{data:_,isDisabled:d}),this.formatOptionLabel(_,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.getComponents().ClearIndicator,n=this.commonProps,r=this.props,i=r.isDisabled,s=r.isLoading,o=this.state.isFocused;if(!this.isClearable()||!e||i||!this.hasValue()||s)return null;var a={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return t.createElement(e,Gw({},n,{innerProps:a,isFocused:o}))}},{key:"renderLoadingIndicator",value:function(){var e=this.getComponents().LoadingIndicator,n=this.commonProps,r=this.props,i=r.isDisabled,s=r.isLoading,o=this.state.isFocused;if(!e||!s)return null;return t.createElement(e,Gw({},n,{innerProps:{"aria-hidden":"true"},isDisabled:i,isFocused:o}))}},{key:"renderIndicatorSeparator",value:function(){var e=this.getComponents(),n=e.DropdownIndicator,r=e.IndicatorSeparator;if(!n||!r)return null;var i=this.commonProps,s=this.props.isDisabled,o=this.state.isFocused;return t.createElement(r,Gw({},i,{isDisabled:s,isFocused:o}))}},{key:"renderDropdownIndicator",value:function(){var e=this.getComponents().DropdownIndicator;if(!e)return null;var n=this.commonProps,r=this.props.isDisabled,i=this.state.isFocused,s={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return t.createElement(e,Gw({},n,{innerProps:s,isDisabled:r,isFocused:i}))}},{key:"renderMenu",value:function(){var e=this,n=this.getComponents(),r=n.Group,i=n.GroupHeading,s=n.Menu,o=n.MenuList,a=n.MenuPortal,l=n.LoadingMessage,c=n.NoOptionsMessage,u=n.Option,h=this.commonProps,d=this.state.focusedOption,f=this.props,p=f.captureMenuScroll,m=f.inputValue,g=f.isLoading,y=f.loadingMessage,v=f.minMenuHeight,b=f.maxMenuHeight,_=f.menuIsOpen,w=f.menuPlacement,E=f.menuPosition,S=f.menuPortalTarget,x=f.menuShouldBlockScroll,C=f.menuShouldScrollIntoView,T=f.noOptionsMessage,k=f.onMenuScrollToTop,I=f.onMenuScrollToBottom;if(!_)return null;var N,R=function(n,r){var i=n.type,s=n.data,o=n.isDisabled,a=n.isSelected,l=n.label,c=n.value,f=d===s,p=o?void 0:function(){return e.onOptionHover(s)},m=o?void 0:function(){return e.selectOption(s)},g="".concat(e.getElementId("option"),"-").concat(r),y={id:g,onClick:m,onMouseMove:p,onMouseOver:p,tabIndex:-1,role:"option","aria-selected":e.isAppleDevice?void 0:a};return t.createElement(u,Gw({},h,{innerProps:y,data:s,isDisabled:o,isSelected:a,key:g,label:l,type:i,value:c,isFocused:f,innerRef:f?e.getFocusedOptionRef:void 0}),e.formatOptionLabel(n.data,"menu"))};if(this.hasOptions())N=this.getCategorizedOptions().map((function(n){if("group"===n.type){var s=n.data,o=n.options,a=n.index,l="".concat(e.getElementId("group"),"-").concat(a),c="".concat(l,"-heading");return t.createElement(r,Gw({},h,{key:l,data:s,options:o,Heading:i,headingProps:{id:c,data:n.data},label:e.formatGroupLabel(n.data)}),n.options.map((function(e){return R(e,"".concat(a,"-").concat(e.index))})))}if("option"===n.type)return R(n,"".concat(n.index))}));else if(g){var A=y({inputValue:m});if(null===A)return null;N=t.createElement(l,h,A)}else{var P=T({inputValue:m});if(null===P)return null;N=t.createElement(c,h,P)}var O={minMenuHeight:v,maxMenuHeight:b,menuPlacement:w,menuPosition:E,menuShouldScrollIntoView:C},D=t.createElement(Ax,Gw({},h,O),(function(n){var r=n.ref,i=n.placerProps,a=i.placement,l=i.maxHeight;return t.createElement(s,Gw({},h,O,{innerRef:r,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove},isLoading:g,placement:a}),t.createElement(DC,{captureEnabled:p,onTopArrive:k,onBottomArrive:I,lockEnabled:x},(function(n){return t.createElement(o,Gw({},h,{innerRef:function(t){e.getMenuListRef(t),n(t)},innerProps:{role:"listbox","aria-multiselectable":h.isMulti,id:e.getElementId("listbox")},isLoading:g,maxHeight:l,focusedOption:d}),N)})))}));return S||"fixed"===E?t.createElement(a,Gw({},h,{appendTo:S,controlElement:this.controlRef,menuPlacement:w,menuPosition:E}),D):D}},{key:"renderFormField",value:function(){var e=this,n=this.props,r=n.delimiter,i=n.isDisabled,s=n.isMulti,o=n.name,a=n.required,l=this.state.selectValue;if(a&&!this.hasValue()&&!i)return t.createElement(jC,{name:o,onFocus:this.onValueInputFocus});if(o&&!i){if(s){if(r){var c=l.map((function(t){return e.getOptionValue(t)})).join(r);return t.createElement("input",{name:o,type:"hidden",value:c})}var u=l.length>0?l.map((function(n,r){return t.createElement("input",{key:"i-".concat(r),name:o,type:"hidden",value:e.getOptionValue(n)})})):t.createElement("input",{name:o,type:"hidden",value:""});return t.createElement("div",null,u)}var h=l[0]?this.getOptionValue(l[0]):"";return t.createElement("input",{name:o,type:"hidden",value:h})}}},{key:"renderLiveRegion",value:function(){var e=this.commonProps,n=this.state,r=n.ariaSelection,i=n.focusedOption,s=n.focusedValue,o=n.isFocused,a=n.selectValue,l=this.getFocusableOptions();return t.createElement(uC,Gw({},e,{id:this.getElementId("live-region"),ariaSelection:r,focusedOption:i,focusedValue:s,isFocused:o,selectValue:a,focusableOptions:l,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var e=this.getComponents(),n=e.Control,r=e.IndicatorsContainer,i=e.SelectContainer,s=e.ValueContainer,o=this.props,a=o.className,l=o.id,c=o.isDisabled,u=o.menuIsOpen,h=this.state.isFocused,d=this.commonProps=this.getCommonProps();return t.createElement(i,Gw({},d,{className:a,innerProps:{id:l,onKeyDown:this.onKeyDown},isDisabled:c,isFocused:h}),this.renderLiveRegion(),t.createElement(n,Gw({},d,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:c,isFocused:h,menuIsOpen:u}),t.createElement(s,Gw({},d,{isDisabled:c}),this.renderPlaceholderOrValue(),this.renderInput()),t.createElement(r,Gw({},d,{isDisabled:c}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r=t.clearFocusValueOnUpdate,i=t.inputIsHiddenAfterUpdate,s=t.ariaSelection,o=t.isFocused,a=t.prevWasFocused,l=t.instancePrefix,c=e.options,u=e.value,h=e.menuIsOpen,d=e.inputValue,f=e.isMulti,p=ux(u),m={};if(n&&(u!==n.value||c!==n.options||h!==n.menuIsOpen||d!==n.inputValue)){var g=h?function(e,t){return WC($C(e,t))}(e,p):[],y=h?KC($C(e,p),"".concat(l,"-option")):[],v=r?function(e,t){var n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}(t,p):null,b=function(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}(t,g);m={selectValue:p,focusedOption:b,focusedOptionId:YC(y,b),focusableOptionsWithIds:y,focusedValue:v,clearFocusValueOnUpdate:!1}}var _=null!=i&&e!==n?{inputIsHidden:i,inputIsHiddenAfterUpdate:void 0}:{},w=s,E=o&&a;return o&&!E&&(w={value:xx(f,p,p[0]||null),options:p,action:"initial-input-focus"},E=!a),"initial-input-focus"===(null===s||void 0===s?void 0:s.action)&&(w=null),zw(zw(zw({},m),_),{},{prevProps:e,ariaSelection:w,prevWasFocused:E})}}]),r}(t.Component);rT.defaultProps=qC;var iT=(0,t.forwardRef)((function(e,n){var r=function(e){var n=e.defaultInputValue,r=void 0===n?"":n,i=e.defaultMenuIsOpen,s=void 0!==i&&i,o=e.defaultValue,a=void 0===o?null:o,l=e.inputValue,c=e.menuIsOpen,u=e.onChange,h=e.onInputChange,d=e.onMenuClose,f=e.onMenuOpen,p=e.value,m=Ww(e,Kw),g=$w((0,t.useState)(void 0!==l?l:r),2),y=g[0],v=g[1],b=$w((0,t.useState)(void 0!==c?c:s),2),_=b[0],w=b[1],E=$w((0,t.useState)(void 0!==p?p:a),2),S=E[0],x=E[1],C=(0,t.useCallback)((function(e,t){"function"===typeof u&&u(e,t),x(e)}),[u]),T=(0,t.useCallback)((function(e,t){var n;"function"===typeof h&&(n=h(e,t)),v(void 0!==n?n:e)}),[h]),k=(0,t.useCallback)((function(){"function"===typeof f&&f(),w(!0)}),[f]),I=(0,t.useCallback)((function(){"function"===typeof d&&d(),w(!1)}),[d]),N=void 0!==l?l:y,R=void 0!==c?c:_,A=void 0!==p?p:S;return zw(zw({},m),{},{inputValue:N,menuIsOpen:R,onChange:C,onInputChange:T,onMenuClose:I,onMenuOpen:k,value:A})}(e);return t.createElement(rT,Gw({ref:n},r))})),sT=iT;function oT(e,t){return function(){return e.apply(t,arguments)}}const{toString:aT}=Object.prototype,{getPrototypeOf:lT}=Object,cT=(uT=Object.create(null),e=>{const t=aT.call(e);return uT[t]||(uT[t]=t.slice(8,-1).toLowerCase())});var uT;const hT=e=>(e=e.toLowerCase(),t=>cT(t)===e),dT=e=>t=>typeof t===e,{isArray:fT}=Array,pT=dT("undefined");const mT=hT("ArrayBuffer");const gT=dT("string"),yT=dT("function"),vT=dT("number"),bT=e=>null!==e&&"object"===typeof e,_T=e=>{if("object"!==cT(e))return!1;const t=lT(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},wT=hT("Date"),ET=hT("File"),ST=hT("Blob"),xT=hT("FileList"),CT=hT("URLSearchParams"),[TT,kT,IT,NT]=["ReadableStream","Request","Response","Headers"].map(hT);function RT(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),fT(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function AT(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const PT="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,OT=e=>!pT(e)&&e!==PT;const DT=(LT="undefined"!==typeof Uint8Array&&lT(Uint8Array),e=>LT&&e instanceof LT);var LT;const jT=hT("HTMLFormElement"),MT=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),FT=hT("RegExp"),UT=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};RT(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)},VT="abcdefghijklmnopqrstuvwxyz",BT="0123456789",zT={DIGIT:BT,ALPHA:VT,ALPHA_DIGIT:VT+VT.toUpperCase()+BT};const qT=hT("AsyncFunction"),HT=($T="function"===typeof setImmediate,WT=yT(PT.postMessage),$T?setImmediate:WT?((e,t)=>(PT.addEventListener("message",(n=>{let{source:r,data:i}=n;r===PT&&i===e&&t.length&&t.shift()()}),!1),n=>{t.push(n),PT.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e));var $T,WT;const KT="undefined"!==typeof queueMicrotask?queueMicrotask.bind(PT):"undefined"!==typeof process&&process.nextTick||HT,GT={isArray:fT,isArrayBuffer:mT,isBuffer:function(e){return null!==e&&!pT(e)&&null!==e.constructor&&!pT(e.constructor)&&yT(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||yT(e.append)&&("formdata"===(t=cT(e))||"object"===t&&yT(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&mT(e.buffer),t},isString:gT,isNumber:vT,isBoolean:e=>!0===e||!1===e,isObject:bT,isPlainObject:_T,isReadableStream:TT,isRequest:kT,isResponse:IT,isHeaders:NT,isUndefined:pT,isDate:wT,isFile:ET,isBlob:ST,isRegExp:FT,isFunction:yT,isStream:e=>bT(e)&&yT(e.pipe),isURLSearchParams:CT,isTypedArray:DT,isFileList:xT,forEach:RT,merge:function e(){const{caseless:t}=OT(this)&&this||{},n={},r=(r,i)=>{const s=t&&AT(n,i)||i;_T(n[s])&&_T(r)?n[s]=e(n[s],r):_T(r)?n[s]=e({},r):fT(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&RT(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return RT(t,((t,r)=>{n&&yT(t)?e[r]=oT(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&lT(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:cT,kindOfTest:hT,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(fT(e))return e;let t=e.length;if(!vT(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:jT,hasOwnProperty:MT,hasOwnProp:MT,reduceDescriptors:UT,freezeMethods:e=>{UT(e,((t,n)=>{if(yT(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];yT(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return fT(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:AT,global:PT,isContextDefined:OT,ALPHABET:zT,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zT.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&yT(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(bT(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=fT(e)?[]:{};return RT(e,((e,t)=>{const s=n(e,r+1);!pT(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:qT,isThenable:e=>e&&(bT(e)||yT(e))&&yT(e.then)&&yT(e.catch),setImmediate:HT,asap:KT};function YT(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}GT.inherits(YT,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:GT.toJSONObject(this.config),code:this.code,status:this.status}}});const QT=YT.prototype,JT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{JT[e]={value:e}})),Object.defineProperties(YT,JT),Object.defineProperty(QT,"isAxiosError",{value:!0}),YT.from=(e,t,n,r,i,s)=>{const o=Object.create(QT);return GT.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),YT.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const XT=YT;function ZT(e){return GT.isPlainObject(e)||GT.isArray(e)}function ek(e){return GT.endsWith(e,"[]")?e.slice(0,-2):e}function tk(e,t,n){return e?e.concat(t).map((function(e,t){return e=ek(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const nk=GT.toFlatObject(GT,{},null,(function(e){return/^is[A-Z]/.test(e)}));const rk=function(e,t,n){if(!GT.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=GT.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!GT.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&GT.isSpecCompliantForm(t);if(!GT.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(GT.isDate(e))return e.toISOString();if(!a&&GT.isBlob(e))throw new XT("Blob is not supported. Use a Buffer instead.");return GT.isArrayBuffer(e)||GT.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(GT.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(GT.isArray(e)&&function(e){return GT.isArray(e)&&!e.some(ZT)}(e)||(GT.isFileList(e)||GT.endsWith(n,"[]"))&&(a=GT.toArray(e)))return n=ek(n),a.forEach((function(e,r){!GT.isUndefined(e)&&null!==e&&t.append(!0===o?tk([n],r,s):null===o?n:n+"[]",l(e))})),!1;return!!ZT(e)||(t.append(tk(i,n,s),l(e)),!1)}const u=[],h=Object.assign(nk,{defaultVisitor:c,convertValue:l,isVisitable:ZT});if(!GT.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!GT.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),GT.forEach(n,(function(n,s){!0===(!(GT.isUndefined(n)||null===n)&&i.call(t,n,GT.isString(s)?s.trim():s,r,h))&&e(n,r?r.concat(s):[s])})),u.pop()}}(e),t};function ik(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function sk(e,t){this._pairs=[],e&&rk(e,this,t)}const ok=sk.prototype;ok.append=function(e,t){this._pairs.push([e,t])},ok.toString=function(e){const t=e?function(t){return e.call(this,t,ik)}:ik;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const ak=sk;function lk(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ck(e,t,n){if(!t)return e;const r=n&&n.encode||lk,i=n&&n.serialize;let s;if(s=i?i(t,n):GT.isURLSearchParams(t)?t.toString():new ak(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const uk=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){GT.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},hk={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dk={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ak,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},fk="undefined"!==typeof window&&"undefined"!==typeof document,pk="object"===typeof navigator&&navigator||void 0,mk=fk&&(!pk||["ReactNative","NativeScript","NS"].indexOf(pk.product)<0),gk="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,yk=fk&&window.location.href||"http://localhost",vk={...e,...dk};const bk=function(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&GT.isArray(r)?r.length:s,a)return GT.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&GT.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&GT.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(GT.isFormData(e)&&GT.isFunction(e.entries)){const n={};return GT.forEachEntry(e,((e,r)=>{t(function(e){return GT.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const _k={transitional:hk,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=GT.isObject(e);i&&GT.isHTMLForm(e)&&(e=new FormData(e));if(GT.isFormData(e))return r?JSON.stringify(bk(e)):e;if(GT.isArrayBuffer(e)||GT.isBuffer(e)||GT.isStream(e)||GT.isFile(e)||GT.isBlob(e)||GT.isReadableStream(e))return e;if(GT.isArrayBufferView(e))return e.buffer;if(GT.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return rk(e,new vk.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return vk.isNode&&GT.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=GT.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return rk(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(GT.isString(e))try{return(t||JSON.parse)(e),GT.trim(e)}catch(Fx){if("SyntaxError"!==Fx.name)throw Fx}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||_k.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(GT.isResponse(e)||GT.isReadableStream(e))return e;if(e&&GT.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(Fx){if(n){if("SyntaxError"===Fx.name)throw XT.from(Fx,XT.ERR_BAD_RESPONSE,this,null,this.response);throw Fx}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vk.classes.FormData,Blob:vk.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};GT.forEach(["delete","get","head","post","put","patch"],(e=>{_k.headers[e]={}}));const wk=_k,Ek=GT.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Sk=Symbol("internals");function xk(e){return e&&String(e).trim().toLowerCase()}function Ck(e){return!1===e||null==e?e:GT.isArray(e)?e.map(Ck):String(e)}function Tk(e,t,n,r,i){return GT.isFunction(r)?r.call(this,t,n):(i&&(t=n),GT.isString(t)?GT.isString(r)?-1!==t.indexOf(r):GT.isRegExp(r)?r.test(t):void 0:void 0)}class kk{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=xk(t);if(!i)throw new Error("header name must be a non-empty string");const s=GT.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=Ck(e))}const s=(e,t)=>GT.forEach(e,((e,n)=>i(e,n,t)));if(GT.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(GT.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Ek[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(GT.isHeaders(e))for(const[o,a]of e.entries())i(a,o,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=xk(e)){const n=GT.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(GT.isFunction(t))return t.call(this,e,n);if(GT.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=xk(e)){const n=GT.findKey(this,e);return!(!n||void 0===this[n]||t&&!Tk(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=xk(e)){const i=GT.findKey(n,e);!i||t&&!Tk(0,n[i],i,t)||(delete n[i],r=!0)}}return GT.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Tk(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return GT.forEach(this,((r,i)=>{const s=GT.findKey(n,i);if(s)return t[s]=Ck(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=Ck(r),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return GT.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&GT.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Sk]=this[Sk]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=xk(e);t[r]||(!function(e,t){const n=GT.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return GT.isArray(e)?e.forEach(r):r(e),this}}kk.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),GT.reduceDescriptors(kk.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),GT.freezeMethods(kk);const Ik=kk;function Nk(e,t){const n=this||wk,r=t||n,i=Ik.from(r.headers);let s=r.data;return GT.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function Rk(e){return!(!e||!e.__CANCEL__)}function Ak(e,t,n){XT.call(this,null==e?"canceled":e,XT.ERR_CANCELED,t,n),this.name="CanceledError"}GT.inherits(Ak,XT,{__CANCEL__:!0});const Pk=Ak;function Ok(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new XT("Request failed with status code "+n.status,[XT.ERR_BAD_REQUEST,XT.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Dk=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[o];i||(i=l),n[s]=a,r[s]=l;let u=o,h=0;for(;u!==s;)h+=n[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-i<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}};const Lk=function(e,t){let n,r,i=0,s=1e3/t;const o=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=s,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];t>=s?o(l,e):(n=l,r||(r=setTimeout((()=>{r=null,o(n)}),s-t)))},()=>n&&o(n)]},jk=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=Dk(50,250);return Lk((n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-r,l=i(a);r=s;e({loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})}),n)},Mk=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Fk=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return GT.asap((()=>e(...n)))},Uk=vk.hasStandardBrowserEnv?function(){const e=vk.navigator&&/(msie|trident)/i.test(vk.navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=GT.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},Vk=vk.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];GT.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),GT.isString(r)&&o.push("path="+r),GT.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Bk(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const zk=e=>e instanceof Ik?{...e}:e;function qk(e,t){t=t||{};const n={};function r(e,t,n){return GT.isPlainObject(e)&&GT.isPlainObject(t)?GT.merge.call({caseless:n},e,t):GT.isPlainObject(t)?GT.merge({},t):GT.isArray(t)?t.slice():t}function i(e,t,n){return GT.isUndefined(t)?GT.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function s(e,t){if(!GT.isUndefined(t))return r(void 0,t)}function o(e,t){return GT.isUndefined(t)?GT.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>i(zk(e),zk(t),!0)};return GT.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=l[r]||i,o=s(e[r],t[r],r);GT.isUndefined(o)&&s!==a||(n[r]=o)})),n}const Hk=e=>{const t=qk({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:l}=t;if(t.headers=a=Ik.from(a),t.url=ck(Bk(t.baseURL,t.url),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),GT.isFormData(r))if(vk.hasStandardBrowserEnv||vk.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(vk.hasStandardBrowserEnv&&(i&&GT.isFunction(i)&&(i=i(t)),i||!1!==i&&Uk(t.url))){const e=s&&o&&Vk.read(o);e&&a.set(s,e)}return t},$k="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=Hk(e);let i=r.data;const s=Ik.from(r.headers).normalize();let o,a,l,c,u,{responseType:h,onUploadProgress:d,onDownloadProgress:f}=r;function p(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=Ik.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Ok((function(e){t(e),p()}),(function(e){n(e),p()}),{data:h&&"text"!==h&&"json"!==h?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new XT("Request aborted",XT.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new XT("Network Error",XT.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||hk;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new XT(t,i.clarifyTimeoutError?XT.ETIMEDOUT:XT.ECONNABORTED,e,m)),m=null},void 0===i&&s.setContentType(null),"setRequestHeader"in m&&GT.forEach(s.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),GT.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),h&&"json"!==h&&(m.responseType=r.responseType),f&&([l,u]=jk(f,!0),m.addEventListener("progress",l)),d&&m.upload&&([a,c]=jk(d),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(o=t=>{m&&(n(!t||t.type?new Pk(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===vk.protocols.indexOf(y)?n(new XT("Unsupported protocol "+y+":",XT.ERR_BAD_REQUEST,e)):m.send(i||null)}))},Wk=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;r.abort(t instanceof XT?t:new Pk(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{s=null,i(new XT(`timeout ${t} of ms exceeded`,XT.ETIMEDOUT))}),t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:a}=r;return a.unsubscribe=()=>GT.asap(o),a}},Kk=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},Gk=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Yk=(e,t,n,r)=>{const i=async function*(e,t){for await(const n of Gk(e))yield*Kk(n,t)}(e,t);let s,o=0,a=e=>{s||(s=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return a(),void e.close();let s=r.byteLength;if(n){let e=o+=s;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw a(t),t}},cancel:e=>(a(e),i.return())},{highWaterMark:2})},Qk="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Jk=Qk&&"function"===typeof ReadableStream,Xk=Qk&&("function"===typeof TextEncoder?(Zk=new TextEncoder,e=>Zk.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Zk;const eI=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(Fx){return!1}},tI=Jk&&eI((()=>{let e=!1;const t=new Request(vk.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),nI=Jk&&eI((()=>GT.isReadableStream(new Response("").body))),rI={stream:nI&&(e=>e.body)};var iI;Qk&&(iI=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!rI[e]&&(rI[e]=GT.isFunction(iI[e])?t=>t[e]():(t,n)=>{throw new XT(`Response type '${e}' is not supported`,XT.ERR_NOT_SUPPORT,n)})})));const sI=async(e,t)=>{const n=GT.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(GT.isBlob(e))return e.size;if(GT.isSpecCompliantForm(e)){const t=new Request(vk.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return GT.isArrayBufferView(e)||GT.isArrayBuffer(e)?e.byteLength:(GT.isURLSearchParams(e)&&(e+=""),GT.isString(e)?(await Xk(e)).byteLength:void 0)})(t):n},oI=Qk&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:d}=Hk(e);c=c?(c+"").toLowerCase():"text";let f,p=Wk([i,s&&s.toAbortSignal()],o);const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&tI&&"get"!==n&&"head"!==n&&0!==(g=await sI(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(GT.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Mk(g,jk(Fk(l)));r=Yk(n.body,65536,e,t)}}GT.isString(h)||(h=h?"include":"omit");const i="credentials"in Request.prototype;f=new Request(t,{...d,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:i?h:void 0});let s=await fetch(f);const o=nI&&("stream"===c||"response"===c);if(nI&&(a||o&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=s[t]}));const t=GT.toFiniteNumber(s.headers.get("content-length")),[n,r]=a&&Mk(t,jk(Fk(a),!0))||[];s=new Response(Yk(s.body,65536,n,(()=>{r&&r(),m&&m()})),e)}c=c||"text";let y=await rI[GT.findKey(rI,c)||"text"](s,e);return!o&&m&&m(),await new Promise(((t,n)=>{Ok(t,n,{data:y,headers:Ik.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:f})}))}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/fetch/i.test(y.message))throw Object.assign(new XT("Network Error",XT.ERR_NETWORK,e,f),{cause:y.cause||y});throw XT.from(y,y&&y.code,e,f)}}),aI={http:null,xhr:$k,fetch:oI};GT.forEach(aI,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Fx){}Object.defineProperty(e,"adapterName",{value:t})}}));const lI=e=>`- ${e}`,cI=e=>GT.isFunction(e)||null===e||!1===e,uI=e=>{e=GT.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!cI(n)&&(r=aI[(t=String(n)).toLowerCase()],void 0===r))throw new XT(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(lI).join("\n"):" "+lI(e[0]):"as no adapter specified";throw new XT("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function hI(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Pk(null,e)}function dI(e){hI(e),e.headers=Ik.from(e.headers),e.data=Nk.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return uI(e.adapter||wk.adapter)(e).then((function(t){return hI(e),t.data=Nk.call(e,e.transformResponse,t),t.headers=Ik.from(t.headers),t}),(function(t){return Rk(t)||(hI(e),t&&t.response&&(t.response.data=Nk.call(e,e.transformResponse,t.response),t.response.headers=Ik.from(t.response.headers))),Promise.reject(t)}))}const fI="1.7.7",pI={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{pI[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const mI={};pI.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new XT(r(i," has been removed"+(t?" in "+t:"")),XT.ERR_DEPRECATED);return t&&!mI[i]&&(mI[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}};const gI={assertOptions:function(e,t,n){if("object"!==typeof e)throw new XT("options must be an object",XT.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new XT("option "+s+" must be "+n,XT.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new XT("Unknown option "+s,XT.ERR_BAD_OPTION)}},validators:pI},yI=gI.validators;class vI{constructor(e){this.defaults=e,this.interceptors={request:new uk,response:new uk}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(Fx){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=qk(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&gI.assertOptions(n,{silentJSONParsing:yI.transitional(yI.boolean),forcedJSONParsing:yI.transitional(yI.boolean),clarifyTimeoutError:yI.transitional(yI.boolean)},!1),null!=r&&(GT.isFunction(r)?t.paramsSerializer={serialize:r}:gI.assertOptions(r,{encode:yI.function,serialize:yI.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&GT.merge(i.common,i[t.method]);i&&GT.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Ik.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,h=0;if(!a){const e=[dI.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);h<u;)c=c.then(e[h++],e[h++]);return c}u=o.length;let d=t;for(h=0;h<u;){const e=o[h++],t=o[h++];try{d=e(d)}catch(Wm){t.call(this,Wm);break}}try{c=dI.call(this,d)}catch(Wm){return Promise.reject(Wm)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return ck(Bk((e=qk(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}GT.forEach(["delete","get","head","options"],(function(e){vI.prototype[e]=function(t,n){return this.request(qk(n||{},{method:e,url:t,data:(n||{}).data}))}})),GT.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(qk(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}vI.prototype[e]=t(),vI.prototype[e+"Form"]=t(!0)}));const bI=vI;class _I{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new Pk(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new _I((function(t){e=t})),cancel:e}}}const wI=_I;const EI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(EI).forEach((e=>{let[t,n]=e;EI[n]=t}));const SI=EI;const xI=function e(t){const n=new bI(t),r=oT(bI.prototype.request,n);return GT.extend(r,bI.prototype,n,{allOwnKeys:!0}),GT.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(qk(t,n))},r}(wk);xI.Axios=bI,xI.CanceledError=Pk,xI.CancelToken=wI,xI.isCancel=Rk,xI.VERSION=fI,xI.toFormData=rk,xI.AxiosError=XT,xI.Cancel=xI.CanceledError,xI.all=function(e){return Promise.all(e)},xI.spread=function(e){return function(t){return e.apply(null,t)}},xI.isAxiosError=function(e){return GT.isObject(e)&&!0===e.isAxiosError},xI.mergeConfig=qk,xI.AxiosHeaders=Ik,xI.formToJSON=e=>bk(GT.isHTMLForm(e)?new FormData(e):e),xI.getAdapter=uI,xI.HttpStatusCode=SI,xI.default=xI;const CI=xI,TI=e=>{var n,r,i,s;let{setCurrentPage:o}=e;const[a,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!0),[h,d]=(0,t.useState)(!1),[f,p]=(0,t.useState)({}),[m,g]=(0,t.useState)(null),[y,v]=(0,t.useState)(!1),[b,_]=(0,t.useState)([]),[w,E]=(0,t.useState)([]),[S,x]=(0,t.useState)(0),[C]=(0,t.useState)([{value:"Accounting",label:"Accounting"},{value:"Aerospace Engineering",label:"Aerospace Engineering"},{value:"Computer Science",label:"Computer Science"}]),[T]=(0,t.useState)([{value:"Math",label:"Math"},{value:"Physics",label:"Physics"},{value:"Chemistry",label:"Chemistry"},{value:"Biology",label:"Biology"},{value:"English",label:"English"},{value:"History",label:"History"}]);(0,t.useEffect)((()=>{(async()=>{try{const e=(await CI.get("http://universities.hipolabs.com/search?country=United%20States")).data.map((e=>({value:e.name,label:e.name})));E(e)}catch(Wm){console.error("Error fetching universities:",Wm)}})()}),[]),(0,t.useEffect)((()=>{const e=rw.onAuthStateChanged((e=>{if(e){const t=np(qd(iw,"users",e.uid),(async e=>{if(e.exists()){const t=e.data();l(t),p(t);const n=t.ratings||[],r=n.length>0?(n.reduce(((e,t)=>e+t),0)/n.length).toFixed(1):0;x(r)}u(!1)}));return()=>t()}l({}),u(!1)}));return()=>e()}),[]),(0,t.useEffect)((()=>{const e=async e=>{const t=await Promise.all(e.participants.map((async e=>{const t=qd(iw,"users",e),n=await Qf(t);return n.exists()?n.data().displayName:e})));return{...e,participants:t}};(async()=>{const t=rw.currentUser;if(!t)return;const n=np(zd(iw,"studySessions"),(async n=>{const r=await Promise.all(n.docs.map((e=>({id:e.id,...e.data()}))).filter((e=>e.hostId===t.uid||e.participants.includes(t.uid))).map(e));_(r)}),(e=>{console.error("Error fetching study sessions:",e)}))})()}),[]);const k=e=>{const{name:t,value:n}=e.target;p((e=>({...e,[t]:n})))};return c?(0,bw.jsx)("p",{children:"Loading..."}):(0,bw.jsxs)("div",{className:"space-y-6",children:[(0,bw.jsx)(Dw,{children:(0,bw.jsx)(jw,{className:"pt-6",children:(0,bw.jsxs)("div",{className:"flex items-start space-x-6",children:[(0,bw.jsxs)("div",{className:"relative",children:[(0,bw.jsx)("div",{className:"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center overflow-hidden",children:null!==a&&void 0!==a&&a.profilePicture?(0,bw.jsx)("img",{src:a.profilePicture,alt:a.displayName||"Profile Picture",className:"w-full h-full object-cover rounded-full"}):(0,bw.jsx)(pw,{size:40,className:"text-blue-600"})}),h&&(0,bw.jsxs)("div",{className:"mt-2 flex flex-col items-center",children:[(0,bw.jsx)("label",{htmlFor:"profileImage",className:"bg-blue-600 text-white px-4 py-2 rounded-lg cursor-pointer",children:"Choose Photo"}),(0,bw.jsx)("input",{type:"file",id:"profileImage",accept:"image/*",onChange:e=>{e.target.files[0]&&g(e.target.files[0])},className:"hidden"}),y&&(0,bw.jsx)("p",{className:"text-xs text-blue-500 mt-1",children:"Uploading..."})]})]}),(0,bw.jsxs)("div",{className:"flex-1",children:[(0,bw.jsxs)("div",{className:"flex justify-between",children:[(0,bw.jsxs)("div",{children:[h?(0,bw.jsx)("input",{type:"text",name:"displayName",value:f.displayName||"",onChange:k,className:"text-2xl font-bold border-b-2 outline-none"}):(0,bw.jsx)("h2",{className:"text-2xl font-bold",children:(null===a||void 0===a?void 0:a.displayName)||"No Name Provided"}),(0,bw.jsxs)("p",{className:"text-lg text-gray-500",children:["@",(null===a||void 0===a?void 0:a.username)||"username"]}),(0,bw.jsxs)("div",{className:"flex items-center space-x-4 text-gray-600 mt-1",children:[(0,bw.jsxs)("div",{className:"flex items-center",children:[(0,bw.jsx)(Rw,{className:"w-4 h-4 mr-1"}),h?(0,bw.jsx)(sT,{options:C,value:C.find((e=>e.value===f.major)),onChange:e=>p({...f,major:e.value}),placeholder:"Select Major",className:"w-full"}):(0,bw.jsx)("span",{className:"text-sm",children:(null===a||void 0===a?void 0:a.major)||"Undeclared"})]}),(0,bw.jsxs)("div",{className:"flex items-center",children:[(0,bw.jsx)(Aw,{className:"w-4 h-4 mr-1"}),h?(0,bw.jsx)(sT,{options:w,value:w.find((e=>e.value===f.university)),onChange:e=>p({...f,university:e.value}),placeholder:"Select University",className:"w-full"}):(0,bw.jsx)("span",{className:"text-sm",children:(null===a||void 0===a?void 0:a.university)||"No University Provided"})]})]})]}),h?(0,bw.jsx)("button",{onClick:async()=>{const e=rw.currentUser;if(e)try{const t=qd(iw,"users",e.uid);await Zf(t,f),l(f),d(!1),alert("Profile updated successfully!")}catch(Wm){console.error("Error updating profile:",Wm)}m&&(await(async()=>{if(!m)return;const e=rw.currentUser,t=Tm(sw,`profileImages/${e.uid}/${m.name}`);v(!0);try{await xm(t,m);const n=await Cm(t);await Zf(qd(iw,"users",e.uid),{profilePicture:n}),l((e=>({...e,profilePicture:n}))),p((e=>({...e,profilePicture:n}))),alert("Profile picture updated successfully!")}catch(Wm){console.error("Error uploading profile picture:",Wm)}finally{v(!1)}})(),g(null))},className:"bg-green-600 text-white px-4 py-2 rounded-lg",children:"Save"}):(0,bw.jsx)("button",{onClick:()=>{d((e=>!e))},className:"bg-blue-600 text-white px-4 py-2 rounded-lg",children:"Edit Profile"})]}),(0,bw.jsx)("p",{className:"mt-4 text-gray-600",children:(null===a||void 0===a?void 0:a.email)||"No Email Provided"}),(0,bw.jsxs)("div",{className:"mt-4",children:[(0,bw.jsx)("h3",{className:"font-semibold",children:"Bio:"}),h?(0,bw.jsx)("textarea",{name:"bio",value:f.bio||"",onChange:k,className:"w-full border-b-2 outline-none"}):(0,bw.jsx)("p",{children:(null===a||void 0===a?void 0:a.bio)||"No bio provided."})]})]})]})})}),(0,bw.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,bw.jsx)(Dw,{onClick:()=>o("connections"),className:"cursor-pointer",children:(0,bw.jsxs)(jw,{className:"pt-6 text-center",children:[(0,bw.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(null===a||void 0===a?void 0:a.studyBuddies)||0}),(0,bw.jsx)("p",{className:"text-gray-600",children:"Study Buddies"})]})}),(0,bw.jsx)(Dw,{children:(0,bw.jsxs)(jw,{className:"pt-6 text-center",children:[(0,bw.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(null===a||void 0===a?void 0:a.sessionsCompleted)||0}),(0,bw.jsx)("p",{className:"text-gray-600",children:"Sessions Completed"})]})}),(0,bw.jsx)(Dw,{children:(0,bw.jsxs)(jw,{className:"pt-6 text-center",children:[(0,bw.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(null===a||void 0===a?void 0:a.hoursStudied)||0}),(0,bw.jsx)("p",{className:"text-gray-600",children:"Hours Studied"})]})}),(0,bw.jsx)(Dw,{children:(0,bw.jsxs)(jw,{className:"pt-6 text-center",children:[(0,bw.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[S," / 5"]}),(0,bw.jsx)("p",{className:"text-gray-600",children:"Average Rating"})]})})]}),(0,bw.jsxs)(Dw,{children:[(0,bw.jsx)(Lw,{children:(0,bw.jsxs)(Mw,{className:"flex items-center",children:[(0,bw.jsx)(Pw,{className:"mr-2"}),"Subjects I Can Help With"]})}),(0,bw.jsx)(jw,{children:h?(0,bw.jsx)(sT,{isMulti:!0,options:T,value:(null===(n=f.subjects)||void 0===n?void 0:n.map((e=>T.find((t=>t.value===e)))))||[],onChange:e=>p({...f,subjects:e.map((e=>e.value))}),placeholder:"Select Subjects",className:"w-full"}):(0,bw.jsx)("div",{className:"flex flex-wrap gap-2",children:(null===a||void 0===a||null===(r=a.subjects)||void 0===r?void 0:r.map(((e,t)=>(0,bw.jsx)("span",{className:"bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm",children:e},t))))||(0,bw.jsx)("p",{children:"No subjects provided."})})})]}),(0,bw.jsxs)(Dw,{children:[(0,bw.jsx)(Lw,{children:(0,bw.jsxs)(Mw,{className:"flex items-center",children:[(0,bw.jsx)(Ow,{className:"mr-2"}),"Weekly Availability"]})}),(0,bw.jsx)(jw,{children:h?(0,bw.jsx)("textarea",{name:"availability",value:(null===(i=f.availability)||void 0===i?void 0:i.map((e=>`${e.day}: ${e.times}`)).join(", "))||"",onChange:e=>p({...f,availability:e.target.value.split(",").map((e=>{const[t,n]=e.split(":").map((e=>e.trim()));return{day:t,times:n}}))}),className:"w-full border-b-2 outline-none"}):(0,bw.jsx)("div",{className:"space-y-3",children:(null===a||void 0===a||null===(s=a.availability)||void 0===s?void 0:s.map(((e,t)=>(0,bw.jsxs)("div",{className:"flex items-center space-x-4 text-gray-600",children:[(0,bw.jsx)("span",{className:"w-24 font-medium",children:e.day}),(0,bw.jsx)("span",{children:e.times})]},t))))||(0,bw.jsx)("p",{children:"No availability provided."})})})]}),(0,bw.jsxs)(Dw,{children:[(0,bw.jsx)(Lw,{children:(0,bw.jsxs)(Mw,{className:"flex items-center",children:[(0,bw.jsx)(fw,{className:"mr-2"}),"Upcoming Study Sessions"]})}),(0,bw.jsx)(jw,{children:(0,bw.jsx)("div",{className:"space-y-4",children:b.length>0?b.map((e=>(0,bw.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,bw.jsx)("h4",{className:"font-semibold text-blue-600",children:e.title}),(0,bw.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,bw.jsx)(Ow,{className:"inline mr-1"})," Date: ",new Date(1e3*e.date.seconds).toLocaleDateString()," | Time: ",e.time]}),(0,bw.jsxs)("p",{className:"text-sm text-gray-600",children:["Duration: ",e.duration," hours"]}),(0,bw.jsxs)("p",{className:"text-sm text-gray-600",children:["Participants: ",e.participants.join(", ")]}),(0,bw.jsxs)("p",{className:"text-sm text-gray-600",children:["Subject: ",e.subject]})]},e.id))):(0,bw.jsx)("p",{children:"No upcoming study sessions."})})})]})]})},kI=uw("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),II=uw("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),NI=uw("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),RI=uw("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),AI=e=>{let{children:t}=e;return(0,bw.jsx)("div",{className:"alert",children:t})},PI=e=>{let{children:t}=e;return(0,bw.jsx)("div",{className:"alert-description",children:t})},OI=()=>{var e;const[n,r]=(0,t.useState)(null),i=null===(e=rw.currentUser)||void 0===e?void 0:e.uid;(0,t.useEffect)((()=>{(async()=>{if(!i)return;const e=qd(iw,"users",i),t=await Qf(e);t.exists()?r(t.data().settings||{profileVisibility:"Public",timeZone:"Pacific Time (PT)",sessionReminders:!0,partnerRequests:!0,twoFactorAuth:!1,studyHistory:"Friends Only",studyDuration:"60 minutes",breakReminders:!0}):console.error("User document does not exist.")})()}),[i]);const s=[{title:"Account Settings",icon:(0,bw.jsx)(kI,{size:20}),settings:[{name:"Profile Visibility",description:"Control who can see your profile",key:"profileVisibility",type:"select",options:["Public","Friends Only","Private"]},{name:"Time Zone",description:"Set your local time zone",key:"timeZone",type:"select",options:["Pacific Time (PT)","Mountain Time (MT)","Central Time (CT)","Eastern Time (ET)"]}]},{title:"Notification Preferences",icon:(0,bw.jsx)(yw,{size:20}),settings:[{name:"Study Session Reminders",description:"Get notifications before scheduled sessions",key:"sessionReminders",type:"toggle"},{name:"New Study Partner Requests",description:"Receive alerts for connection requests",key:"partnerRequests",type:"toggle"}]},{title:"Privacy & Security",icon:(0,bw.jsx)(II,{size:20}),settings:[{name:"Two-Factor Authentication",description:"Add an extra layer of security",key:"twoFactorAuth",type:"toggle"},{name:"Study History",description:"Choose who can see your study history",key:"studyHistory",type:"select",options:["Everyone","Friends Only","Private"]}]},{title:"Study Preferences",icon:(0,bw.jsx)(NI,{size:20}),settings:[{name:"Default Study Duration",description:"Set your preferred session length",key:"studyDuration",type:"select",options:["30 minutes","60 minutes","90 minutes","120 minutes"]},{name:"Break Reminders",description:"Get notifications to take study breaks",key:"breakReminders",type:"toggle"}]}];return n?(0,bw.jsxs)("div",{className:"space-y-6",children:[(0,bw.jsxs)("div",{className:"flex items-center justify-between",children:[(0,bw.jsx)("h1",{className:"text-2xl font-bold",children:"Settings"}),(0,bw.jsx)("button",{onClick:async()=>{if(!i)return;const e=qd(iw,"users",i);await Zf(e,{settings:n}),alert("Settings saved successfully!")},className:"bg-blue-600 text-white px-4 py-2 rounded-lg",children:"Save Changes"})]}),(0,bw.jsx)(AI,{children:(0,bw.jsx)(PI,{children:(0,bw.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,bw.jsx)(RI,{size:20}),(0,bw.jsx)("span",{children:"Your profile is currently visible to all StudyBuddy users"})]})})}),s.map(((e,t)=>(0,bw.jsxs)(Dw,{children:[(0,bw.jsx)(Lw,{children:(0,bw.jsxs)(Mw,{className:"flex items-center space-x-2",children:[e.icon,(0,bw.jsx)("span",{children:e.title})]})}),(0,bw.jsx)(jw,{children:(0,bw.jsx)("div",{className:"space-y-6",children:e.settings.map((e=>(0,bw.jsxs)("div",{className:"flex items-center justify-between",children:[(0,bw.jsxs)("div",{children:[(0,bw.jsx)("h3",{className:"font-semibold",children:e.name}),(0,bw.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),"toggle"===e.type?(0,bw.jsx)("button",{onClick:()=>{return t=e.key,void r((e=>({...e,[t]:!e[t]})));var t},className:"w-12 h-6 rounded-full transition-colors "+(n[e.key]?"bg-blue-600":"bg-gray-200"),children:(0,bw.jsx)("div",{className:"w-4 h-4 bg-white rounded-full transform transition-transform "+(n[e.key]?"translate-x-7":"translate-x-1")})}):(0,bw.jsx)("select",{value:n[e.key],onChange:t=>{return n=e.key,i=t.target.value,void r((e=>({...e,[n]:i})));var n,i},className:"border rounded-lg px-3 py-2 bg-white",children:e.options.map(((e,t)=>(0,bw.jsx)("option",{value:e,children:e},t)))})]},e.key)))})})]},t)))]}):(0,bw.jsx)("p",{children:"Loading settings..."})},DI=e=>{let{onClose:t,children:n}=e;return(0,bw.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center",children:(0,bw.jsxs)("div",{className:"bg-white rounded-lg w-96 p-6 relative",children:[(0,bw.jsx)("button",{onClick:t,className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",children:"\xd7"}),n]})})},LI=uw("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),jI=uw("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),MI=uw("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),FI=uw("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),UI=uw("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),VI=uw("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),BI=[{value:"30 minutes",label:"30 minutes"},{value:"1 hour",label:"1 hour"},{value:"1.5 hours",label:"1.5 hours"},{value:"2 hours",label:"2 hours"},{value:"2.5 hours",label:"2.5 hours"},{value:"3 hours",label:"3 hours"}],zI=()=>{var e;const[n,r]=(0,t.useState)(new Date),[i,s]=(0,t.useState)(new Date),[o,a]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[u,h]=(0,t.useState)([]),[d,f]=(0,t.useState)(null),[p,m]=(0,t.useState)("private"),[g,y]=(0,t.useState)([]),[v,b]=(0,t.useState)([]),[_,w]=(0,t.useState)("online"),[E,S]=(0,t.useState)(!0),[x,C]=(0,t.useState)(!1),[T,k]=(0,t.useState)([]),[I,N]=(0,t.useState)(""),[R,A]=(0,t.useState)([]),P=null===(e=rw.currentUser)||void 0===e?void 0:e.uid,[O,D]=(0,t.useState)(!1),[L,j]=(0,t.useState)(null),[M,F]=(0,t.useState)(null),[U,V]=(0,t.useState)(""),[B,z]=(0,t.useState)(BI[1].value);(0,t.useEffect)((()=>{M&&Y(M)}),[M]),(0,t.useEffect)((()=>{const e=rw.onAuthStateChanged((e=>{e&&(async()=>{try{const e=qd(iw,"users",rw.currentUser.uid),t=await Qf(e);if(t.exists()){const e=t.data();e.studyDuration&&z(e.studyDuration)}else console.log("No user settings found")}catch(Wm){console.error("Error fetching user settings:",Wm)}})()}));return()=>e()}),[]);const q=async e=>{if(e)try{const t=await CI.get("https://geocode.search.hereapi.com/v1/geocode",{params:{q:e,apiKey:"a2UChjt1E6FOqJZLlj5PfYdaqPR1L8eJNpBGJLdkNcs"}});A(t.data.items.map((e=>({label:e.address.label,value:e.address.label}))))}catch(Wm){console.error("Error fetching address suggestions:",Wm)}};(0,t.useEffect)((()=>{(async()=>{try{var e;const t=await Xf(zd(iw,"studySessions")),n=null===(e=rw.currentUser)||void 0===e?void 0:e.uid,r=t.docs.map((e=>{const t=e.data();return console.log("Fetched session data:",t),{id:e.id,...t,date:t.date.toDate()}})).filter((e=>e.hostId===n||(e.participants||[]).includes(n)));h(r)}catch(Wm){console.error("Error fetching study sessions:",Wm)}})(),(async()=>{try{const e=(await Xf(zd(iw,"connections"))).docs.map((e=>({id:e.id,...e.data()}))).filter((e=>"accepted"===e.status&&e.partnerId!==rw.currentUser.uid)),t=await Promise.all(e.map((async e=>{const t=await Qf(qd(iw,"users",e.partnerId)),n=t.exists()?t.data().displayName:"Unknown User";return{...e,partner:{displayName:n}}})));y(t)}catch(Wm){console.error("Error fetching connections:",Wm)}finally{S(!1)}})()}),[]);const H=e=>{b((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},$=async e=>{try{const t=new Date,n=new Date(e.date);n.setHours(0,0,0,0);const[r,i]=e.time.split(":").map(Number);if(n.setHours(r,i,0,0),n<=t)return C(!0),void setTimeout((()=>C(!1)),3e3);const s=v.map((e=>{const t=g.find((t=>t.id===e));return t?t.partnerId:null})).filter(Boolean),o={title:e.title||"Untitled Session",date:n,time:e.time||"00:00",duration:e.duration||B,subject:e.subject||"General",privacy:p,sessionType:_,address:"in-person"===_?I:"",zoomLink:"online"===_?U:"",invitees:s,participants:[],hostId:rw.currentUser.uid,acceptedInvitees:[]},l=await tp(zd(iw,"studySessions"),o);h([...u,{id:l.id,...o}]),a(!1);const c=`You have been invited to a study session titled "${o.title}". Do you want to join?`;await(async(e,t,n)=>{try{await Promise.all(e.map((async e=>{await tp(zd(iw,"notifications"),{userId:e,senderId:rw.currentUser.uid,sessionId:n,type:"session",action:t,status:"pending",unread:!0,timestamp:sp()})})))}catch(Wm){console.error("Error sending notifications:",Wm)}})(s,c,l.id)}catch(Wm){console.error("Error adding document: ",Wm)}},{daysInMonth:W,firstDayOfMonth:K}=(e=>{const t=e.getFullYear(),n=e.getMonth();return{daysInMonth:new Date(t,n+1,0).getDate(),firstDayOfMonth:new Date(t,n,1).getDay()}})(n),G=(0,t.useMemo)((()=>u.reduce(((e,t)=>{const n=new Date(t.date).toDateString();return e[n]||(e[n]=[]),e[n].push(t),e}),{})),[u]),Y=async e=>{try{const t=qd(iw,"studySessions",e.id),n=await Qf(t);if(n.exists()){const t=n.data();j({id:e.id,...t}),D(!0)}else console.error("Session document not found")}catch(Wm){console.error("Error fetching session data:",Wm)}},Q=u.filter((e=>new Date(e.date)<new Date)),J=u.filter((e=>new Date(e.date)>=new Date)),X=u.filter((e=>new Date(e.date).getMonth()===n.getMonth())).length,Z=u.reduce(((e,t)=>{const[n]=t.duration.split(" ");return e+parseFloat(n)}),0);return(0,bw.jsxs)("div",{className:"space-y-6",children:[(0,bw.jsxs)("div",{className:"flex items-center justify-between",children:[(0,bw.jsx)("h1",{className:"text-2xl font-bold",children:"Study Calendar"}),(0,bw.jsxs)("button",{onClick:()=>a(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[(0,bw.jsx)(LI,{size:20}),(0,bw.jsx)("span",{children:"New Study Session"})]})]}),(0,bw.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,bw.jsx)("div",{className:"lg:col-span-2",children:(0,bw.jsxs)(Dw,{children:[(0,bw.jsx)(Lw,{children:(0,bw.jsxs)("div",{className:"flex items-center justify-between",children:[(0,bw.jsxs)(Mw,{className:"flex items-center space-x-2",children:[(0,bw.jsx)(fw,{size:20}),(0,bw.jsxs)("span",{children:[["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]," ",n.getFullYear()]})]}),(0,bw.jsxs)("div",{className:"flex space-x-2",children:[(0,bw.jsx)("button",{onClick:()=>r(new Date(n.getFullYear(),n.getMonth()-1)),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,bw.jsx)(jI,{size:20})}),(0,bw.jsx)("button",{onClick:()=>r(new Date(n.getFullYear(),n.getMonth()+1)),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,bw.jsx)(MI,{size:20})})]})]})}),(0,bw.jsx)(jw,{children:(0,bw.jsxs)("div",{className:"grid grid-cols-7 gap-0",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e=>(0,bw.jsx)("div",{className:"p-2 text-center text-sm font-semibold text-gray-600",children:e},e))),(()=>{const e=[],t=new Date;for(let r=1;r<=W;r++){const o=new Date(n.getFullYear(),n.getMonth(),r),a=o.toDateString()===t.toDateString(),l=o.toDateString()===i.toDateString(),c=G[o.toDateString()]||[];e.push((0,bw.jsxs)("div",{onClick:()=>s(o),className:`h-24 border border-gray-100 p-2 cursor-pointer transition-colors\n            ${a?"bg-blue-50":""}\n            ${l?"ring-2 ring-blue-500":""}\n            hover:bg-gray-50`,children:[(0,bw.jsxs)("div",{className:"flex justify-between",children:[(0,bw.jsx)("span",{className:"text-sm "+(a?"font-bold text-blue-600":""),children:r}),c.length>0&&(0,bw.jsx)("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full",children:c.length})]}),(0,bw.jsx)("div",{className:"mt-1",children:c.map((e=>(0,bw.jsxs)("div",{className:"text-xs bg-blue-600 text-white p-1 rounded mt-1 truncate",children:[e.title,e.hostId!==P&&(0,bw.jsx)("button",{onClick:()=>Y(e),className:"ml-2 text-xs text-white",children:"View Details"})]},e.id)))})]},r))}return e})()]})})]})}),(0,bw.jsxs)("div",{className:"space-y-6",children:[(0,bw.jsxs)(Dw,{children:[(0,bw.jsx)(Lw,{children:(0,bw.jsx)(Mw,{children:"Upcoming Sessions"})}),(0,bw.jsx)(jw,{children:(0,bw.jsx)("div",{className:"space-y-4",children:J.map((e=>(0,bw.jsx)(AI,{children:(0,bw.jsx)(PI,{children:(0,bw.jsxs)("div",{className:"space-y-2",children:[(0,bw.jsxs)("div",{className:"flex items-center justify-between",children:[(0,bw.jsx)("h3",{className:"font-semibold",children:e.title}),(0,bw.jsx)("span",{className:"text-sm text-blue-600",children:e.subject})]}),(0,bw.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,bw.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,bw.jsx)(Ow,{size:16}),(0,bw.jsx)("span",{children:e.time})]}),(0,bw.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,bw.jsx)(kI,{size:16}),(0,bw.jsxs)("span",{children:[e.participants.length," participants"]})]}),(0,bw.jsx)("button",{onClick:()=>(e=>{e.hostId===P?(f(e),c(!0)):console.log("Only the host can edit the session")})(e),className:"ml-auto text-xs text-blue-600",children:(0,bw.jsx)(FI,{size:16})})]})]})})},e.id)))})})]}),(0,bw.jsxs)(Dw,{children:[(0,bw.jsx)(Lw,{children:(0,bw.jsxs)(Mw,{className:"flex items-center space-x-2",children:[(0,bw.jsx)(NI,{size:20}),(0,bw.jsx)("span",{children:"Study Stats"})]})}),(0,bw.jsx)(jw,{children:(0,bw.jsxs)("div",{className:"space-y-4",children:[(0,bw.jsxs)("div",{className:"flex justify-between items-center",children:[(0,bw.jsx)("span",{className:"text-gray-600",children:"Sessions this month"}),(0,bw.jsx)("span",{className:"font-semibold",children:X})]}),(0,bw.jsxs)("div",{className:"flex justify-between items-center",children:[(0,bw.jsx)("span",{className:"text-gray-600",children:"Total study hours"}),(0,bw.jsxs)("span",{className:"font-semibold",children:[Z,"h"]})]}),(0,bw.jsxs)("div",{className:"flex justify-between items-center",children:[(0,bw.jsx)("span",{className:"text-gray-600",children:"Study streak"}),(0,bw.jsx)("span",{className:"font-semibold",children:"5 days"})]})]})})]}),(0,bw.jsxs)(Dw,{children:[(0,bw.jsx)(Lw,{children:(0,bw.jsx)(Mw,{children:"Past Sessions"})}),(0,bw.jsx)(jw,{children:(0,bw.jsx)("div",{className:"space-y-4",children:Q.map((e=>(0,bw.jsx)(AI,{children:(0,bw.jsx)(PI,{children:(0,bw.jsxs)("div",{className:"space-y-2",children:[(0,bw.jsx)("h3",{className:"font-semibold",children:e.title}),(0,bw.jsxs)("p",{children:[new Date(e.date).toDateString()," - ",e.duration]})]})})},e.id)))})})]})]})]}),o&&(0,bw.jsx)(DI,{onClose:()=>a(!1),children:(0,bw.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:(0,bw.jsxs)("div",{className:"relative bg-white w-full max-w-5xl mx-4 p-8 rounded-lg shadow-lg overflow-y-auto max-h-[70vh]",children:[(0,bw.jsx)("button",{onClick:()=>a(!1),className:"absolute top-4 right-4 text-gray-600 hover:text-gray-800",children:(0,bw.jsx)(UI,{size:24})}),(0,bw.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Create New Study Session"}),x&&(0,bw.jsx)("p",{className:"text-red-500",children:"Session date must be in the future."}),(0,bw.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t={title:e.target.title.value,date:new Date(e.target.date.value),time:e.target.time.value,duration:B,subject:e.target.subject.value,address:"in-person"===_?I:"",zoomLink:"online"===_?U:""};$(t)},children:[(0,bw.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,bw.jsx)("input",{type:"text",name:"title",placeholder:"Title",className:"w-full border p-2 rounded",required:!0}),(0,bw.jsx)("input",{type:"date",name:"date",className:"w-full border p-2 rounded",required:!0}),(0,bw.jsx)("input",{type:"time",name:"time",className:"w-full border p-2 rounded",required:!0}),(0,bw.jsxs)("div",{className:"col-span-2",children:[(0,bw.jsx)("label",{className:"block text-gray-700",children:"Duration"}),(0,bw.jsx)(sT,{options:BI,defaultValue:BI[1],onChange:e=>z(e.value),className:"w-full border rounded"})]}),(0,bw.jsx)("input",{type:"text",name:"subject",placeholder:"Subject",className:"w-full border p-2 rounded",required:!0}),(0,bw.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,bw.jsx)("label",{className:"block text-gray-700",children:"Privacy"}),(0,bw.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"w-full border p-2 rounded",children:[(0,bw.jsx)("option",{value:"private",children:"Private"}),(0,bw.jsx)("option",{value:"public",children:"Public"})]})]}),(0,bw.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,bw.jsx)("label",{className:"block text-gray-700",children:"Session Type"}),(0,bw.jsxs)("select",{value:_,onChange:e=>{w(e.target.value),"online"===e.target.value?V(""):V(null)},className:"w-full border p-2 rounded",children:[(0,bw.jsx)("option",{value:"online",children:"Online"}),(0,bw.jsx)("option",{value:"in-person",children:"In-person"})]})]}),"in-person"===_&&(0,bw.jsxs)("div",{className:"relative col-span-2 space-y-2",children:[(0,bw.jsx)("label",{className:"block text-gray-700",children:"Address"}),(0,bw.jsx)("input",{type:"text",value:I,onChange:e=>{N(e.target.value),q(e.target.value)},placeholder:"Enter address",className:"w-full border p-2 rounded"}),R.length>0&&(0,bw.jsx)("ul",{className:"absolute left-0 w-full bg-white border rounded shadow-md max-h-48 overflow-y-auto mt-1 z-50",children:R.map(((e,t)=>(0,bw.jsx)("li",{onClick:()=>{N(e.label),A([])},className:"p-2 cursor-pointer hover:bg-gray-100",children:e.label},t)))})]}),"online"===_&&(0,bw.jsxs)("div",{className:"col-span-2",children:[(0,bw.jsx)("label",{className:"block text-gray-700",children:"Zoom Link"}),(0,bw.jsx)("input",{type:"text",value:U,onChange:e=>V(e.target.value),placeholder:"Enter Zoom link",className:"w-full border p-2 rounded"})]}),(0,bw.jsxs)("div",{className:"invite-connections col-span-2 space-y-4",children:[(0,bw.jsx)("label",{className:"block text-gray-700",children:"Invite Connections"}),E?(0,bw.jsx)("p",{children:"Loading connections..."}):g.length>0?(0,bw.jsx)("div",{className:"grid grid-cols-2 gap-4 max-h-32 overflow-y-auto border p-4 rounded",children:g.map((e=>{var t;return(0,bw.jsxs)("div",{onClick:()=>H(e.id),className:"border rounded-lg p-4 cursor-pointer transition-transform transform hover:scale-105 "+(v.includes(e.id)?"border-blue-600 bg-blue-50":"border-gray-300"),children:[(0,bw.jsx)("h3",{className:"text-lg font-semibold",children:(null===(t=e.partner)||void 0===t?void 0:t.displayName)||"Unknown User"}),(0,bw.jsxs)("p",{className:"text-sm text-gray-600",children:["ID: ",e.partnerId]})]},e.id)}))}):(0,bw.jsx)("p",{children:"No connections available to invite."})]})]}),(0,bw.jsx)("button",{type:"submit",className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg w-full",children:"Add Session"})]})]})})}),l&&(0,bw.jsx)(DI,{onClose:()=>c(!1),children:(0,bw.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:(0,bw.jsxs)("div",{className:"relative bg-white w-full max-w-5xl mx-4 p-8 rounded-lg shadow-lg overflow-y-auto max-h-[70vh]",children:[(0,bw.jsx)("button",{onClick:()=>c(!1),className:"absolute top-4 right-4 text-gray-600 hover:text-gray-800",children:(0,bw.jsx)(UI,{size:24})}),(0,bw.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Edit Study Session"}),x&&(0,bw.jsx)("p",{className:"text-red-500",children:"Session date must be in the future."}),(0,bw.jsxs)("form",{onSubmit:e=>{e.preventDefault();(async e=>{try{const t=new Date,n=new Date(e.date);if(n<t&&n.toDateString()!==t.toDateString())return C(!0),void setTimeout((()=>C(!1)),3e3);const r=qd(iw,"studySessions",e.id),i=await Qf(r);if(!i.exists())return void console.error("Session document not found");const s=i.data(),o=(s.participants,s.acceptedInvitees||[]),a=v.map((e=>{const t=g.find((t=>t.id===e));return t?t.partnerId:null})).filter(Boolean);await Zf(r,{...e,participants:a,acceptedInvitees:o}),h((t=>t.map((t=>t.id===e.id?{...e,participants:a,acceptedInvitees:o}:t)))),c(!1)}catch(Wm){console.error("Error updating document:",Wm)}})({...d,title:e.target.title.value,date:new Date(e.target.date.value),time:e.target.time.value,duration:e.target.duration.value,subject:e.target.subject.value,address:"in-person"===_?I:""})},children:[(0,bw.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,bw.jsx)("input",{type:"text",name:"title",defaultValue:d.title,className:"w-full border p-2 rounded",required:!0}),(0,bw.jsx)("input",{type:"date",name:"date",defaultValue:d.date.toISOString().split("T")[0],className:"w-full border p-2 rounded",required:!0}),(0,bw.jsx)("input",{type:"time",name:"time",defaultValue:d.time,className:"w-full border p-2 rounded",required:!0}),(0,bw.jsx)("input",{type:"text",name:"duration",defaultValue:d.duration,className:"w-full border p-2 rounded",required:!0}),(0,bw.jsx)("input",{type:"text",name:"subject",defaultValue:d.subject,className:"w-full border p-2 rounded",required:!0}),(0,bw.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,bw.jsx)("label",{className:"block text-gray-700",children:"Privacy"}),(0,bw.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"w-full border p-2 rounded",children:[(0,bw.jsx)("option",{value:"private",children:"Private"}),(0,bw.jsx)("option",{value:"public",children:"Public"})]})]}),(0,bw.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,bw.jsx)("label",{className:"block text-gray-700",children:"Session Type"}),(0,bw.jsxs)("select",{value:_,onChange:e=>w(e.target.value),className:"w-full border p-2 rounded",children:[(0,bw.jsx)("option",{value:"online",children:"Online"}),(0,bw.jsx)("option",{value:"in-person",children:"In-person"})]})]}),"in-person"===_&&(0,bw.jsxs)("div",{className:"col-span-2 space-y-2 mt-4",children:[(0,bw.jsx)("label",{className:"block text-gray-700",children:"Address"}),(0,bw.jsx)("input",{type:"text",value:I,onChange:e=>{N(e.target.value),q(e.target.value)},placeholder:"Enter address",className:"w-full border p-2 rounded"}),R.length>0&&(0,bw.jsx)("ul",{className:"bg-white border rounded shadow-md max-h-48 overflow-y-auto mt-2",children:R.map(((e,t)=>(0,bw.jsx)("li",{onClick:()=>{N(e.label),A([])},className:"p-2 cursor-pointer hover:bg-gray-100",children:e.label},t)))})]}),(0,bw.jsxs)("div",{className:"invite-connections col-span-2 space-y-4",children:[(0,bw.jsx)("label",{className:"block text-gray-700",children:"Invite Connections"}),E?(0,bw.jsx)("p",{children:"Loading connections..."}):g.length>0?(0,bw.jsx)("div",{className:"grid grid-cols-2 gap-4 max-h-32 overflow-y-auto border p-4 rounded",children:g.map((e=>{var t;return(0,bw.jsxs)("div",{onClick:()=>H(e.id),className:"border rounded-lg p-4 cursor-pointer transition-transform transform hover:scale-105 "+(v.includes(e.id)?"border-blue-600 bg-blue-50":"border-gray-300"),children:[(0,bw.jsx)("h3",{className:"text-lg font-semibold",children:(null===(t=e.partner)||void 0===t?void 0:t.displayName)||"Unknown User"}),(0,bw.jsxs)("p",{className:"text-sm text-gray-600",children:["ID: ",e.partnerId]})]},e.id)}))}):(0,bw.jsx)("p",{children:"No connections available to invite."})]})]}),(0,bw.jsx)("button",{type:"submit",className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg w-full",children:"Save Changes"})]}),(0,bw.jsxs)("button",{onClick:()=>(async(e,t)=>{try{await ep(qd(iw,"studySessions",e)),await Promise.all(t.map((async t=>{await tp(zd(iw,"notifications"),{userId:t,senderId:rw.currentUser.uid,sessionId:e,type:"session",action:"Session has been canceled",status:"canceled",unread:!0,timestamp:sp()})}))),h((t=>t.filter((t=>t.id!==e)))),c(!1)}catch(Wm){console.error("Error deleting session:",Wm)}})(d.id,d.invitees),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded-lg w-full flex items-center justify-center space-x-2",children:[(0,bw.jsx)(VI,{size:20}),(0,bw.jsx)("span",{children:"Delete Session"})]})]})})}),O&&L&&(0,bw.jsx)(DI,{onClose:()=>D(!1),children:(0,bw.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:(0,bw.jsxs)("div",{className:"relative bg-white w-full max-w-md mx-4 p-8 rounded-lg shadow-lg",children:[(0,bw.jsx)("button",{onClick:()=>D(!1),className:"absolute top-4 right-4 text-gray-600 hover:text-gray-800",children:(0,bw.jsx)(UI,{size:24})}),(0,bw.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Session Details"}),(0,bw.jsxs)("div",{className:"space-y-4",children:[(0,bw.jsxs)("p",{children:[(0,bw.jsx)("strong",{children:"Title:"})," ",L.title]}),(0,bw.jsxs)("p",{children:[(0,bw.jsx)("strong",{children:"Date:"})," ",new Date(L.date.toDate()).toDateString()]}),(0,bw.jsxs)("p",{children:[(0,bw.jsx)("strong",{children:"Time:"})," ",L.time]}),(0,bw.jsxs)("p",{children:[(0,bw.jsx)("strong",{children:"Duration:"})," ",L.duration]}),(0,bw.jsxs)("p",{children:[(0,bw.jsx)("strong",{children:"Subject:"})," ",L.subject]}),(0,bw.jsxs)("p",{children:[(0,bw.jsx)("strong",{children:"Session Type:"})," ","in-person"===L.sessionType?"In-Person":"Online"]}),"in-person"===L.sessionType&&L.address&&(0,bw.jsxs)("p",{children:[(0,bw.jsx)("strong",{children:"Address:"})," ",L.address]}),"online"===L.sessionType&&L.zoomLink&&(0,bw.jsxs)("p",{children:[(0,bw.jsx)("strong",{children:"Zoom Link:"})," ",(0,bw.jsx)("a",{href:L.zoomLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:L.zoomLink})]}),(0,bw.jsxs)("p",{children:[(0,bw.jsx)("strong",{children:"Privacy:"})," ","private"===L.privacy?"Private":"Public"]}),(0,bw.jsxs)("p",{children:[(0,bw.jsx)("strong",{children:"Participants:"})," ",L.participants.length]}),L.participants.includes(P)&&L.hostId!==P&&(0,bw.jsx)("button",{onClick:()=>(async e=>{try{const t=qd(iw,"studySessions",e),n=await Qf(t);if(n.exists()){const r=n.data().participants.filter((e=>e!==P));await Zf(t,{participants:r}),h((t=>t.map((t=>t.id===e?{...t,participants:r}:t)))),D(!1)}else console.error("Session document not found")}catch(Wm){console.error("Error leaving session:",Wm)}})(L.id),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded-lg w-full",children:"Leave Session"})]})]})})})]})},qI=e=>{let{...t}=e;return(0,bw.jsx)("input",{...t,className:"border rounded-md p-2 w-full"})},HI=e=>{let{children:t,...n}=e;return(0,bw.jsx)("button",{...n,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:t})},$I=[{value:"Accounting",label:"Accounting"},{value:"Aerospace Engineering",label:"Aerospace Engineering"},{value:"African American Studies",label:"African American Studies"},{value:"Agricultural Engineering",label:"Agricultural Engineering"},{value:"American Studies",label:"American Studies"},{value:"Anthropology",label:"Anthropology"},{value:"Applied Mathematics",label:"Applied Mathematics"},{value:"Architecture",label:"Architecture"},{value:"Art History",label:"Art History"},{value:"Biochemistry",label:"Biochemistry"},{value:"Biology",label:"Biology"},{value:"Biomedical Engineering",label:"Biomedical Engineering"},{value:"Business Administration",label:"Business Administration"},{value:"Chemical Engineering",label:"Chemical Engineering"},{value:"Chemistry",label:"Chemistry"},{value:"Civil Engineering",label:"Civil Engineering"},{value:"Classics",label:"Classics"},{value:"Cognitive Science",label:"Cognitive Science"},{value:"Communication Studies",label:"Communication Studies"},{value:"Computer Engineering",label:"Computer Engineering"},{value:"Computer Science",label:"Computer Science"},{value:"Construction Management",label:"Construction Management"},{value:"Criminal Justice",label:"Criminal Justice"},{value:"Dance",label:"Dance"},{value:"Data Science",label:"Data Science"},{value:"Design",label:"Design"},{value:"Dietetics",label:"Dietetics"},{value:"Digital Media",label:"Digital Media"},{value:"Earth Sciences",label:"Earth Sciences"},{value:"Ecology",label:"Ecology"},{value:"Economics",label:"Economics"},{value:"Education",label:"Education"},{value:"Electrical Engineering",label:"Electrical Engineering"},{value:"Elementary Education",label:"Elementary Education"},{value:"English Literature",label:"English Literature"},{value:"Environmental Science",label:"Environmental Science"},{value:"Ethnic Studies",label:"Ethnic Studies"},{value:"Film Studies",label:"Film Studies"},{value:"Finance",label:"Finance"},{value:"Forensic Science",label:"Forensic Science"},{value:"French",label:"French"},{value:"Gender Studies",label:"Gender Studies"},{value:"Geography",label:"Geography"},{value:"Geology",label:"Geology"},{value:"German Studies",label:"German Studies"},{value:"Graphic Design",label:"Graphic Design"},{value:"Health Sciences",label:"Health Sciences"},{value:"History",label:"History"},{value:"Human Resources",label:"Human Resources"},{value:"Industrial Engineering",label:"Industrial Engineering"},{value:"Information Systems",label:"Information Systems"},{value:"International Relations",label:"International Relations"},{value:"Journalism",label:"Journalism"},{value:"Kinesiology",label:"Kinesiology"},{value:"Law",label:"Law"},{value:"Linguistics",label:"Linguistics"},{value:"Management",label:"Management"},{value:"Marketing",label:"Marketing"},{value:"Materials Science",label:"Materials Science"},{value:"Mathematics",label:"Mathematics"},{value:"Mechanical Engineering",label:"Mechanical Engineering"},{value:"Media Studies",label:"Media Studies"},{value:"Medical Laboratory Science",label:"Medical Laboratory Science"},{value:"Microbiology",label:"Microbiology"},{value:"Music",label:"Music"},{value:"Neuroscience",label:"Neuroscience"},{value:"Nursing",label:"Nursing"},{value:"Nutrition",label:"Nutrition"},{value:"Occupational Therapy",label:"Occupational Therapy"},{value:"Pharmacy",label:"Pharmacy"},{value:"Philosophy",label:"Philosophy"},{value:"Physics",label:"Physics"},{value:"Political Science",label:"Political Science"},{value:"Psychology",label:"Psychology"},{value:"Public Health",label:"Public Health"},{value:"Public Policy",label:"Public Policy"},{value:"Real Estate",label:"Real Estate"},{value:"Religious Studies",label:"Religious Studies"},{value:"Social Work",label:"Social Work"},{value:"Sociology",label:"Sociology"},{value:"Software Engineering",label:"Software Engineering"},{value:"Spanish",label:"Spanish"},{value:"Special Education",label:"Special Education"},{value:"Statistics",label:"Statistics"},{value:"Supply Chain Management",label:"Supply Chain Management"},{value:"Sustainable Development",label:"Sustainable Development"},{value:"Theatre Arts",label:"Theatre Arts"},{value:"Urban Planning",label:"Urban Planning"},{value:"Veterinary Science",label:"Veterinary Science"},{value:"Visual Arts",label:"Visual Arts"},{value:"Women\u2019s Studies",label:"Women\u2019s Studies"},{value:"Zoology",label:"Zoology"},{value:"Architecture",label:"Architecture"},{value:"Environmental Engineering",label:"Environmental Engineering"},{value:"Hospitality Management",label:"Hospitality Management"},{value:"Human Services",label:"Human Services"},{value:"Marine Biology",label:"Marine Biology"},{value:"Public Administration",label:"Public Administration"},{value:"Speech Pathology",label:"Speech Pathology"},{value:"Sports Management",label:"Sports Management"}],WI=()=>{const[e,n]=(0,t.useState)("login"),[r,i]=(0,t.useState)(""),[s,o]=(0,t.useState)(null),[a,l]=(0,t.useState)(null),[c,u]=(0,t.useState)([]),[h,d]=(0,t.useState)(""),[f,p]=(0,t.useState)(""),[m,g]=(0,t.useState)(""),[y,v]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{try{const e=(await CI.get("http://universities.hipolabs.com/search?country=United%20States")).data.map((e=>({value:e.name,label:e.name})));u(e)}catch(r){console.error("Error fetching universities:",r),i("Failed to load universities. Please try again later.")}})()}),[]),function(e,t){return X(e).setPersistence(t)}(rw,Ur).catch((e=>{console.error("Error setting persistence:",e)}));const b=async t=>{var n,o;t.preventDefault();const a=t.target.email.value,l=t.target.password.value,c=(null===(n=t.target.username)||void 0===n?void 0:n.value)||"",u=(null===(o=t.target.displayName)||void 0===o?void 0:o.value)||"";try{if("login"===e){let e=a;if(!a.includes("@")){const t=Of(zd(iw,"users"),Lf("username","==",a)),n=await Xf(t);if(n.empty)return void i("No account found with this username. Please try again or sign up.");e=n.docs[0].data().email}const t=await function(e,t,n){return ht(e.app)?Promise.reject(Mt(e)):Ar(X(e),gr.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Or(e),t}))}(rw,e,l);if(!t.user.emailVerified)return i("Please verify your email address before logging in."),void await rw.signOut();console.log("Login successful")}else if("signup"===e){if(!a.endsWith(".edu"))return void i("Please use a student email to create an account.");const e=Of(zd(iw,"users"),Lf("username","==",c));if(!(await Xf(e)).empty)return void i("This username is already taken. Please choose another one.");const{user:t}=await async function(e,t,n){if(ht(e.app))return Promise.reject(Mt(e));const r=qn(e),i=Zn(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Sr,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Or(e),t})),o=await xr._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(rw,a,l);let n="";if(s){const e=Tm(sw,`profilePictures/${t.uid}/${encodeURIComponent(s.name)}`);await xm(e,s),n=await Cm(e)}await Dr(t),await function(e,t,n){e=jd(e,Vd);const r=jd(e.firestore,Wd),i=Hf(e.converter,t,n);return rp(r,[lf(af(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Tl.none())])}(qd(iw,"users",t.uid),{uid:t.uid,email:t.email,username:c,displayName:u,university:h,major:f,profilePicture:n,createdAt:sp()}),i("Verification email sent! Please check your inbox.")}}catch(r){console.error("Authentication error:",r),_(r)}},_=e=>{switch(e.code){case"auth/email-already-in-use":i("This email is already in use. Try logging in.");break;case"auth/weak-password":i("Password should be at least 6 characters long.");break;case"auth/invalid-email":i("Please enter a valid email address.");break;case"auth/user-not-found":i("No account found with this email. Sign up to create a new account.");break;case"auth/wrong-password":i("Incorrect password. Please try again.");break;default:i("Something went wrong. Please try again.")}},w=async()=>{if(i(""),y)try{let e=y;if(!y.includes("@")){const t=Of(zd(iw,"users"),Lf("username","==",y)),n=await Xf(t);if(n.empty)return void i("No account found with this username.");e=n.docs[0].data().email}await async function(e,t,n){const r=qn(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Pr(r,i,n),await Zn(r,i,"getOobCode",lr,"EMAIL_PASSWORD_PROVIDER")}(rw,e),i("Password reset email sent! Check your inbox.")}catch(r){console.error("Password reset error:",r),i("Failed to send password reset email. Please try again.")}};return(0,bw.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-500 to-purple-500 relative overflow-hidden",children:(0,bw.jsxs)(Dw,{className:"relative w-full max-w-md p-6 shadow-lg bg-white bg-opacity-90 backdrop-blur-md rounded-lg transform transition-all duration-500 ease-in-out opacity-0 animate-fade-in",children:[(0,bw.jsx)("div",{className:"text-center mb-4",children:(0,bw.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"login"===e?"Login to Your Account":"signup"===e?"Create an Account":"Forgot Password"})}),r&&(0,bw.jsx)(AI,{variant:"destructive",className:"mb-4 text-red-700 bg-red-100 p-4 rounded-lg",children:(0,bw.jsx)(PI,{children:r})}),"login"===e&&(0,bw.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,bw.jsx)(qI,{name:"email",type:"text",placeholder:"Email or Username",required:!0}),(0,bw.jsx)(qI,{name:"password",type:"password",placeholder:"Password",required:!0}),(0,bw.jsx)(HI,{type:"submit",className:"w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transform hover:scale-105 transition-all duration-300",children:"Login"}),(0,bw.jsx)("div",{className:"text-center mt-2",children:(0,bw.jsx)("button",{type:"button",onClick:()=>n("forgotPassword"),className:"text-indigo-600 hover:underline font-semibold text-sm",children:"Forgot Password?"})}),(0,bw.jsxs)("p",{className:"text-center text-sm text-gray-500 mt-3",children:["Don't have an account?"," ",(0,bw.jsx)("button",{type:"button",onClick:()=>n("signup"),className:"text-indigo-600 hover:underline font-semibold",children:"Sign Up"})]})]}),"signup"===e&&(0,bw.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,bw.jsx)("div",{className:"flex flex-col items-center mb-4",children:(0,bw.jsxs)("label",{htmlFor:"profilePicture",className:"relative cursor-pointer",children:[(0,bw.jsx)("div",{className:"w-24 h-24 rounded-full border-4 border-blue-500 flex items-center justify-center overflow-hidden",children:a?(0,bw.jsx)("img",{src:a,alt:"Profile Preview",className:"w-full h-full object-cover"}):(0,bw.jsx)("span",{className:"text-gray-400 text-center",children:"Upload Picture"})}),(0,bw.jsx)("input",{id:"profilePicture",name:"profilePicture",type:"file",accept:"image/*",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:e=>{const t=e.target.files[0];if(t){if(!["image/jpeg","image/png"].includes(t.type))return void i("Invalid file type. Please upload a JPG or PNG image.");if(t.size>5242880)return void i("File size exceeds 5 MB. Please upload a smaller image.");o(t),l(URL.createObjectURL(t))}}})]})}),(0,bw.jsx)(qI,{name:"username",placeholder:"Username",required:!0}),(0,bw.jsx)(qI,{name:"displayName",placeholder:"Full Name",required:!0}),(0,bw.jsx)(qI,{name:"email",type:"text",placeholder:"Email",required:!0}),(0,bw.jsx)(qI,{name:"password",type:"password",placeholder:"Password",required:!0}),(0,bw.jsx)(sT,{options:c,placeholder:"Select University",onChange:e=>d(e.value)}),(0,bw.jsx)(sT,{options:$I,placeholder:"Select Major",onChange:e=>p(e.value)}),(0,bw.jsx)(HI,{type:"submit",className:"w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transform hover:scale-105 transition-all duration-300",children:"Sign Up"}),(0,bw.jsxs)("p",{className:"text-center text-sm text-gray-500 mt-3",children:["Already have an account?"," ",(0,bw.jsx)("button",{type:"button",onClick:()=>n("login"),className:"text-indigo-600 hover:underline font-semibold",children:"Login"})]})]}),"forgotPassword"===e&&(0,bw.jsxs)("form",{className:"space-y-4",onSubmit:e=>{e.preventDefault(),w()},children:[(0,bw.jsx)(qI,{type:"text",placeholder:"Enter your email or username",value:y,onChange:e=>v(e.target.value),required:!0}),(0,bw.jsx)(HI,{type:"submit",className:"w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700",children:"Send Reset Email"}),(0,bw.jsxs)("p",{className:"text-center text-sm text-gray-500 mt-3",children:["Remembered your password?"," ",(0,bw.jsx)("button",{type:"button",onClick:()=>n("login"),className:"text-indigo-600 hover:underline font-semibold",children:"Login"})]})]})]})})},KI=uw("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),GI=uw("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),YI=uw("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),QI=["Computer Science","Mathematics","Physics","Chemistry","Biology","Literature"],JI=["Today","This Week","Weekends","Evenings"],XI=e=>{let{setCurrentPage:n,setSelectedUser:r}=e;const[i,s]=(0,t.useState)("partners"),[o,a]=(0,t.useState)(""),[l,c]=(0,t.useState)([]),[u,h]=(0,t.useState)(""),[d,f]=(0,t.useState)([]),[p,m]=(0,t.useState)({}),[g,y]=(0,t.useState)([]),[v,b]=(0,t.useState)([]),[_,w]=(0,t.useState)(null),[E,S]=(0,t.useState)("Anonymous User");(0,t.useEffect)((()=>rw.onAuthStateChanged((e=>{e?(w(e.uid),S(e.displayName||"User")):(w(null),S("User"))}))),[]),(0,t.useEffect)((()=>{_&&(async()=>{const e=zd(iw,"users");let t=Of(e,Ff("displayName"));o&&(t=Of(e,Lf("displayName",">=",o),Lf("displayName","<=",o+"\uf8ff")));const n=(await Xf(t)).docs.map((e=>({id:e.id,...e.data()}))).filter((e=>e.id!==_));f(n)})()}),[o,_]),(0,t.useEffect)((()=>{d.length>0&&_&&(async()=>{const e={};for(const t of d){const n=Of(zd(iw,"connections"),Lf("userId","in",[_,t.id]),Lf("partnerId","in",[_,t.id])),r=await Xf(n);if(r.empty)e[t.id]="none";else{const n=r.docs[0].data();e[t.id]=n.status}}m(e)})()}),[d,_]),(0,t.useEffect)((()=>{_&&(async()=>{try{const e=Of(zd(iw,"studySessions"),Lf("privacy","==","public")),t=await Xf(e),n=[];for(let r of t.docs){const e=r.data();if(!e||e.hostId===_)continue;let t="Unknown Host",i="/api/placeholder/40/40";if(e.hostId){const n=qd(iw,"users",e.hostId),r=await Qf(n);if(r.exists()){const e=r.data();t=e.displayName||t,i=e.profilePicture||i}}n.push({id:r.id,...e,hostName:t,hostProfilePicture:i})}y(n)}catch(Wm){console.error("Error fetching public sessions:",Wm)}})()}),[_]),(0,t.useEffect)((()=>{_&&(async()=>{const e=Of(zd(iw,"studySessions"),Lf("participants","array-contains",_)),t=(await Xf(e)).docs.map((e=>e.id));b(t)})()}),[_]);const x=d.filter((e=>{const t=0===l.length||l.includes(e.major),n=!u||e.availability===u;return t&&n}));return(0,bw.jsxs)("div",{className:"space-y-6",children:[(0,bw.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm space-y-6",children:[(0,bw.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,bw.jsxs)("div",{className:"relative flex-1",children:[(0,bw.jsx)(gw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,bw.jsx)("input",{type:"text",value:o,onChange:e=>a(e.target.value),placeholder:"Search by name, username, college, or major...",className:"w-full pl-10 pr-4 py-3 border rounded-lg"})]}),(0,bw.jsxs)("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg flex items-center space-x-2",children:[(0,bw.jsx)(gw,{size:20}),(0,bw.jsx)("span",{children:"Search"})]}),(0,bw.jsx)("button",{onClick:()=>{a(""),c([]),h("")},className:"bg-gray-200 text-gray-700 px-6 py-3 rounded-lg",children:"Clear Filters"})]}),(0,bw.jsxs)("div",{className:"flex space-x-4 border-b",children:[(0,bw.jsx)("button",{onClick:()=>s("partners"),className:"pb-3 px-4 "+("partners"===i?"border-b-2 border-blue-600 text-blue-600":"text-gray-600"),children:"Study Partners"}),(0,bw.jsx)("button",{onClick:()=>s("sessions"),className:"pb-3 px-4 "+("sessions"===i?"border-b-2 border-blue-600 text-blue-600":"text-gray-600"),children:"Study Sessions"})]})]}),"partners"===i&&(0,bw.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,bw.jsxs)(Dw,{className:"lg:col-span-1 h-fit",children:[(0,bw.jsx)(Lw,{children:(0,bw.jsxs)(Mw,{className:"flex items-center space-x-2",children:[(0,bw.jsx)(KI,{size:20}),(0,bw.jsx)("span",{children:"Filters"})]})}),(0,bw.jsxs)(jw,{className:"space-y-6",children:[(0,bw.jsxs)("div",{children:[(0,bw.jsx)("h3",{className:"font-semibold mb-2",children:"Subjects"}),(0,bw.jsx)("div",{className:"space-y-2",children:QI.map((e=>(0,bw.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,bw.jsx)("input",{type:"checkbox",className:"rounded border-gray-300",checked:l.includes(e),onChange:()=>{l.includes(e)?c(l.filter((t=>t!==e))):c([...l,e])}}),(0,bw.jsx)("span",{children:e})]},e)))})]}),(0,bw.jsxs)("div",{children:[(0,bw.jsx)("h3",{className:"font-semibold mb-2",children:"Availability"}),(0,bw.jsx)("div",{className:"space-y-2",children:JI.map((e=>(0,bw.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,bw.jsx)("input",{type:"radio",name:"availability",className:"rounded border-gray-300",checked:u===e,onChange:()=>h(e)}),(0,bw.jsx)("span",{children:e})]},e)))})]})]})]}),(0,bw.jsxs)("div",{className:"lg:col-span-3 space-y-4",children:[(0,bw.jsxs)("div",{className:"text-gray-600",children:["Showing ",x.length," results"]}),x.map((e=>{var t;return(0,bw.jsx)("div",{onClick:()=>{return t=e.id,r(t),void n("UserProfile");var t},className:"p-6 border rounded-lg shadow hover:shadow-lg cursor-pointer transition-transform transform hover:scale-105",children:(0,bw.jsx)(jw,{className:"p-6",children:(0,bw.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,bw.jsx)("img",{src:e.profilePicture||"/api/placeholder/40/40",alt:e.displayName,className:"w-12 h-12 rounded-full"}),(0,bw.jsxs)("div",{className:"flex-1",children:[(0,bw.jsxs)("div",{className:"flex justify-between items-start",children:[(0,bw.jsxs)("div",{children:[(0,bw.jsx)("h3",{className:"font-semibold text-lg",children:e.displayName}),(0,bw.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,bw.jsx)(GI,{size:16}),(0,bw.jsx)("span",{children:e.major})]})]}),(0,bw.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,bw.jsx)(YI,{className:"text-yellow-400",size:16,fill:"currentColor"}),(0,bw.jsx)("span",{className:"font-semibold",children:e.rating||"N/A"}),(0,bw.jsxs)("span",{className:"text-gray-600",children:["(",e.reviews||0,")"]})]})]}),(0,bw.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:null===(t=e.topics)||void 0===t?void 0:t.map(((e,t)=>(0,bw.jsx)("span",{className:"bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm",children:e},t)))}),(0,bw.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,bw.jsxs)("div",{className:"flex space-x-4 text-sm text-gray-600",children:[(0,bw.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,bw.jsx)(Ow,{size:16}),e.availability&&Array.isArray(e.availability)?e.availability.map(((e,t)=>(0,bw.jsxs)("div",{children:[(0,bw.jsxs)("span",{children:[e.day,": "]}),(0,bw.jsx)("span",{children:e.times})]},t))):(0,bw.jsx)("span",{children:"No availability info"})]}),(0,bw.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,bw.jsx)(Aw,{size:16}),(0,bw.jsx)("span",{children:e.location||e.college||e.university||"No info"})]})]}),(0,bw.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if("pending"!==p[e]&&"accepted"!==p[e])try{const t=await tp(zd(iw,"connections"),{userId:_,partnerId:e,status:"pending",createdAt:sp()});await tp(zd(iw,"notifications"),{userId:e,connectionId:t.id,senderId:_,type:"connection",action:"sent you a connection request",status:"pending",unread:!0,timestamp:sp()}),m((t=>({...t,[e]:"pending"}))),alert(`Connection request sent to ${e}!`)}catch(Wm){console.error("Error sending connection request:",Wm)}})(e.id)},className:"px-4 py-2 rounded-lg "+("accepted"===p[e.id]?"bg-green-600 text-white":"pending"===p[e.id]?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:"accepted"===p[e.id]?"Message":"pending"===p[e.id]?"Waiting":"Connect"})]})]})]})})},e.id)}))]})]}),"sessions"===i&&(0,bw.jsx)("div",{className:"space-y-4",children:g.map((e=>(0,bw.jsx)("div",{className:"p-6 border rounded-lg shadow hover:shadow-lg transition-transform transform hover:scale-105",children:(0,bw.jsx)(jw,{className:"p-6",children:(0,bw.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,bw.jsx)("img",{src:e.hostProfilePicture||"/api/placeholder/40/40",alt:e.hostName,className:"w-12 h-12 rounded-full"}),(0,bw.jsxs)("div",{className:"flex-1",children:[(0,bw.jsx)("h3",{className:"font-semibold text-lg",children:e.title}),(0,bw.jsxs)("p",{className:"text-sm text-gray-600",children:["Hosted by: ",e.hostName]}),(0,bw.jsxs)("p",{className:"text-sm text-gray-600",children:["Subject: ",e.subject]}),(0,bw.jsxs)("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(1e3*e.date.seconds).toLocaleDateString()]}),(0,bw.jsxs)("p",{className:"text-sm text-gray-600",children:["Time: ",e.time]}),(0,bw.jsxs)("p",{className:"text-sm text-gray-600",children:["Duration: ",e.duration]})]}),(0,bw.jsx)("div",{children:v.includes(e.id)?(0,bw.jsx)("button",{onClick:()=>(async(e,t,n)=>{try{const r=qd(iw,"studySessions",e);await Zf(r,{participants:ap(_)}),b(v.filter((t=>t!==e)));const i=`${E} has left your session "${n}"`;t&&await tp(zd(iw,"notifications"),{userId:t,senderId:_,type:"session_leave",message:i,sessionId:e,status:"unread",timestamp:sp()})}catch(Wm){console.error("Error leaving session:",Wm)}})(e.id,e.hostId,e.hostName),className:"px-4 py-2 mt-4 text-white bg-red-600 rounded-lg",children:"Leave"}):(0,bw.jsx)("button",{onClick:()=>(async(e,t,n)=>{try{if(!_||!E)return void console.error("User ID or display name is missing.");if(!t)return void console.error("Host ID is undefined. Unable to send notification.");const r=qd(iw,"studySessions",e);await Zf(r,{participants:op(_)}),b([...v,e]);const i=`${E} joined your session "${n}"`;await tp(zd(iw,"notifications"),{userId:t,senderId:_,type:"session_join",message:i,sessionId:e,status:"unread",timestamp:sp()})}catch(Wm){console.error("Error joining session:",Wm)}})(e.id,e.hostId,e.hostName),className:"px-4 py-2 mt-4 text-white bg-blue-600 rounded-lg",children:"Join"})})]})})},e.id)))})]})},ZI=uw("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),eN=uw("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),tN=e=>{let{setCurrentPage:n,setSelectedUser:r}=e;const[i,s]=(0,t.useState)("all"),[o,a]=(0,t.useState)([]);(0,t.useEffect)((()=>{const e=rw.currentUser;if(e){return np(Of(zd(iw,"notifications"),Lf("userId","==",e.uid),Ff("timestamp","desc")),(async e=>{const t=await Promise.all(e.docs.map((async e=>{const t=e.data(),n=qd(iw,"users",t.senderId),r=await Qf(n),i=r.exists()?r.data().displayName:"Unknown User";return{id:e.id,...t,senderName:i}})));a(t)}))}}),[]);const l=()=>"all"===i?o:o.filter((e=>e.type===i)),c=async(e,t,n,r)=>{let i=`${rw.currentUser.displayName||"User"} has ${r} your session.`;"left"===r?i=`${rw.currentUser.displayName||"User"} has left your session.`:"joined"===r&&(i=`${rw.currentUser.displayName||"User"} joined your session.`);try{await tp(zd(iw,"notifications"),{userId:e,senderId:t,sessionId:n,type:"session-response",action:r,message:i,unread:!0,timestamp:sp()})}catch(Wm){console.error("Error sending notification to host:",Wm)}},u=e=>{switch(e){case"connection":return(0,bw.jsx)(kI,{className:"text-blue-600",size:20});case"session":return(0,bw.jsx)(fw,{className:"text-green-600",size:20});case"session-response":return(0,bw.jsx)(dw,{className:"text-teal-600",size:20});case"message":return(0,bw.jsx)(dw,{className:"text-purple-600",size:20});case"review":return(0,bw.jsx)(YI,{className:"text-yellow-600",size:20});case"reminder":return(0,bw.jsx)(Ow,{className:"text-red-600",size:20});default:return(0,bw.jsx)(yw,{className:"text-gray-600",size:20})}};return(0,bw.jsxs)("div",{className:"space-y-6",children:[(0,bw.jsxs)("div",{className:"flex items-center justify-between",children:[(0,bw.jsx)("h1",{className:"text-2xl font-bold",children:"Notifications"}),(0,bw.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,bw.jsxs)("button",{onClick:async()=>{o.forEach((async e=>{if(e.unread){const t=qd(iw,"notifications",e.id);await Zf(t,{unread:!1})}}))},className:"text-gray-600 hover:text-gray-800 flex items-center space-x-2",children:[(0,bw.jsx)(ZI,{size:20}),(0,bw.jsx)("span",{children:"Mark all as read"})]}),(0,bw.jsxs)("button",{onClick:async()=>{o.forEach((async e=>{const t=qd(iw,"notifications",e.id);await ep(t)}))},className:"text-gray-600 hover:text-gray-800 flex items-center space-x-2",children:[(0,bw.jsx)(eN,{size:20}),(0,bw.jsx)("span",{children:"Clear all"})]})]})]}),(0,bw.jsx)(Dw,{children:(0,bw.jsx)(jw,{className:"p-4",children:(0,bw.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,bw.jsx)(KI,{size:20,className:"text-gray-600"}),(0,bw.jsx)("button",{onClick:()=>s("all"),className:"px-3 py-1 rounded-full "+("all"===i?"bg-blue-100 text-blue-600":"text-gray-600"),children:"All"}),(0,bw.jsx)("button",{onClick:()=>s("connection"),className:"px-3 py-1 rounded-full "+("connection"===i?"bg-blue-100 text-blue-600":"text-gray-600"),children:"Connections"}),(0,bw.jsx)("button",{onClick:()=>s("session"),className:"px-3 py-1 rounded-full "+("session"===i?"bg-blue-100 text-blue-600":"text-gray-600"),children:"Sessions"}),(0,bw.jsx)("button",{onClick:()=>s("message"),className:"px-3 py-1 rounded-full "+("message"===i?"bg-blue-100 text-blue-600":"text-gray-600"),children:"Messages"})]})})}),(0,bw.jsx)("div",{className:"space-y-4",children:l().map((e=>{var t;return(0,bw.jsx)(Dw,{className:e.unread?"bg-blue-50":"",onClick:()=>(e=>{e.senderId&&(r(e.senderId),n("UserProfile"))})(e),style:{cursor:"pointer"},children:(0,bw.jsx)(jw,{className:"p-4",children:(0,bw.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,bw.jsx)("div",{className:"flex-shrink-0",children:(0,bw.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:u(e.type)})}),(0,bw.jsx)("div",{className:"flex-1 min-w-0",children:(0,bw.jsxs)("div",{className:"flex items-start justify-between",children:[(0,bw.jsxs)("div",{className:"space-y-1",children:[(0,bw.jsxs)("p",{className:"font-medium",children:[e.senderName?`${e.senderName} `:"Unknown User ",(0,bw.jsx)("span",{className:"text-gray-600 font-normal",children:e.message||e.action||"No notification message available"})]}),(0,bw.jsx)("p",{className:"text-sm text-gray-500",children:null===(t=e.timestamp)||void 0===t?void 0:t.toDate().toLocaleString()})]}),(0,bw.jsxs)("div",{className:"flex items-center space-x-2",children:["session"===e.type&&"pending"===e.status&&(0,bw.jsxs)("div",{className:"flex items-center space-x-2",children:["canceled"!==e.action&&(0,bw.jsxs)("div",{className:"space-x-2",children:[(0,bw.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{const t=qd(iw,"studySessions",e.sessionId),n=await Qf(t);if(n.exists){const r=n.data();await Zf(t,{participants:[...r.participants||[],rw.currentUser.uid]});const i=qd(iw,"notifications",e.id);await Zf(i,{status:"accepted",unread:!1}),await c(e.senderId,rw.currentUser.uid,e.sessionId,"joined"),a((t=>t.map((t=>t.id===e.id?{...t,status:"accepted",unread:!1}:t)))),alert("You have joined the session.")}}catch(Wm){console.error("Error accepting session invite:",Wm)}})(e)},className:"bg-blue-600 text-white px-3 py-1 rounded-lg text-sm",children:"Join"}),(0,bw.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{const t=qd(iw,"notifications",e.id);await Zf(t,{status:"declined",unread:!1}),await c(e.senderId,rw.currentUser.uid,e.sessionId,"declined"),a((t=>t.map((t=>t.id===e.id?{...t,status:"declined",unread:!1}:t)))),alert("Session invite declined.")}catch(Wm){console.error("Error declining session invite:",Wm)}})(e)},className:"border border-gray-300 px-3 py-1 rounded-lg text-sm",children:"Decline"})]}),"canceled"===e.action&&(0,bw.jsx)("span",{className:"text-red-600 font-semibold",children:"The study session has been canceled."})]}),"connection"===e.type&&"pending"===e.status&&(0,bw.jsxs)("div",{className:"space-x-2",children:[(0,bw.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{const t=qd(iw,"connections",e.connectionId);await Zf(t,{status:"accepted"});const n=qd(iw,"notifications",e.id);await Zf(n,{status:"accepted",unread:!1});const r=qd(iw,"users",rw.currentUser.uid),i=qd(iw,"users",e.senderId);await Promise.all([Zf(r,{studyBuddies:lp(1)}),Zf(i,{studyBuddies:lp(1)})]),a((t=>t.map((t=>t.id===e.id?{...t,status:"accepted",unread:!1}:t)))),alert("Connection accepted! You are now study buddies.")}catch(Wm){console.error("Error accepting connection request:",Wm)}})(e)},className:"bg-blue-600 text-white px-3 py-1 rounded-lg text-sm",children:"Accept"}),(0,bw.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{const t=qd(iw,"connections",e.connectionId);await Zf(t,{status:"declined"});const n=qd(iw,"notifications",e.id);await Zf(n,{status:"declined",unread:!1}),a((t=>t.map((t=>t.id===e.id?{...t,status:"declined",unread:!1}:t)))),alert("Connection request declined.")}catch(Wm){console.error("Error declining connection request:",Wm)}})(e)},className:"border border-gray-300 px-3 py-1 rounded-lg text-sm",children:"Decline"})]}),"connection"===e.type&&"accepted"===e.status&&(0,bw.jsx)("span",{className:"text-green-600 font-semibold",children:"Accepted"}),"connection"===e.type&&"declined"===e.status&&(0,bw.jsx)("span",{className:"text-red-600 font-semibold",children:"Declined"})]})]})})]})})},e.id)}))}),0===l().length&&(0,bw.jsx)(AI,{children:(0,bw.jsx)(PI,{children:"No notifications found for the selected filter."})})]})},nN=e=>{var n,r;let{selectedUserId:i}=e;const[s,o]=(0,t.useState)(null),[a,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(null),[h,d]=(0,t.useState)(null),[f,p]=(0,t.useState)(!1),[m,g]=(0,t.useState)(null),[y,v]=(0,t.useState)(!1),[b,_]=(0,t.useState)(0),[w,E]=(0,t.useState)([]),[S,x]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(async()=>{if(i&&"string"===typeof i)try{const n=qd(iw,"users",i),r=await Qf(n);if(r.exists()){var e,t;const n=r.data();o(n),l((null===(e=n.settings)||void 0===e?void 0:e.profileVisibility)||"Public"),E(n.ratings||[]),x((null===(t=n.ratedBy)||void 0===t?void 0:t.includes(rw.currentUser.uid))||!1)}else u("User data not found.")}catch(c){u("Error fetching user data."),console.error("Error fetching user data:",c)}else u("Invalid user ID.")})();const e=(()=>{const e=rw.currentUser;if(e){return np(Of(zd(iw,"connections"),Lf("userId","in",[e.uid,i]),Lf("partnerId","in",[e.uid,i])),(e=>{if(!e.empty){const t=e.docs[0].data();g(e.docs[0].id),"accepted"===t.status?p(!0):d(t.status)}}))}})();return()=>e&&e()}),[i]);const C=w.length>0?(w.reduce(((e,t)=>e+t),0)/w.length).toFixed(1):0,T=async()=>{const e=rw.currentUser;if(e){d("pending");try{const t=await tp(zd(iw,"connections"),{userId:e.uid,partnerId:i,status:"pending",createdAt:sp()});await tp(zd(iw,"notifications"),{userId:i,connectionId:t.id,senderId:e.uid,type:"connection",action:"sent you a connection request",status:"pending",unread:!0,timestamp:sp()})}catch(c){console.error("Error sending connection request:",c),d(null)}}};return c?(0,bw.jsx)("p",{className:"text-red-500 text-center mt-4",children:c}):s?(0,bw.jsxs)("div",{className:"space-y-6",children:[(0,bw.jsx)(Dw,{className:"shadow-lg rounded-lg bg-white",children:(0,bw.jsx)(jw,{className:"pt-8 pb-6 px-8",children:(0,bw.jsxs)("div",{className:"flex items-start space-x-6",children:[(0,bw.jsx)("div",{className:"w-28 h-28 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden shadow-md",children:s.profilePicture?(0,bw.jsx)("img",{src:s.profilePicture,alt:`${s.displayName}'s profile`,className:"w-full h-full object-cover rounded-full"}):(0,bw.jsx)(pw,{size:40,className:"text-gray-400"})}),(0,bw.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,bw.jsx)("h2",{className:"text-3xl font-semibold text-gray-800",children:s.displayName||"User"}),(0,bw.jsxs)("p",{className:"text-sm text-gray-500",children:["@",s.username||"username"]}),(0,bw.jsxs)("div",{className:"flex items-center space-x-4 text-gray-600 mt-1",children:[(0,bw.jsxs)("div",{className:"flex items-center",children:[(0,bw.jsx)(Rw,{className:"w-4 h-4 mr-1"}),(0,bw.jsx)("span",{className:"text-sm",children:s.major||"Undeclared"})]}),(0,bw.jsxs)("div",{className:"flex items-center",children:[(0,bw.jsx)(Aw,{className:"w-4 h-4 mr-1"}),(0,bw.jsx)("span",{className:"text-sm",children:s.university||"No University Provided"})]})]}),(0,bw.jsx)("p",{className:"mt-4 text-gray-700 text-base leading-relaxed",children:s.bio||"No bio available."})]}),(0,bw.jsxs)("div",{className:"flex items-center space-x-2",children:[!f&&"accepted"!==h&&(0,bw.jsx)("button",{onClick:T,className:("pending"===h?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600")+" px-6 py-2 rounded-lg transition-shadow shadow-md hover:shadow-lg",disabled:"pending"===h,children:"pending"===h?"Waiting":"Connect"}),f&&(0,bw.jsxs)(bw.Fragment,{children:[(0,bw.jsx)("button",{onClick:()=>alert("Messaging functionality coming soon!"),className:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-shadow shadow-md hover:shadow-lg",children:"Message"}),(0,bw.jsx)("button",{onClick:async()=>{try{if(m){await ep(qd(iw,"connections",m));const e=qd(iw,"users",rw.currentUser.uid),t=qd(iw,"users",i);await Zf(e,{studyBuddies:lp(-1)}),await Zf(t,{studyBuddies:lp(-1)}),p(!1),d(null),alert("Connection removed successfully.")}}catch(c){console.error("Error removing connection:",c)}},className:"bg-red-500 text-white px-6 py-2 rounded-lg hover:bg-red-600 transition-shadow shadow-md hover:shadow-lg ml-2",children:"Remove Connection"}),!S&&(0,bw.jsx)("button",{onClick:()=>v(!0),className:"bg-blue-500 text-white px-4 py-2 rounded ml-2 hover:bg-blue-600",children:"Rate"})]})]})]})})}),y&&(0,bw.jsxs)("div",{className:"mt-4 flex items-center space-x-1",children:[[1,2,3,4,5].map((e=>(0,bw.jsx)("span",{onClick:()=>(e=>{_(e)})(e),className:"cursor-pointer text-2xl "+(b>=e?"text-yellow-500":"text-gray-400"),children:"\u2605"},e))),(0,bw.jsx)("button",{onClick:async()=>{try{const e=rw.currentUser;if(!e)return;const t=qd(iw,"users",i);await Zf(t,{ratings:op(b),ratedBy:op(e.uid)}),E([...w,b]),v(!1),_(0),x(!0)}catch(c){console.error("Error submitting rating:",c)}},className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 ml-4",children:"Submit"})]}),"Private"===a&&!f&&(0,bw.jsx)(Dw,{className:"shadow-lg rounded-lg bg-white mt-6",children:(0,bw.jsxs)(jw,{className:"pt-8 pb-6 px-8 flex items-center flex-col text-center space-y-4",children:[(0,bw.jsx)(II,{size:48,className:"text-gray-400 mb-4"}),(0,bw.jsx)("p",{className:"text-gray-700 font-semibold text-lg",children:"This profile is private. Send a connection request to view details."}),"pending"===h?(0,bw.jsx)("button",{className:"bg-gray-400 text-gray-700 px-6 py-2 rounded-lg cursor-not-allowed",disabled:!0,children:"Waiting for Approval"}):(0,bw.jsx)("button",{onClick:T,className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-shadow shadow-md hover:shadow-lg",children:"Connect"})]})}),("Public"===a||f)&&(0,bw.jsxs)(bw.Fragment,{children:[(0,bw.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,bw.jsx)(Dw,{children:(0,bw.jsxs)(jw,{className:"pt-6 text-center",children:[(0,bw.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:s.sessionsCompleted||0}),(0,bw.jsx)("p",{className:"text-gray-600",children:"Sessions Completed"})]})}),(0,bw.jsx)(Dw,{children:(0,bw.jsxs)(jw,{className:"pt-6 text-center",children:[(0,bw.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:s.hoursStudied||0}),(0,bw.jsx)("p",{className:"text-gray-600",children:"Hours Studied"})]})}),(0,bw.jsx)(Dw,{children:(0,bw.jsxs)(jw,{className:"pt-6 text-center",children:[(0,bw.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:s.studyBuddies||0}),(0,bw.jsx)("p",{className:"text-gray-600",children:"Study Buddies"})]})}),(0,bw.jsx)(Dw,{children:(0,bw.jsxs)(jw,{className:"pt-6 text-center",children:[(0,bw.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[C," / 5"]}),(0,bw.jsx)("p",{className:"text-gray-600",children:"Average Rating"})]})})]}),(0,bw.jsxs)(Dw,{className:"shadow-lg rounded-lg bg-white",children:[(0,bw.jsx)(Lw,{children:(0,bw.jsxs)(Mw,{className:"flex items-center text-lg font-semibold text-gray-700",children:[(0,bw.jsx)(Pw,{className:"mr-2"}),"Subjects I Can Help With"]})}),(0,bw.jsx)(jw,{children:(0,bw.jsx)("div",{className:"flex flex-wrap gap-2",children:(null===(n=s.subjects)||void 0===n?void 0:n.map(((e,t)=>(0,bw.jsx)("span",{className:"bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm",children:e},t))))||(0,bw.jsx)("p",{className:"text-gray-500",children:"No subjects listed."})})})]}),(0,bw.jsxs)(Dw,{className:"shadow-lg rounded-lg bg-white",children:[(0,bw.jsx)(Lw,{children:(0,bw.jsxs)(Mw,{className:"flex items-center text-lg font-semibold text-gray-700",children:[(0,bw.jsx)(Ow,{className:"mr-2"}),"Weekly Availability"]})}),(0,bw.jsx)(jw,{children:(0,bw.jsx)("div",{className:"space-y-3",children:(null===(r=s.availability)||void 0===r?void 0:r.map(((e,t)=>(0,bw.jsxs)("div",{className:"flex items-center space-x-4 text-gray-600",children:[(0,bw.jsx)("span",{className:"w-24 font-medium",children:e.day}),(0,bw.jsx)("span",{children:e.times})]},t))))||(0,bw.jsx)("p",{className:"text-gray-500",children:"No availability specified."})})})]})]})]}):(0,bw.jsx)("p",{className:"text-gray-500 text-center mt-4",children:"Loading profile..."})},rN=()=>{const[e,n]=(0,t.useState)(""),r=[{id:1,name:"Sarah Chen",major:"Computer Science",year:"Junior",lastActive:"2 hours ago",subjects:["Data Structures","Algorithms","Web Development"],availableTime:"Evenings",imageUrl:"/api/placeholder/48/48"},{id:2,name:"Michael Park",major:"Mathematics",year:"Senior",lastActive:"5 minutes ago",subjects:["Calculus","Linear Algebra","Statistics"],availableTime:"Weekends",imageUrl:"/api/placeholder/48/48"},{id:3,name:"Emma Wilson",major:"Physics",year:"Sophomore",lastActive:"1 day ago",subjects:["Mechanics","Calculus","Programming"],availableTime:"Mornings",imageUrl:"/api/placeholder/48/48"}].filter((t=>t.name.toLowerCase().includes(e.toLowerCase())||t.subjects.some((t=>t.toLowerCase().includes(e.toLowerCase())))));return(0,bw.jsxs)("div",{className:"space-y-6",children:[(0,bw.jsxs)("div",{className:"flex items-center justify-between",children:[(0,bw.jsx)("h1",{className:"text-2xl font-bold",children:"My Connections"}),(0,bw.jsxs)("div",{className:"relative w-64",children:[(0,bw.jsx)(gw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,bw.jsx)("input",{type:"text",placeholder:"Search connections...",className:"w-full pl-10 pr-4 py-2 border rounded-lg",value:e,onChange:e=>n(e.target.value)})]})]}),(0,bw.jsxs)(Dw,{children:[(0,bw.jsx)(Lw,{children:(0,bw.jsxs)(Mw,{children:["Study Partners (",r.length,")"]})}),(0,bw.jsx)(jw,{children:(0,bw.jsx)("div",{className:"space-y-4",children:r.map((e=>(0,bw.jsxs)("div",{className:"flex items-start space-x-4 p-4 border rounded-lg hover:bg-gray-50",children:[(0,bw.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-12 h-12 rounded-full"}),(0,bw.jsxs)("div",{className:"flex-1",children:[(0,bw.jsxs)("div",{className:"flex justify-between items-start",children:[(0,bw.jsxs)("div",{children:[(0,bw.jsx)("h3",{className:"font-semibold",children:e.name}),(0,bw.jsxs)("p",{className:"text-sm text-gray-600",children:[e.major," \u2022 ",e.year]})]}),(0,bw.jsxs)("span",{className:"text-sm text-gray-500 flex items-center",children:[(0,bw.jsx)(Ow,{size:14,className:"mr-1"}),e.lastActive]})]}),(0,bw.jsxs)("div",{className:"mt-2",children:[(0,bw.jsxs)("p",{className:"text-sm text-gray-600 flex items-center",children:[(0,bw.jsx)(fw,{size:14,className:"mr-1"}),"Available: ",e.availableTime]}),(0,bw.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:e.subjects.map(((e,t)=>(0,bw.jsx)("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full",children:e},t)))})]}),(0,bw.jsxs)("div",{className:"mt-3 flex space-x-2",children:[(0,bw.jsxs)("button",{className:"text-sm bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center",children:[(0,bw.jsx)(dw,{size:16,className:"mr-2"}),"Message"]}),(0,bw.jsxs)("button",{className:"text-sm bg-blue-100 text-blue-600 px-4 py-2 rounded-lg flex items-center",children:[(0,bw.jsx)(fw,{size:16,className:"mr-2"}),"Schedule Study Session"]}),(0,bw.jsxs)("button",{className:"text-sm bg-red-100 text-red-600 px-4 py-2 rounded-lg flex items-center ml-auto",children:[(0,bw.jsx)(UI,{size:16,className:"mr-2"}),"Remove Connection"]})]})]})]},e.id)))})})]})]})},iN=()=>{const e=(e=>{switch(e){case"/auth":return"auth";case"/messages":return"messages";case"/profile":return"profile";case"/settings":return"settings";case"/calendar":return"calendar";case"/search":return"search";case"/notifications":return"notifications";case"/user-profile":return"UserProfile";case"/connections":return"connections";default:return"home"}})(window.location.pathname),[n,r]=(0,t.useState)(e),[i,s]=(0,t.useState)(null),[o,a]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null);return(0,t.useEffect)((()=>{const e=function(e,t,n,r){return X(e).onAuthStateChanged(t,n,r)}(rw,(e=>{s(e),a(!1)}));return()=>e()}),[]),(0,t.useEffect)((()=>{i&&"auth"===n&&r("home")}),[i,n]),(0,t.useEffect)((()=>{localStorage.setItem("currentPage",n);window.history.pushState(null,"",{auth:"/auth",home:"/home",messages:"/messages",profile:"/profile",settings:"/settings",calendar:"/calendar",search:"/search",notifications:"/notifications",UserProfile:"/user-profile",connections:"/connections"}[n]||"/")}),[n]),o?(0,bw.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,bw.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})}):i||"auth"===n?"auth"!==n||i?(0,bw.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,bw.jsx)(ww,{user:i,setCurrentPage:r}),(0,bw.jsxs)("main",{className:"max-w-7xl mx-auto px-4 pt-20 pb-6",children:["home"===n&&(0,bw.jsx)(Ew,{user:i,setCurrentPage:r,setSelectedUser:c}),"messages"===n&&(0,bw.jsx)(Nw,{user:i}),"profile"===n&&(0,bw.jsx)(TI,{user:i}),"settings"===n&&(0,bw.jsx)(OI,{user:i}),"calendar"===n&&(0,bw.jsx)(zI,{user:i}),"search"===n&&(0,bw.jsx)(XI,{user:i,setCurrentPage:r,setSelectedUser:c}),"notifications"===n&&(0,bw.jsx)(tN,{user:i,setCurrentPage:r,setSelectedUser:c}),"UserProfile"===n&&l&&(0,bw.jsx)(nN,{selectedUserId:l}),"connections"===n&&(0,bw.jsx)(rN,{})]})]}):(0,bw.jsx)(WI,{setCurrentPage:r}):(r("auth"),null)};n(285),n(781);i.createRoot(document.getElementById("root")).render((0,bw.jsx)(t.StrictMode,{children:(0,bw.jsx)(iN,{})}))})()})();
//# sourceMappingURL=main.1ddc706c.js.map